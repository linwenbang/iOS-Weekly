<!DOCTYPE html><html lang="en" data-reactroot=""><head><title>Swift 5 Release Notes for Xcode 10.2 | Apple Developer Documentation</title><meta content="width=device-width, initial-scale=1 viewport-fit=cover" name="viewport"/><meta data-pid="310635"/><link href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all" rel="stylesheet" type="text/css"/><link href="/documentation/__assets/application-e5bb1544.css" media="all" rel="stylesheet" type="text/css"/><noscript><link href="/documentation/__assets/nojs-c6be9131.css" media="all" rel="stylesheet" type="text/css"/></noscript><link rel="mask-icon" href="/documentation/__assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="/documentation/__assets/favicon.ico"/><script src="/documentation/__assets/shared-570ae4d6.js"></script></head><body><div id="_omniture_top">
      <script>
        var s_account="awdappledeveloper"
      </script>
      <script src="https://developer.apple.com/assets/metrics/scripts/analytics.js"></script>
      <script>
        s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
        s.channel="www.documentation.developer"

        var s_code=s.t();if(s_code)document.write(s_code)
      </script>
    </div><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><aside id="ac-gn-segmentbar" class="ac-gn-segmentbar" lang="en-US" dir="ltr"></aside><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US" dir="ltr" data-store-locale="us" data-store-api="/[storefront]/shop/bag/status" data-search-locale="en_US" data-search-api="/search-services/suggestions/">
      <div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open">
              <span class="ac-gn-menuanchor-label">Global Nav Open Menu</span>
            </a>
            <a href="#" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close">
              <span class="ac-gn-menuanchor-label">Global Nav Close Menu</span>
            </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus-small">
              <span class="ac-gn-link-text">Apple Developer</span>
            </a>
          </li>
        </ul>
        <div class="ac-gn-search-placeholder-container" role="search">
          <div class="ac-gn-search ac-gn-search-small">
            <a id="ac-gn-link-search-small" class="ac-gn-link" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer">
              <div class="ac-gn-search-placeholder-bar">
                <div class="ac-gn-search-placeholder-input">
                  <div class="ac-gn-search-placeholder-input-text" aria-hidden="true">
                    <div class="ac-gn-link-search ac-gn-search-placeholder-input-icon"></div>
                    <span class="ac-gn-search-placeholder">Search Developer</span>
                  </div>
                </div>
                <div class="ac-gn-searchview-close ac-gn-searchview-close-small ac-gn-search-placeholder-searchview-close">
                  <span class="ac-gn-searchview-close-cancel" aria-hidden="true">Cancel</span>
                </div>
              </div>
            </a>
          </div>
        </div>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus">
              <span class="ac-gn-link-text">Apple Developer</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link ac-gn-link-discover" href="/discover/" data-analytics-title="discover">
              <span class="ac-gn-link-text">Discover</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link ac-gn-link-design" href="/design/" data-analytics-title="design">
              <span class="ac-gn-link-text">Design</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link ac-gn-link-develop" href="/develop/" data-analytics-title="develop">
              <span class="ac-gn-link-text">Develop</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link ac-gn-link-distribute" href="/distribute/" data-analytics-title="distribute">
              <span class="ac-gn-link-text">Distribute</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-dsupport">
            <a class="ac-gn-link ac-gn-link-dsupport" href="/support/" data-analytics-title="dsupport">
              <span class="ac-gn-link-text">Support</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link ac-gn-link-account" href="/account/" data-analytics-title="account">
              <span class="ac-gn-link-text">Account</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-link-search" class="ac-gn-link ac-gn-link-search" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer"></a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <div class="ac-gn-searchview-bar">
              <div class="ac-gn-searchview-bar-wrapper">
                <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
                  <div class="ac-gn-searchform-wrapper">
                    <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" aria-label="Search Developer" placeholder="Search Developer" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="true" aria-owns="quicklinks suggestions" />
                    <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit Search"></button>
                    <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search">
                        <span class="ac-gn-searchform-reset-background"></span>
                      </button>
                  </div>
                </form>
                <button id="ac-gn-searchview-close-small" class="ac-gn-searchview-close ac-gn-searchview-close-small" aria-label="Cancel Search">
                    <span class="ac-gn-searchview-close-cancel" aria-hidden="true">
                      Cancel
                    </span>
                  </button>
              </div>
            </div>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults=""></aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Cancel Search">
              <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
                <span class="ac-gn-searchview-close-right"></span>
              </span>
            </button>
        </aside>
          </div>
    </nav><div class="ac-gn-blur"></div><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="/documentation" class="localnav-title">Documentation</a><div class="localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul aria-label="Breadcrumbs" class="localnav-menu-items localnav-menu-breadcrumbs"><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="/documentation/xcode_release_notes?language=objc">Xcode Release Notes</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="/documentation/xcode_release_notes/xcode_10_2_release_notes?language=objc">Xcode 10.2 Release Notes</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><div class="localnav-menu-breadcrumb-current-container localnav-menu-link current"><span aria-current="page" class="localnav-menu-breadcrumb-current">Swift 5 Release Notes for Xcode 10.2</span></div></li></ul><ul class="localnav-menu-items localnav-menu-settings" data-breadcrumbs-count="3"><li class="localnav-menu-setting language-container"><div class="language-toggle-container"><label for="language-toggle" class="language-toggle-label">Language:</label><select id="language-toggle" class="language-dropdown localnav-menu-link" style="width:auto"><option value="swift">Swift</option><option selected="" value="occ">Objective-C</option></select></div><div class="language-list-container"><span class="localnav-menu-setting-label">Language:</span><ul class="language-list"><li class="language-list-item"><a href="/documentation/xcode_release_notes/xcode_10_2_release_notes/swift_5_release_notes_for_xcode_10_2" class="localnav-menu-setting-link">Swift</a></li><li class="language-list-item"><span data-language="objc" aria-current="page" class="current-language">Objective-C</span></li></ul></div></li><li class="localnav-menu-setting"><span class="localnav-menu-setting-label">API Changes:</span><span class="changes-toggle">None</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow">Article</span><h1 class="topic-heading"><span>Swift 5 Release Notes for Xcode 10<wbr/>.2</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p>Update your code to use new language features and test your apps against changes.</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section sdks" role="complementary" aria-label="SDK"><p class="topic-summary-section-label subsection-label">SDK</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item sdk"><span aria-label="Xcode 10.2+, Available on Xcode 10.2 and later" role="text" title="Available on Xcode 10.2 and later">Xcode 10.2+</span></li></ul></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="overview" class="section"><h2>Overview</h2><div class="formatted-content"><div><p>Read these notes when you’re writing Swift apps in Xcode 10.2.</p></div><h3 id="3161764">General</h3><div><p></p></div><h4 id="3161758">Swift 5 Runtime Support for Command Line Tools Package</h4><div><ul><li><p>Starting with Xcode 10.2, Swift command line tools require the Swift libraries in macOS. They’re included by default starting with macOS Mojave 10.14.4. In macOS Mojave 10.14.3 and earlier, there’s an optional package to provide these runtime support libraries for Swift command line tools that you can download from <a href="https://developer.apple.com/download/more/">More Downloads for Apple Developers</a>. If you installed the beta version of this package, replace it with the release version. This package is only needed for Swift command line tools, not for apps with graphical user interfaces.</p></li></ul><p></p></div><h3 id="3138038">App Thinning</h3><div><p></p></div><h4 id="3138042">New Features</h4><div><ul><li><p>Swift apps no longer include dynamically linked libraries for the Swift standard library and Swift SDK overlays in build variants for devices running iOS 12.2, watchOS 5.2, and tvOS 12.2. As a result, Swift apps can be smaller when they’re shipped in the App Store, deployed for testing using TestFlight, or thinned in an app archive for local development distribution.</p><p>To see the difference in file sizes between an app that’s thinned for iOS 12.2 and an app that’s thinned for iOS 12.1 or earlier, set your app’s deployment target to iOS 12.1 or earlier, then create an archive of your app with the scheme set to Generic iOS Device. After building the archive, select Distribute App from the Archives organizer, then select Development distribution. Be sure to select a specific device—such as iPhone XS—in the App Thinning pull-down menu. When the distribution process completes, open the App Thinning Size Report in the newly created folder. The variant for iOS 12.2 will be smaller than the variant for iOS 12.1 and earlier. The exact size difference depends on the number of system frameworks your app uses.</p><p>For information about app thinning, see <a href="https://help.apple.com/xcode/mac/current/#/devbbdc5ce4f">What is app thinning?</a> in <a href="https://help.apple.com/xcode/mac/current/">Xcode Help</a>. For information about app file sizes, see <a href="https://help.apple.com/app-store-connect/#/dev3b56ce97c">View builds and file sizes</a> in <a href="https://help.apple.com/app-store-connect/">App Store Connect Help</a>. </p></li></ul><p></p></div><h3 id="3136851">Swift Language</h3><div><p></p></div><h4 id="3136844">New Features</h4><div><ul><li><p>String literals can now be expressed using enhanced delimiters. A string literal with one or more number signs (<code class="code-voice"><span>#</span></code>) before the opening quote treats backslashes and double-quote characters as literal unless they’re followed by the same number of number signs. Use enhanced delimiters to avoid cluttering string literals that contain many double-quote or backslash characters with extra escapes (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0200-raw-string-escaping.md">SE-0200</a>) (47725014):</p></li></ul><figure id="3144587"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>print(#&quot;&lt;a href=&quot;\#(url)&quot; title=&quot;Apple Developer&quot;&gt;&quot;#)
// Equivalent to:
print(&quot;&lt;a href=\&quot;\(url)\&quot; title=\&quot;Apple Developer\&quot;&gt;&quot;)
</code></pre></div></div></figure><p></p><ul><li><p>If you declare a type that has the same name as a type in the standard library, your type now shadows the type from the standard library.  (46767892)</p><p>For example, if you declare a <code class="code-voice"><span>Result</span></code> type in a module named <code class="code-voice"><span>Foo</span></code>:</p></li></ul><figure id="3141457"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>// Module `Foo`.
public enum Result&lt;T&gt; {
    case value(T)
    case error(Error)
}
</code></pre></div></div></figure><p>Unqualified references to <code class="code-voice"><span>Result</span></code> in any of your code that imports the <code class="code-voice"><span>Foo</span></code> module will resolve to <code class="code-voice"><span>Foo<wbr/>.Result</span></code>:</p><figure id="3141455"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>import Foo
func doSomething() -&gt; Result&lt;Int&gt; { /* … */ }
</code></pre></div></div></figure><p>To refer to the <a class="symbol-name" href="/documentation/swift/result?language=objc"><code><span>Result</span></code></a> type from the Swift standard library instead, qualify the access with the “<code class="code-voice"><span>Swift.</span></code>” prefix. For example:</p><figure id="3141456"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>import Foo
func useStandardLibraryResult() -&gt; Swift.Result&lt;Int, Error&gt; { /* … */ }
</code></pre></div></div></figure><p></p><ul><li><p>The <code class="code-voice"><span>@dynamic<wbr/>Callable</span></code> attribute lets you call named types like you call functions using a simple syntactic sugar. The primary use case is dynamic language interoperability. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0216-dynamic-callable.md">SE-0216</a>) (47325423)</p><p>For example: </p></li></ul><figure id="3136849"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>@dynamicCallable struct ToyCallable {
    func dynamicallyCall(withArguments: [Int]) {}
    func dynamicallyCall(withKeywordArguments: KeyValuePairs&lt;String, Int&gt;) {}
}

let x = ToyCallable()

x(1, 2, 3)
// Desugars to `x.dynamicallyCall(withArguments: [1, 2, 3])`

x(label: 1, 2)
// Desugars to `x.dynamicallyCall(withKeywordArguments: [&quot;label&quot;: 1, &quot;&quot;: 2])`
</code></pre></div></div></figure><p></p><ul><li><p>Key paths now support the identity keypath (<code class="code-voice"><span>\.self</span></code>), a <a class="symbol-name" href="/documentation/swift/writablekeypath?language=objc"><code><span>Writable<wbr/>Key<wbr/>Path</span></code></a> that refers to its entire input value (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0227-identity-keypath.md">SE-0227</a>) (40538312):</p></li></ul><figure id="3136847"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>let id = \Int.self
var x = 2
print(x[keyPath: id]) // Prints &quot;2&quot;
x[keyPath: id] = 3
print(x[keyPath: id]) // Prints &quot;3&quot;
</code></pre></div></div></figure><p></p><ul><li><p>Prior to Swift 5, you could write an enumeration case that took variadic arguments:  </p></li></ul><figure id="3136848"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>enum X {
    case foo(bar: Int...) 
}
 func baz() -&gt; X {
    return .foo(bar: 0, 1, 2, 3) 
} 
</code></pre></div></div></figure><p> This wasn’t intentionally supported and now generates an error. (46821582)</p><p>Instead, change the enumeration case to take an array and explicitly pass an array in: </p><figure id="3136843"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>enum X {
    case foo(bar: [Int]) 
} 
 func baz() -&gt; X {
    return .foo(bar: [0, 1, 2, 3]) 
} 
</code></pre></div></div></figure><p></p><ul><li><p>In Swift 5 mode, <code class="code-voice"><span>try?</span></code> with an expression of an <a class="symbol-name" href="/documentation/swift/optional?language=objc"><code><span>Optional</span></code></a> type flattens the resulting optional, instead of returning a nested optional. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0230-flatten-optional-try.md">SE-0230</a>) (47313584)</p></li><li><p>If a type <code class="code-voice"><span>T</span></code> conforms to one of the protocols in <a href="/documentation/swift/swift_standard_library/initialization_with_literals?language=objc">Initialization with Literals</a>—such as <a class="symbol-name" href="/documentation/swift/expressiblebyintegerliteral?language=objc"><code><span>Expressible<wbr/>By<wbr/>Integer<wbr/>Literal</span></code></a>—and <em>literal</em> is a literal expression, then <code class="code-voice"><span>T(</span></code><em>literal</em><code class="code-voice"><span>)</span></code> creates a literal of type <code class="code-voice"><span>T</span></code> using the corresponding protocol, rather than calling an initializer of <code class="code-voice"><span>T</span></code> with a value of the protocol’s default literal type.</p><p>For example, expressions like <code class="code-voice"><span>UInt64(0xffff<wbr/>_ffff<wbr/>_ffff<wbr/>_ffff)</span></code> are now valid, where previously they would overflow the default integer literal type of <a class="symbol-name" href="/documentation/swift/int?language=objc"><code><span>Int</span></code></a>. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0213-literal-init-via-coercion.md">SE-0213</a>) (17088188)</p></li><li><p>String interpolation has improved performance, clarity, and efficiency. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0228-fix-expressiblebystringinterpolation.md">SE-0228</a>) (43621912)</p><p>The older <code class="code-voice"><span>_Expressible<wbr/>By<wbr/>String<wbr/>Interpolation</span></code> protocol is removed; if you have code that makes use of this protocol, you need to update it for the new design. You can use <code class="code-voice"><span>#if</span></code> to conditionalize code between Swift 4.2 and Swift 5. For example:</p></li></ul><figure id="3136845"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>#if compiler(&lt;5)
extension MyType: _ExpressibleByStringInterpolation { /*...*/ }
#else
extension MyType: ExpressibleByStringInterpolation { /*...*/ }
#endif 
</code></pre></div></div></figure><p></p></div><h3 id="3136871">Swift Standard Library</h3><div><p></p></div><h4 id="3136870">New Features</h4><div><ul><li><p>The standard library now includes the <a class="symbol-name" href="/documentation/swift/result?language=objc"><code><span>Result</span></code></a> enumeration with <a class="symbol-name" href="/documentation/swift/result/success?language=objc"><code><span>Result<wbr/>.success(_:)</span></code></a> and <a class="symbol-name" href="/documentation/swift/result/failure?language=objc"><code><span>Result<wbr/>.failure(_:)</span></code></a> cases. Use <code class="code-voice"><span>Result</span></code> to manually propagate and handle errors in situations where <code class="code-voice"><span>do-catch</span></code> statements and the <code class="code-voice"><span>try</span></code> expression can’t be used, such as when you’re using asynchronous APIs that can fail.</p><p>As part of this addition, the <a class="symbol-name" href="/documentation/swift/error?language=objc"><code><span>Error</span></code></a> protocol now conforms to itself, which makes working with errors in a generic context easier. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0235-add-result.md">SE-0235</a>) (21200405)</p></li><li><p><a class="symbol-name" href="/documentation/swift/simd?language=objc"><code><span>SIMD</span></code></a> types and basic operators are now defined in the standard library. The types provided by the <a href="/documentation/simd?language=objc">simd</a> framework, like <a class="symbol-name" href="/documentation/simd/float2?language=objc"><code><span>float2</span></code></a> and <a class="symbol-name" href="/documentation/simd/float3?language=objc"><code><span>float3</span></code></a>, are now type aliases of the new standard library types.</p><p>SIMD types are generic over the scalar element type. For example, the old <a class="symbol-name" href="/documentation/simd/float3?language=objc"><code><span>float3</span></code></a> type is a type alias of <code class="code-voice"><span>SIMD3&lt;Float&gt;</span></code>. Any type that conforms to the <a class="symbol-name" href="/documentation/swift/simdscalar?language=objc"><code><span>SIMDScalar</span></code></a> protocol can be used as a scalar type for SIMD vectors, but effective vectorization depends on choosing a good data layout and having efficient subscript operations for the associated <a class="symbol-name" href="/documentation/swift/simdstorage?language=objc"><code><span>SIMDStorage</span></code></a> types.</p><p>Most existing code using <code class="code-voice"><span>simd</span></code> types will continue to work with the new generic SIMD types, but there are a few changes to note.</p><p>The new types add some new conformances; SIMD vectors are now <a class="symbol-name" href="/documentation/swift/hashable?language=objc"><code><span>Hashable</span></code></a>, <a class="symbol-name" href="/documentation/swift/equatable?language=objc"><code><span>Equatable</span></code></a>, and <a class="symbol-name" href="/documentation/swift/codable?language=objc"><code><span>Codable</span></code></a>. This may allow you to delete some existing extensions that provide these conformances in your own code.</p><p>The set of operators that are overloaded to provide vector-scalar arithmetic is greatly expanded. This makes it easier to write some things, but in some cases introduces ambiguity to the typechecker and may make it necessary to break apart some expressions or annotate with explicit types.</p><p>Because the types are now generic rather than concrete, if you have defined your own protocols over the <code class="code-voice"><span>simd</span></code> framework types, it may be necessary to refactor the conformances because a Swift generic type can’t have multiple conditional conformances to a protocol. This situation is relatively rare, but what you need to do in general is refactor code that looks like this:</p></li></ul><figure id="3141601"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>protocol MyVectorProtocol { /* ... */ }
extension float2: MyVectorProtocol { /* ... */ }
extension double2: MyVectorProtocol { /* ... */ }
</code></pre></div></div></figure><p>To use the following structure instead:</p><figure id="3141605"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>protocol MySIMDScalarProtocol: SIMDScalar { /* ... */ }
extension SIMD2 where Scalar: MySIMDScalarProtocol { /* ... */ }
// Or even:
protocol MySIMDScalarProtocol: SIMDScalar { /* ... */ }
extension SIMD where Scalar: MySIMDScalarProtocol { /* ... */ }
</code></pre></div></div></figure><p>This change will frequently allow you to remove many redundant implementations, but it requires that you define any necessary implementation hooks that reference the concrete functions from the C headers on Darwin systems on the scalar type. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0229-simd.md">SE-0229</a>) (17045503)</p><ul><li><p><a class="symbol-name" href="/documentation/swift/set?language=objc"><code><span>Set</span></code></a> and <a class="symbol-name" href="/documentation/swift/dictionary?language=objc"><code><span>Dictionary</span></code></a> now use a different hash seed for each newly created instance. As a consequence, the order of elements in equal sets and dictionaries is different much more often than in previous versions:</p></li></ul><figure id="3141602"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>let a: Set&lt;Int&gt; = [1, 2, 3, 4, 5]
let b: Set&lt;Int&gt; = [1, 2, 3, 4, 5]
a == b  // true
print(a) // [1, 4, 3, 2, 5]
print(b) // [4, 2, 5, 1, 3]
</code></pre></div></div></figure><p>Existing code that incorrectly assumes that two unrelated but equal sets or dictionaries would contain elements in the same order produces incorrect results more often in Swift 5. Although element ordering isn’t stable across distinct <code class="code-voice"><span>Set</span></code> or <code class="code-voice"><span>Dictionary</span></code> instances, the order doesn’t vary between multiple iterations over the same instance. Beyond emphasizing that these collections don’t guarantee consistent element ordering, this change also fixes a number of cases where bulk operations—such as <a class="symbol-name" href="/documentation/swift/set/3128858-union?language=objc"><code><span>union(_:)</span></code></a>—exhibited quadratic performance. (44760778)</p><ul><li><p>To help prevent inconsistent hashing for Cocoa objects, the <a class="symbol-name" href="/documentation/objectivec/nsobject/1418615-hashvalue?language=objc"><code><span>hash<wbr/>Value</span></code></a> property on <a class="symbol-name" href="/documentation/objectivec/nsobject?language=objc"><code><span>NSObject</span></code></a> is no longer overridable. Overrides of <code class="code-voice"><span>hash<wbr/>Value</span></code> were deprecated in Swift 4.2. To customize hashing in <code class="code-voice"><span>NSObject</span></code> subclasses, override the <a class="symbol-name" href="/documentation/objectivec/1418956-nsobject/1418859-hash?language=objc"><code><span>hash</span></code></a> property. The following example shows a sample implementation:</p></li></ul><figure id="3141604"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>class Person: NSObject {
    let name: String

    init(name: String) {
        self.name = name
        super.init()
    }

    override func isEqual(_ other: Any?) -&gt; Bool {
        guard let other = other as? Person else { return false }
        return other.name == self.name
    }

    override var hash: Int {
        var hasher = Hasher()
        hasher.combine(name)
        return hasher.finalize()
    }
}
</code></pre></div></div></figure><p>Hashing and equality go hand in hand. If you override <code class="code-voice"><span>hash</span></code>, you also need to override <a class="symbol-name" href="/documentation/objectivec/1418956-nsobject/1418795-isequal?language=objc"><code><span>is<wbr/>Equal:</span></code></a>, and vice versa. (42623458)</p><ul><li><p>The <a class="symbol-name" href="/documentation/swift/dictionaryliteral?language=objc"><code><span>Dictionary<wbr/>Literal</span></code></a> type is renamed <a class="symbol-name" href="/documentation/swift/keyvaluepairs?language=objc"><code><span>Key<wbr/>Value<wbr/>Pairs</span></code></a>. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0214-DictionaryLiteral.md">SE-0214</a>) (23435865)</p></li><li><p>Swift strings bridged into Objective-C code may now return a non-<code class="code-voice"><span>nil</span></code> value from <a class="symbol-name" href="/documentation/corefoundation/1542133-cfstringgetcstringptr?language=objc"><code><span>CFString<wbr/>Get<wbr/>CString<wbr/>Ptr</span></code></a> when appropriate, and the pointer returned from the <code class="code-voice"><span>UTF8String</span></code> method is tied to the string’s lifetime rather than the innermost autorelease pool. Correct programs shouldn’t have any problems and may see significant speed-ups. However, it may cause previously untested code to run, which could expose latent bugs; for example, if there’s a check for a non-<code class="code-voice"><span>nil</span></code> value, the branch may never have been taken prior to Swift 5. (26236614)</p></li><li><p>The <a class="symbol-name" href="/documentation/swift/sequence?language=objc"><code><span>Sequence</span></code></a> protocol no longer has a <code class="code-voice"><span>Sub<wbr/>Sequence</span></code> associated type. Methods on <code class="code-voice"><span>Sequence</span></code> that previously returned <code class="code-voice"><span>Sub<wbr/>Sequence</span></code> now return concrete types. For example, <a class="symbol-name" href="/documentation/swift/sequence/3128822-suffix?language=objc"><code><span>suffix(_:)</span></code></a> now returns an <a class="symbol-name" href="/documentation/swift/array?language=objc"><code><span>Array</span></code></a>.  (45761817)</p><p>Extensions on <code class="code-voice"><span>Sequence</span></code> that use <code class="code-voice"><span>Sub<wbr/>Sequence</span></code> should be amended to either similarly use a concrete type, or be amended to be extensions on <a class="symbol-name" href="/documentation/swift/collection?language=objc"><code><span>Collection</span></code></a> instead, where <a class="symbol-name" href="/documentation/swift/collection/1641276-subsequence?language=objc"><code><span>Sub<wbr/>Sequence</span></code></a> remains available.</p><p>For example:</p></li></ul><figure id="3136874"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>extension Sequence {
    func dropTwo() -&gt; SubSequence {
        return self.dropFirst(2)
    }
}
</code></pre></div></div></figure><p>Becomes:</p><figure id="3136873"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>extension Sequence {
    func dropTwo() -&gt; DropFirstSequence&lt;Self&gt; { 
        return self.dropFirst(2)
    }
}
</code></pre></div></div></figure><p>Or:</p><figure id="3136872"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>extension Collection {
    func dropTwo() -&gt; SubSequence {
        return self.dropFirst(2)
    }
}
</code></pre></div></div></figure><ul><li><p>The <a class="symbol-name" href="/documentation/swift/string?language=objc"><code><span>String</span></code></a> structure’s native encoding switched from UTF-16 to UTF-8, which may improve the relative performance of <a class="symbol-name" href="/documentation/swift/string/utf8view?language=objc"><code><span>String<wbr/>.UTF8View</span></code></a> compared to <a class="symbol-name" href="/documentation/swift/string/utf16view?language=objc"><code><span>String<wbr/>.UTF16View</span></code></a>. Consider re-evaluating any code specifically tuned to use <code class="code-voice"><span>String<wbr/>.UTF16View</span></code> for performance. (42339222)</p></li></ul></div><h4 id="3171765">Known Issues</h4><div><ul><li><p>The <code class="code-voice"><span>count(where:)</span></code> method on the <a class="symbol-name" href="/documentation/swift/sequence?language=objc"><code><span>Sequence</span></code></a> protocol available in beta versions of Xcode 10.2 is now removed. (47549309)</p><p><strong>Workaround:</strong> Use <a class="symbol-name" href="/documentation/swift/anycollection/2906169-reduce?language=objc"><code><span>reduce(_:<wbr/>_:)</span></code></a> to count occurrences matching a predicate efficiently:</p></li></ul><figure id="3171766"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>let occurrences = sequence.reduce(0) { predicate($1) ? $0 + 1 : $0 }
</code></pre></div></div></figure><p></p><p></p></div><h4 id="3161766">Resolved Issues</h4><div><ul><li><p>Setting the <a class="symbol-name" href="/documentation/swift/string/1539703-utf8?language=objc"><code><span>utf8</span></code></a> property on a string now works as expected. (47864538)</p></li><li><p>Passing a null <a class="symbol-name" href="/documentation/swift/unsafebufferpointer?language=objc"><code><span>Unsafe<wbr/>Buffer<wbr/>Pointer</span></code></a><code class="code-voice"><span>&lt;UInt8&gt;</span></code> to the <a class="symbol-name" href="/documentation/swift/string?language=objc"><code><span>String</span></code></a> structure’s <a class="symbol-name" href="/documentation/swift/string/2907004-init?language=objc"><code><span>init(decoding:<wbr/>as:)</span></code></a> initializer now returns an empty string as expected. (47864610)</p></li></ul></div><h3 id="3136858">Swift Package Manager</h3><div><p></p></div><h4 id="3136853">New Features</h4><div><ul><li><p>Targets can now declare some commonly used, target-specific build settings when using the Swift 5 <code class="code-voice"><span>Package<wbr/>.swift</span></code> <code class="code-voice"><span>tools-version</span></code>. The new settings can also be conditionalized based on platform and build configuration. The included build settings support Swift- and C-language defines, C language header search paths, linked libraries, and linked frameworks. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0238-package-manager-build-settings.md">SE-0238</a>) (23270646)</p></li><li><p>Packages can now customize the minimum deployment target setting for Apple platforms when using the Swift 5 <code class="code-voice"><span>Package<wbr/>.swift</span></code> <code class="code-voice"><span>tools-version</span></code>. Building a package emits an error if any of the package dependencies of the package specify a minimum deployment target greater than the package’s own minimum deployment target. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0236-package-manager-platform-deployment-settings.md">SE-0236</a>) (28253354)</p></li><li><p>A new dependency mirroring feature allows top-level packages to override dependency URLs. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0219-package-manager-dependency-mirroring.md">SE-0219</a>) (42511642)</p><p>Use the following command to set a mirror:  </p></li></ul><figure id="3136857"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="other"><code>$ swift package config set-mirror \
--package-url &lt;original URL&gt; --mirror-url &lt;mirror URL&gt;
</code></pre></div></div></figure><p> </p><ul><li><p>The <code class="code-voice"><span>swift test</span></code> command can generate code coverage data in a standard format suitable for consumption by other code coverage tools using the flag <code class="code-voice"><span>--enable-code-coverage</span></code>. The generated code coverage data is available inside <em>&lt;build-dir&gt;</em><code class="code-voice"><span>/</span></code><em>&lt;configuration&gt;</em><code class="code-voice"><span>/codecov</span></code>. (44567442) </p></li><li><p>Swift 5 no longer supports the Swift 3 <code class="code-voice"><span>Package<wbr/>.swift</span></code> <code class="code-voice"><span>tools-version</span></code>. Packages still on the Swift 3 <code class="code-voice"><span>Package<wbr/>.swift</span></code> <code class="code-voice"><span>tools-version</span></code> should update to a newer <code class="code-voice"><span>tools-version</span></code>. (41974124) </p></li><li><p>Package manager operations for larger packages are now significantly faster. (35596212) </p></li><li><p>The Swift Package Manager has a new <code class="code-voice"><span>--disable-automatic-resolution</span></code> flag that forces the package resolution to fail when the <code class="code-voice"><span>Package<wbr/>.resolved</span></code> entries are no longer compatible with the dependency versions specified in the <code class="code-voice"><span>Package<wbr/>.swift</span></code> manifest file. This feature can be useful for a continuous integration system to check if a package’s <code class="code-voice"><span>Package<wbr/>.resolved</span></code> is out of date. (45822895)</p></li><li><p>The <code class="code-voice"><span>swift run</span></code> command has a new <code class="code-voice"><span>--repl</span></code> option that launches the Swift REPL with support for importing library targets of a package. This allows you to easily experiment with API from a package target without needing to build an executable that calls that API. (44889181) </p></li><li><p>For more information about using the Swift Package Manager, visit <a href="https://swift.org/getting-started/#using-the-package-manager">Using the Package Manager</a> on <a href="https://swift.org">swift.org</a>.</p></li></ul><p></p></div><h3 id="3136852">Swift Compiler</h3><div><p></p></div><h4 id="3136855">New Features</h4><div><ul><li><p>To reduce the size taken up by Swift metadata, convenience initializers defined in Swift now only allocate an object ahead of time if they’re calling a designated initializer defined in Objective-C. In most cases, this has no effect on your app, but if your convenience initializer is called from Objective-C and doesn’t in turn delegate via <code class="code-voice"><span>self<wbr/>.init</span></code> to an initializer exposed to Objective-C, the initial allocation from <a class="symbol-name" href="/documentation/objectivec/nsobject/1571958-alloc?language=objc"><code><span>alloc</span></code></a> is released without any initializer being called. This can be problematic for users of the initializer that don’t expect any sort of object replacement to happen. One instance of this is with <a class="symbol-name" href="/documentation/foundation/nscoding/1416145-initwithcoder?language=objc"><code><span>init<wbr/>With<wbr/>Coder:</span></code></a>: the implementation of <a class="symbol-name" href="/documentation/foundation/nskeyedunarchiver?language=objc"><code><span>NSKeyed<wbr/>Unarchiver</span></code></a> may behave incorrectly if it calls into Swift implementations of <code class="code-voice"><span>init<wbr/>With<wbr/>Coder:</span></code> and the archived object graph contains cycles.</p><p>To avoid this, ensure that convenience initializers that don’t support object replacement always delegate to initializers that are also exposed to Objective-C, either because they’re defined in Objective-C, or because they’re marked with <code class="code-voice"><span>@objc</span></code>, or because they override initializers exposed to Objective-C, or because they satisfy requirements of an <code class="code-voice"><span>@objc</span></code> protocol. (46823518)</p></li><li><p>C types with an alignment greater than 16 bytes are no longer available in Swift. The Swift compiler never handled these types correctly. (31411216)</p></li><li><p>In Swift 5 mode, the type of <code class="code-voice"><span>self</span></code> in a convenience initializer of a nonfinal class is now the dynamic <code class="code-voice"><span>Self</span></code> type, and not the concrete class type. (47323459)</p></li><li><p>Exclusive memory access is now enforced at runtime by default in optimized (<code class="code-voice"><span>-O</span></code> and <code class="code-voice"><span>-Osize</span></code>) builds. Programs that violate exclusivity trap at runtime and produce a diagnostic message: “Simultaneous accesses to […], but modification requires exclusive access”. You can disable this using the command line flag <code class="code-voice"><span>-enforce-exclusivity=unchecked</span></code>, but doing so may result in undefined behavior. Runtime violations of exclusivity typically result from simultaneous access of class properties or global variables—including variables in top-level code or variables captured by escaping closures. For more information, see <a href="https://swift.org/blog/swift-5-exclusivity/">Swift 5 Exclusivity Enforcement</a>. (<a href="https://bugs.swift.org/browse/SR-7139">SR-7139</a>) (37830912) </p></li><li><p>Swift 3 mode has been removed. Supported values for the <code class="code-voice"><span>-swift-version</span></code> flag are <code class="code-voice"><span>4</span></code>, <code class="code-voice"><span>4<wbr/>.2</span></code>, and <code class="code-voice"><span>5</span></code>. (43101816) </p></li><li><p>In Swift 5 mode, switches over enumerations that are declared in Objective-C or that come from system frameworks are required to handle <em>unknown cases</em>—cases that might be added in the future, or that may be defined privately in an Objective-C implementation file. Formally, Objective-C allows storing any value in an enumeration as long as it fits in the underlying type. These unknown cases can be handled by using the new <code class="code-voice"><span>@unknown default</span></code> case, which still provides warnings if any known cases are omitted from the switch. They can also be handled using a normal <code class="code-voice"><span>default</span></code> case.</p><p>If you’ve defined your own enumeration in Objective-C and you don’t need clients to handle unknown cases, you can use the <code class="code-voice"><span>NS<wbr/>_CLOSED<wbr/>_ENUM</span></code> macro instead of <code class="code-voice"><span>NS<wbr/>_ENUM</span></code>. The Swift compiler recognizes this and doesn’t require switches to have a default case.</p><p>In Swift 4 and 4.2 modes, you can still use <code class="code-voice"><span>@unknown default</span></code>. If you omit it and an unknown value is passed into the switch, the program traps at runtime, which is the same behavior as Swift 4.2 in Xcode 10.1. (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0192-non-exhaustive-enums.md">SE-0192</a>) (39367045) </p></li><li><p>Default arguments are now printed in SourceKit-generated interfaces for Swift modules, instead of just using a placeholder default. (18675831)</p></li><li><p><code class="code-voice"><span>unowned</span></code> and <code class="code-voice"><span>unowned(unsafe)</span></code> variables now support <a class="symbol-name" href="/documentation/swift/optional?language=objc"><code><span>Optional</span></code></a> types. (47326769)</p></li></ul><p></p></div><h4 id="3136859">Known Issues</h4><div><ul><li><p>A key path literal that refers to a property in a protocol extension from another module may cause the compiler to crash. (48001932)</p><p><strong>Workaround:</strong> Avoid crossing the module boundary by defining a wrapper property in the local module, and reference the wrapper in the key path instead.</p></li><li><p>The Swift compiler may crash during a build when the Thread Sanitizer is enabled. (48719789)</p><p><strong>Workaround:</strong> Disable Thread Sanitizer in the Scheme Editor’s Diagnostics tab.</p></li><li><p>Linking against a static Swift library might create a binary with missing type metadata because the object files that define the metadata inside the static archive are mistakenly considered unused. (47598583)</p><p>This can manifest as a Swift runtime error with a message such as: “failed to demangle superclass of <code class="code-voice"><span>My<wbr/>Class</span></code> from mangled name ‘<em>&lt;mangled name&gt;</em>’”.</p><p><strong>Workaround:</strong> If you can rebuild the static library, try building it with whole module optimization enabled. Otherwise, add <code class="code-voice"><span>-all<wbr/>_load</span></code> to the linker flags in the client binary to ensure all object files are linked into it.</p></li><li><p>The expression <code class="code-voice"><span>self<wbr/>.init()</span></code> is erroneously allowed in designated initializers in subclasses of <a class="symbol-name" href="/documentation/appkit/nsview?language=objc"><code><span>NSView</span></code></a> and <a class="symbol-name" href="/documentation/uikit/uiview?language=objc"><code><span>UIView</span></code></a>, even though <code class="code-voice"><span>init()</span></code> is a convenience initializer on <code class="code-voice"><span>NSView</span></code> and <code class="code-voice"><span>UIView</span></code>. Using <code class="code-voice"><span>self<wbr/>.init()</span></code> can result in stored properties being initialized more than once, which leads to memory leaks and other possible issues in your app. (SR-9836) (47734208)</p><p><strong>Workaround:</strong> Use <code class="code-voice"><span>super<wbr/>.init(frame:)</span></code> instead.</p></li></ul></div><h4 id="3136868">Resolved Issues</h4><div><ul><li><p>Swift command line projects won’t run on macOS 10.14.3 and earlier unless you install the Swift 5 Runtime Support for Command Line Tools package. Without that package, Swift command line projects crash on launch with “dyld: Library not loaded” errors. (46824656)</p></li><li><p>Linking a Swift program directly from the command line with the <code class="code-voice"><span>swiftc</span></code> compiler now results in output that runs without issue on macOS Mojave 10.14.4. (43616773)</p></li><li><p>Compile time regressions in Xcode 10.2, as compared to Xcode 10.1, are now resolved in most cases. Some projects may continue to experience small regressions; file bug reports for cases you encounter. (47304789)</p></li><li><p>The Swift compiler completes the “Merge swiftmodule” build step even if members of the <a class="symbol-name" href="/documentation/uikit/uiaccessibility?language=objc"><code><span>UIAccessibility</span></code></a> structure or other types that contain <code class="code-voice"><span>NS<wbr/>_ERROR<wbr/>_ENUM</span></code> nested types are referenced. (47152185)</p></li><li><p>Single-element labeled tuple expressions, like <code class="code-voice"><span>(label: 123)</span></code>, were allowed in some contexts but often resulted in surprising, inconsistent behavior that varied across compiler releases. They’re now completely disallowed.</p><p>Single-element labeled <em>types</em>, like <code class="code-voice"><span>var x: (label: Int)</span></code><em>,</em> were prohibited starting in Swift 3. (<a href="https://bugs.swift.org/browse/SR-8109">SR-8109</a>) (41474370)</p></li><li><p>If a key path literal refers to a property that’s defined in Objective-C or that’s defined with the <code class="code-voice"><span>@objc</span></code> and <code class="code-voice"><span>dynamic</span></code> modifiers in Swift, it now compiles successfully and generates the correct hash value or equality comparison with other key paths at runtime. (47184763)</p></li><li><p>Extension binding now supports extensions of nested types which themselves are defined inside extensions. Previously this could fail with some declaration orders, producing spurious “undeclared type” errors. (<a href="https://bugs.swift.org/browse/SR-631">SR-631</a>) (20337822)</p></li><li><p>In Swift 5 mode, inferred associated types are no longer exposed publicly when a public type conforms to a non-public protocol. Instead, they get the minimum possible access to be visible from both the protocol and the conforming type. For source compatibility, Swift 4 and 4.2 modes continue to expose inferred associated types as publicly as the enclosing type unless the inferred associated type is itself less public than the conforming type. (46143405)</p></li><li><p>In Swift 5 mode, a class method that returns <code class="code-voice"><span>Self</span></code> can no longer be overridden with a method that returns a concrete class type that isn’t <code class="code-voice"><span>final</span></code>. Such code isn’t type safe and needs to be updated. (<a href="https://bugs.swift.org/browse/SR-695">SR-695</a>) (47322892)</p><p>For example: </p></li></ul><figure id="3136866"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>class Base { 
    class func factory() -&gt; Self { /*...*/ }
} 

class Derived: Base {
    class override func factory() -&gt; Derived { /*...*/ } 
} 
</code></pre></div></div></figure><p></p><ul><li><p>In Swift 5 mode, attempting to declare a static property with the same name as a nested type is now always correctly rejected. Previously, it was possible to perform such a redeclaration in an extension of a generic type. (<a href="https://bugs.swift.org/browse/SR-7251">SR-7251</a>) (47325738)</p><p>For example:</p></li></ul><figure id="3136863"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>struct Foo&lt;T&gt; {}
extension Foo { 
    struct i {}

    // Error: Invalid redeclaration of &#x27;i&#x27;.
    // (Prior to Swift 5, this didn’t produce an error.) 
    static var i: Int { return 0 }
}
</code></pre></div></div></figure><ul><li><p>Designated initializers with variadic parameters are now correctly inherited in subclasses. (16331406)</p></li><li><p>In Swift 5 mode, <code class="code-voice"><span>@autoclosure</span></code> parameters can no longer be forwarded to <code class="code-voice"><span>@autoclosure</span></code> arguments in another function call. Instead, you must explicitly call the function value with parentheses: <code class="code-voice"><span>()</span></code>; the call itself is wrapped inside an implicit closure, guaranteeing the same behavior as in Swift 4 mode. (<a href="https://bugs.swift.org/browse/SR-5719">SR-5719</a>) (37321597)</p><p>For example: </p></li></ul><figure id="3136864"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>func foo(_ fn: @autoclosure () -&gt; Int) {}
func bar(_ fn: @autoclosure () -&gt; Int) {
    foo(fn) // Incorrect, `fn` can’t be forwarded and has to be called.
    foo(fn()) // OK
} 
</code></pre></div></div></figure><p></p><ul><li><p>Complex recursive type definitions involving classes and generics that would previously cause deadlocks at runtime are now fully supported. (38890298) </p></li><li><p>In Swift 5 mode, when casting an optional value to a generic placeholder type, the compiler will be more conservative with the unwrapping of the value. The result of such a cast now more closely matches the result you would get in a nongeneric context. (<a href="https://bugs.swift.org/browse/SR-4248">SR-4248</a>) (47326318)</p><p>For example: </p></li></ul><figure id="3136869"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>func forceCast&lt;U&gt;(_ value: Any?, to type: U.Type) -&gt; U {
    return value as! U 
} 

let value: Any? = 42
print(forceCast(value, to: Any.self))
// Prints &quot;Optional(42)&quot;
// (Prior to Swift 5, this would print &quot;42&quot;.)

print(value as! Any)
// Prints &quot;Optional(42)&quot;
</code></pre></div></div></figure><p></p><ul><li><p>Protocols can now constrain their conforming types to those that subclass a given class. Two equivalent forms are supported:</p></li></ul><figure id="3136867"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>protocol MyView: UIView { /*...*/ }
protocol MyView where Self: UIView { /*...*/ } 
</code></pre></div></div></figure><p> Swift 4.2 accepted the second form, but it wasn’t fully implemented and could sometimes crash at compile time or runtime. (<a href="https://bugs.swift.org/browse/SR-5581">SR-5581</a>) (38077232) </p><ul><li><p>In Swift 5 mode, when setting a property from within its own <code class="code-voice"><span>did<wbr/>Set</span></code> or <code class="code-voice"><span>will<wbr/>Set</span></code> observer, the observer will now only avoid being recursively called if the property is set on <code class="code-voice"><span>self</span></code> (either implicitly or explicitly). (<a href="https://bugs.swift.org/browse/SR-419">SR-419</a>) (32334826)</p><p>For example:</p></li></ul><figure id="3136865"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>class Node {
    var children = [Node]() 
    var depth: Int = 0 {
        didSet { 
            if depth &lt; 0 {
                // Won’t recursively call didSet, because this is setting depth on self. 
                depth = 0
            } 

            // Will call didSet for each of the children,
            // as this isn’t setting the property on self.
            // (Prior to Swift 5, this didn’t trigger property
            // observers to be called again.)
            for child in children { 
                child.depth = depth + 1
            } 
        }
    }
}
</code></pre></div></div></figure><ul><li><p><code class="code-voice"><span>#source<wbr/>Location</span></code> is now honored when diagnostics are emitted in Xcode. That is, if your source uses <code class="code-voice"><span>#source<wbr/>Location</span></code> to map lines in a generated file back to the original source, diagnostics now show up in the original source file rather than in the generated file. (43647151)</p></li><li><p>Using a generic type alias as the parameter or return type of an <code class="code-voice"><span>@objc</span></code> method no longer results in the generation of an invalid Objective-C header. (<a href="https://bugs.swift.org/browse/SR-8697">SR-8697</a>) (43347303)</p></li></ul><p></p></div></div></section></div></div></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/documentation>Documentation</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/safari/">Safari and Web</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/business/">Business</a></li>
                <li><a href="/education/">Education</a></li>
                <li><a href="/wwdc/">WWDC</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
                <li><a href="/design/resources/">Resources</a></li>
                <li><a href="/videos/design/">Videos</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/internationalization/">Internationalization</a></li>
                <li><a href="/accessories/">Accessories</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="/documentation/">Documentation</a></li>
                <li><a href="/videos/">Videos</a></li>
                <li><a href="/download/">Downloads</a></li>
              </ul>
            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/programs/">Developer Program</a></li>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="/macos/distribution/">Mac Software</a></li>
                <li><a href="/business/distribute/">Apps for Business</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
                <li><a href="/softwarelicensing/">Trademark Licensing</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
                <li><a href="/contact/">Contact Us</a></li>
              </ul>
              <h3><a href="/account/">Account</a></h3>
              <ul>
                <li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
                <li><a href="https://appstoreconnect.apple.com/">App Store Connect</a></li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2019 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><script id="bootstrap-data" type="application/json">{"id":3136850,"abstract":"<div><p>Update your code to use new language features and test your apps against changes.<\/p><\/div>","availability":[{"introduced":"10.2","current":"10.2","platform":"Xcode"}],"discussion":"<div><p>Read these notes when you’re writing Swift apps in Xcode 10.2.<\/p><\/div><h3 id=\"3161764\">General<\/h3><div><p><\/p><\/div><h4 id=\"3161758\">Swift 5 Runtime Support for Command Line Tools Package<\/h4><div><ul><li><p>Starting with Xcode 10.2, Swift command line tools require the Swift libraries in macOS. They’re included by default starting with macOS Mojave 10.14.4. In macOS Mojave 10.14.3 and earlier, there’s an optional package to provide these runtime support libraries for Swift command line tools that you can download from <a href=\"https:\/\/developer.apple.com\/download\/more\/\">More Downloads for Apple Developers<\/a>. If you installed the beta version of this package, replace it with the release version. This package is only needed for Swift command line tools, not for apps with graphical user interfaces.<\/p><\/li><\/ul><p><\/p><\/div><h3 id=\"3138038\">App Thinning<\/h3><div><p><\/p><\/div><h4 id=\"3138042\">New Features<\/h4><div><ul><li><p>Swift apps no longer include dynamically linked libraries for the Swift standard library and Swift SDK overlays in build variants for devices running iOS 12.2, watchOS 5.2, and tvOS 12.2. As a result, Swift apps can be smaller when they’re shipped in the App Store, deployed for testing using TestFlight, or thinned in an app archive for local development distribution.<\/p><p>To see the difference in file sizes between an app that’s thinned for iOS 12.2 and an app that’s thinned for iOS 12.1 or earlier, set your app’s deployment target to iOS 12.1 or earlier, then create an archive of your app with the scheme set to Generic iOS Device. After building the archive, select Distribute App from the Archives organizer, then select Development distribution. Be sure to select a specific device—such as iPhone XS—in the App Thinning pull-down menu. When the distribution process completes, open the App Thinning Size Report in the newly created folder. The variant for iOS 12.2 will be smaller than the variant for iOS 12.1 and earlier. The exact size difference depends on the number of system frameworks your app uses.<\/p><p>For information about app thinning, see <a href=\"https:\/\/help.apple.com\/xcode\/mac\/current\/#\/devbbdc5ce4f\">What is app thinning?<\/a> in <a href=\"https:\/\/help.apple.com\/xcode\/mac\/current\/\">Xcode Help<\/a>. For information about app file sizes, see <a href=\"https:\/\/help.apple.com\/app-store-connect\/#\/dev3b56ce97c\">View builds and file sizes<\/a> in <a href=\"https:\/\/help.apple.com\/app-store-connect\/\">App Store Connect Help<\/a>. <\/p><\/li><\/ul><p><\/p><\/div><h3 id=\"3136851\">Swift Language<\/h3><div><p><\/p><\/div><h4 id=\"3136844\">New Features<\/h4><div><ul><li><p>String literals can now be expressed using enhanced delimiters. A string literal with one or more number signs (<code class=\"code-voice\"><span>#<\/span><\/code>) before the opening quote treats backslashes and double-quote characters as literal unless they’re followed by the same number of number signs. Use enhanced delimiters to avoid cluttering string literals that contain many double-quote or backslash characters with extra escapes (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0200-raw-string-escaping.md\">SE-0200<\/a>) (47725014):<\/p><\/li><\/ul><figure id=\"3144587\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>print(#&quot;&lt;a href=&quot;\\#(url)&quot; title=&quot;Apple Developer&quot;&gt;&quot;#)\n\/\/ Equivalent to:\nprint(&quot;&lt;a href=\\&quot;\\(url)\\&quot; title=\\&quot;Apple Developer\\&quot;&gt;&quot;)\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><ul><li><p>If you declare a type that has the same name as a type in the standard library, your type now shadows the type from the standard library.  (46767892)<\/p><p>For example, if you declare a <code class=\"code-voice\"><span>Result<\/span><\/code> type in a module named <code class=\"code-voice\"><span>Foo<\/span><\/code>:<\/p><\/li><\/ul><figure id=\"3141457\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>\/\/ Module `Foo`.\npublic enum Result&lt;T&gt; {\n    case value(T)\n    case error(Error)\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>Unqualified references to <code class=\"code-voice\"><span>Result<\/span><\/code> in any of your code that imports the <code class=\"code-voice\"><span>Foo<\/span><\/code> module will resolve to <code class=\"code-voice\"><span>Foo<wbr\/>.Result<\/span><\/code>:<\/p><figure id=\"3141455\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>import Foo\nfunc doSomething() -&gt; Result&lt;Int&gt; { \/* … *\/ }\n<\/code><\/pre><\/div><\/div><\/figure><p>To refer to the <a class=\"symbol-name\" href=\"\/documentation\/swift\/result?language=objc\"><code><span>Result<\/span><\/code><\/a> type from the Swift standard library instead, qualify the access with the “<code class=\"code-voice\"><span>Swift.<\/span><\/code>” prefix. For example:<\/p><figure id=\"3141456\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>import Foo\nfunc useStandardLibraryResult() -&gt; Swift.Result&lt;Int, Error&gt; { \/* … *\/ }\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><ul><li><p>The <code class=\"code-voice\"><span>@dynamic<wbr\/>Callable<\/span><\/code> attribute lets you call named types like you call functions using a simple syntactic sugar. The primary use case is dynamic language interoperability. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0216-dynamic-callable.md\">SE-0216<\/a>) (47325423)<\/p><p>For example: <\/p><\/li><\/ul><figure id=\"3136849\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>@dynamicCallable struct ToyCallable {\n    func dynamicallyCall(withArguments: [Int]) {}\n    func dynamicallyCall(withKeywordArguments: KeyValuePairs&lt;String, Int&gt;) {}\n}\n\nlet x = ToyCallable()\n\nx(1, 2, 3)\n\/\/ Desugars to `x.dynamicallyCall(withArguments: [1, 2, 3])`\n\nx(label: 1, 2)\n\/\/ Desugars to `x.dynamicallyCall(withKeywordArguments: [&quot;label&quot;: 1, &quot;&quot;: 2])`\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><ul><li><p>Key paths now support the identity keypath (<code class=\"code-voice\"><span>\\.self<\/span><\/code>), a <a class=\"symbol-name\" href=\"\/documentation\/swift\/writablekeypath?language=objc\"><code><span>Writable<wbr\/>Key<wbr\/>Path<\/span><\/code><\/a> that refers to its entire input value (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0227-identity-keypath.md\">SE-0227<\/a>) (40538312):<\/p><\/li><\/ul><figure id=\"3136847\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>let id = \\Int.self\nvar x = 2\nprint(x[keyPath: id]) \/\/ Prints &quot;2&quot;\nx[keyPath: id] = 3\nprint(x[keyPath: id]) \/\/ Prints &quot;3&quot;\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><ul><li><p>Prior to Swift 5, you could write an enumeration case that took variadic arguments:  <\/p><\/li><\/ul><figure id=\"3136848\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>enum X {\n    case foo(bar: Int...) \n}\n func baz() -&gt; X {\n    return .foo(bar: 0, 1, 2, 3) \n} \n<\/code><\/pre><\/div><\/div><\/figure><p> This wasn’t intentionally supported and now generates an error. (46821582)<\/p><p>Instead, change the enumeration case to take an array and explicitly pass an array in: <\/p><figure id=\"3136843\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>enum X {\n    case foo(bar: [Int]) \n} \n func baz() -&gt; X {\n    return .foo(bar: [0, 1, 2, 3]) \n} \n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><ul><li><p>In Swift 5 mode, <code class=\"code-voice\"><span>try?<\/span><\/code> with an expression of an <a class=\"symbol-name\" href=\"\/documentation\/swift\/optional?language=objc\"><code><span>Optional<\/span><\/code><\/a> type flattens the resulting optional, instead of returning a nested optional. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0230-flatten-optional-try.md\">SE-0230<\/a>) (47313584)<\/p><\/li><li><p>If a type <code class=\"code-voice\"><span>T<\/span><\/code> conforms to one of the protocols in <a href=\"\/documentation\/swift\/swift_standard_library\/initialization_with_literals?language=objc\">Initialization with Literals<\/a>—such as <a class=\"symbol-name\" href=\"\/documentation\/swift\/expressiblebyintegerliteral?language=objc\"><code><span>Expressible<wbr\/>By<wbr\/>Integer<wbr\/>Literal<\/span><\/code><\/a>—and <em>literal<\/em> is a literal expression, then <code class=\"code-voice\"><span>T(<\/span><\/code><em>literal<\/em><code class=\"code-voice\"><span>)<\/span><\/code> creates a literal of type <code class=\"code-voice\"><span>T<\/span><\/code> using the corresponding protocol, rather than calling an initializer of <code class=\"code-voice\"><span>T<\/span><\/code> with a value of the protocol’s default literal type.<\/p><p>For example, expressions like <code class=\"code-voice\"><span>UInt64(0xffff<wbr\/>_ffff<wbr\/>_ffff<wbr\/>_ffff)<\/span><\/code> are now valid, where previously they would overflow the default integer literal type of <a class=\"symbol-name\" href=\"\/documentation\/swift\/int?language=objc\"><code><span>Int<\/span><\/code><\/a>. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0213-literal-init-via-coercion.md\">SE-0213<\/a>) (17088188)<\/p><\/li><li><p>String interpolation has improved performance, clarity, and efficiency. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0228-fix-expressiblebystringinterpolation.md\">SE-0228<\/a>) (43621912)<\/p><p>The older <code class=\"code-voice\"><span>_Expressible<wbr\/>By<wbr\/>String<wbr\/>Interpolation<\/span><\/code> protocol is removed; if you have code that makes use of this protocol, you need to update it for the new design. You can use <code class=\"code-voice\"><span>#if<\/span><\/code> to conditionalize code between Swift 4.2 and Swift 5. For example:<\/p><\/li><\/ul><figure id=\"3136845\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>#if compiler(&lt;5)\nextension MyType: _ExpressibleByStringInterpolation { \/*...*\/ }\n#else\nextension MyType: ExpressibleByStringInterpolation { \/*...*\/ }\n#endif \n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><\/div><h3 id=\"3136871\">Swift Standard Library<\/h3><div><p><\/p><\/div><h4 id=\"3136870\">New Features<\/h4><div><ul><li><p>The standard library now includes the <a class=\"symbol-name\" href=\"\/documentation\/swift\/result?language=objc\"><code><span>Result<\/span><\/code><\/a> enumeration with <a class=\"symbol-name\" href=\"\/documentation\/swift\/result\/success?language=objc\"><code><span>Result<wbr\/>.success(_:)<\/span><\/code><\/a> and <a class=\"symbol-name\" href=\"\/documentation\/swift\/result\/failure?language=objc\"><code><span>Result<wbr\/>.failure(_:)<\/span><\/code><\/a> cases. Use <code class=\"code-voice\"><span>Result<\/span><\/code> to manually propagate and handle errors in situations where <code class=\"code-voice\"><span>do-catch<\/span><\/code> statements and the <code class=\"code-voice\"><span>try<\/span><\/code> expression can’t be used, such as when you’re using asynchronous APIs that can fail.<\/p><p>As part of this addition, the <a class=\"symbol-name\" href=\"\/documentation\/swift\/error?language=objc\"><code><span>Error<\/span><\/code><\/a> protocol now conforms to itself, which makes working with errors in a generic context easier. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0235-add-result.md\">SE-0235<\/a>) (21200405)<\/p><\/li><li><p><a class=\"symbol-name\" href=\"\/documentation\/swift\/simd?language=objc\"><code><span>SIMD<\/span><\/code><\/a> types and basic operators are now defined in the standard library. The types provided by the <a href=\"\/documentation\/simd?language=objc\">simd<\/a> framework, like <a class=\"symbol-name\" href=\"\/documentation\/simd\/float2?language=objc\"><code><span>float2<\/span><\/code><\/a> and <a class=\"symbol-name\" href=\"\/documentation\/simd\/float3?language=objc\"><code><span>float3<\/span><\/code><\/a>, are now type aliases of the new standard library types.<\/p><p>SIMD types are generic over the scalar element type. For example, the old <a class=\"symbol-name\" href=\"\/documentation\/simd\/float3?language=objc\"><code><span>float3<\/span><\/code><\/a> type is a type alias of <code class=\"code-voice\"><span>SIMD3&lt;Float&gt;<\/span><\/code>. Any type that conforms to the <a class=\"symbol-name\" href=\"\/documentation\/swift\/simdscalar?language=objc\"><code><span>SIMDScalar<\/span><\/code><\/a> protocol can be used as a scalar type for SIMD vectors, but effective vectorization depends on choosing a good data layout and having efficient subscript operations for the associated <a class=\"symbol-name\" href=\"\/documentation\/swift\/simdstorage?language=objc\"><code><span>SIMDStorage<\/span><\/code><\/a> types.<\/p><p>Most existing code using <code class=\"code-voice\"><span>simd<\/span><\/code> types will continue to work with the new generic SIMD types, but there are a few changes to note.<\/p><p>The new types add some new conformances; SIMD vectors are now <a class=\"symbol-name\" href=\"\/documentation\/swift\/hashable?language=objc\"><code><span>Hashable<\/span><\/code><\/a>, <a class=\"symbol-name\" href=\"\/documentation\/swift\/equatable?language=objc\"><code><span>Equatable<\/span><\/code><\/a>, and <a class=\"symbol-name\" href=\"\/documentation\/swift\/codable?language=objc\"><code><span>Codable<\/span><\/code><\/a>. This may allow you to delete some existing extensions that provide these conformances in your own code.<\/p><p>The set of operators that are overloaded to provide vector-scalar arithmetic is greatly expanded. This makes it easier to write some things, but in some cases introduces ambiguity to the typechecker and may make it necessary to break apart some expressions or annotate with explicit types.<\/p><p>Because the types are now generic rather than concrete, if you have defined your own protocols over the <code class=\"code-voice\"><span>simd<\/span><\/code> framework types, it may be necessary to refactor the conformances because a Swift generic type can’t have multiple conditional conformances to a protocol. This situation is relatively rare, but what you need to do in general is refactor code that looks like this:<\/p><\/li><\/ul><figure id=\"3141601\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>protocol MyVectorProtocol { \/* ... *\/ }\nextension float2: MyVectorProtocol { \/* ... *\/ }\nextension double2: MyVectorProtocol { \/* ... *\/ }\n<\/code><\/pre><\/div><\/div><\/figure><p>To use the following structure instead:<\/p><figure id=\"3141605\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>protocol MySIMDScalarProtocol: SIMDScalar { \/* ... *\/ }\nextension SIMD2 where Scalar: MySIMDScalarProtocol { \/* ... *\/ }\n\/\/ Or even:\nprotocol MySIMDScalarProtocol: SIMDScalar { \/* ... *\/ }\nextension SIMD where Scalar: MySIMDScalarProtocol { \/* ... *\/ }\n<\/code><\/pre><\/div><\/div><\/figure><p>This change will frequently allow you to remove many redundant implementations, but it requires that you define any necessary implementation hooks that reference the concrete functions from the C headers on Darwin systems on the scalar type. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0229-simd.md\">SE-0229<\/a>) (17045503)<\/p><ul><li><p><a class=\"symbol-name\" href=\"\/documentation\/swift\/set?language=objc\"><code><span>Set<\/span><\/code><\/a> and <a class=\"symbol-name\" href=\"\/documentation\/swift\/dictionary?language=objc\"><code><span>Dictionary<\/span><\/code><\/a> now use a different hash seed for each newly created instance. As a consequence, the order of elements in equal sets and dictionaries is different much more often than in previous versions:<\/p><\/li><\/ul><figure id=\"3141602\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>let a: Set&lt;Int&gt; = [1, 2, 3, 4, 5]\nlet b: Set&lt;Int&gt; = [1, 2, 3, 4, 5]\na == b  \/\/ true\nprint(a) \/\/ [1, 4, 3, 2, 5]\nprint(b) \/\/ [4, 2, 5, 1, 3]\n<\/code><\/pre><\/div><\/div><\/figure><p>Existing code that incorrectly assumes that two unrelated but equal sets or dictionaries would contain elements in the same order produces incorrect results more often in Swift 5. Although element ordering isn’t stable across distinct <code class=\"code-voice\"><span>Set<\/span><\/code> or <code class=\"code-voice\"><span>Dictionary<\/span><\/code> instances, the order doesn’t vary between multiple iterations over the same instance. Beyond emphasizing that these collections don’t guarantee consistent element ordering, this change also fixes a number of cases where bulk operations—such as <a class=\"symbol-name\" href=\"\/documentation\/swift\/set\/3128858-union?language=objc\"><code><span>union(_:)<\/span><\/code><\/a>—exhibited quadratic performance. (44760778)<\/p><ul><li><p>To help prevent inconsistent hashing for Cocoa objects, the <a class=\"symbol-name\" href=\"\/documentation\/objectivec\/nsobject\/1418615-hashvalue?language=objc\"><code><span>hash<wbr\/>Value<\/span><\/code><\/a> property on <a class=\"symbol-name\" href=\"\/documentation\/objectivec\/nsobject?language=objc\"><code><span>NSObject<\/span><\/code><\/a> is no longer overridable. Overrides of <code class=\"code-voice\"><span>hash<wbr\/>Value<\/span><\/code> were deprecated in Swift 4.2. To customize hashing in <code class=\"code-voice\"><span>NSObject<\/span><\/code> subclasses, override the <a class=\"symbol-name\" href=\"\/documentation\/objectivec\/1418956-nsobject\/1418859-hash?language=objc\"><code><span>hash<\/span><\/code><\/a> property. The following example shows a sample implementation:<\/p><\/li><\/ul><figure id=\"3141604\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>class Person: NSObject {\n    let name: String\n\n    init(name: String) {\n        self.name = name\n        super.init()\n    }\n\n    override func isEqual(_ other: Any?) -&gt; Bool {\n        guard let other = other as? Person else { return false }\n        return other.name == self.name\n    }\n\n    override var hash: Int {\n        var hasher = Hasher()\n        hasher.combine(name)\n        return hasher.finalize()\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>Hashing and equality go hand in hand. If you override <code class=\"code-voice\"><span>hash<\/span><\/code>, you also need to override <a class=\"symbol-name\" href=\"\/documentation\/objectivec\/1418956-nsobject\/1418795-isequal?language=objc\"><code><span>is<wbr\/>Equal:<\/span><\/code><\/a>, and vice versa. (42623458)<\/p><ul><li><p>The <a class=\"symbol-name\" href=\"\/documentation\/swift\/dictionaryliteral?language=objc\"><code><span>Dictionary<wbr\/>Literal<\/span><\/code><\/a> type is renamed <a class=\"symbol-name\" href=\"\/documentation\/swift\/keyvaluepairs?language=objc\"><code><span>Key<wbr\/>Value<wbr\/>Pairs<\/span><\/code><\/a>. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0214-DictionaryLiteral.md\">SE-0214<\/a>) (23435865)<\/p><\/li><li><p>Swift strings bridged into Objective-C code may now return a non-<code class=\"code-voice\"><span>nil<\/span><\/code> value from <a class=\"symbol-name\" href=\"\/documentation\/corefoundation\/1542133-cfstringgetcstringptr?language=objc\"><code><span>CFString<wbr\/>Get<wbr\/>CString<wbr\/>Ptr<\/span><\/code><\/a> when appropriate, and the pointer returned from the <code class=\"code-voice\"><span>UTF8String<\/span><\/code> method is tied to the string’s lifetime rather than the innermost autorelease pool. Correct programs shouldn’t have any problems and may see significant speed-ups. However, it may cause previously untested code to run, which could expose latent bugs; for example, if there’s a check for a non-<code class=\"code-voice\"><span>nil<\/span><\/code> value, the branch may never have been taken prior to Swift 5. (26236614)<\/p><\/li><li><p>The <a class=\"symbol-name\" href=\"\/documentation\/swift\/sequence?language=objc\"><code><span>Sequence<\/span><\/code><\/a> protocol no longer has a <code class=\"code-voice\"><span>Sub<wbr\/>Sequence<\/span><\/code> associated type. Methods on <code class=\"code-voice\"><span>Sequence<\/span><\/code> that previously returned <code class=\"code-voice\"><span>Sub<wbr\/>Sequence<\/span><\/code> now return concrete types. For example, <a class=\"symbol-name\" href=\"\/documentation\/swift\/sequence\/3128822-suffix?language=objc\"><code><span>suffix(_:)<\/span><\/code><\/a> now returns an <a class=\"symbol-name\" href=\"\/documentation\/swift\/array?language=objc\"><code><span>Array<\/span><\/code><\/a>.  (45761817)<\/p><p>Extensions on <code class=\"code-voice\"><span>Sequence<\/span><\/code> that use <code class=\"code-voice\"><span>Sub<wbr\/>Sequence<\/span><\/code> should be amended to either similarly use a concrete type, or be amended to be extensions on <a class=\"symbol-name\" href=\"\/documentation\/swift\/collection?language=objc\"><code><span>Collection<\/span><\/code><\/a> instead, where <a class=\"symbol-name\" href=\"\/documentation\/swift\/collection\/1641276-subsequence?language=objc\"><code><span>Sub<wbr\/>Sequence<\/span><\/code><\/a> remains available.<\/p><p>For example:<\/p><\/li><\/ul><figure id=\"3136874\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>extension Sequence {\n    func dropTwo() -&gt; SubSequence {\n        return self.dropFirst(2)\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>Becomes:<\/p><figure id=\"3136873\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>extension Sequence {\n    func dropTwo() -&gt; DropFirstSequence&lt;Self&gt; { \n        return self.dropFirst(2)\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>Or:<\/p><figure id=\"3136872\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>extension Collection {\n    func dropTwo() -&gt; SubSequence {\n        return self.dropFirst(2)\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><ul><li><p>The <a class=\"symbol-name\" href=\"\/documentation\/swift\/string?language=objc\"><code><span>String<\/span><\/code><\/a> structure’s native encoding switched from UTF-16 to UTF-8, which may improve the relative performance of <a class=\"symbol-name\" href=\"\/documentation\/swift\/string\/utf8view?language=objc\"><code><span>String<wbr\/>.UTF8View<\/span><\/code><\/a> compared to <a class=\"symbol-name\" href=\"\/documentation\/swift\/string\/utf16view?language=objc\"><code><span>String<wbr\/>.UTF16View<\/span><\/code><\/a>. Consider re-evaluating any code specifically tuned to use <code class=\"code-voice\"><span>String<wbr\/>.UTF16View<\/span><\/code> for performance. (42339222)<\/p><\/li><\/ul><\/div><h4 id=\"3171765\">Known Issues<\/h4><div><ul><li><p>The <code class=\"code-voice\"><span>count(where:)<\/span><\/code> method on the <a class=\"symbol-name\" href=\"\/documentation\/swift\/sequence?language=objc\"><code><span>Sequence<\/span><\/code><\/a> protocol available in beta versions of Xcode 10.2 is now removed. (47549309)<\/p><p><strong>Workaround:<\/strong> Use <a class=\"symbol-name\" href=\"\/documentation\/swift\/anycollection\/2906169-reduce?language=objc\"><code><span>reduce(_:<wbr\/>_:)<\/span><\/code><\/a> to count occurrences matching a predicate efficiently:<\/p><\/li><\/ul><figure id=\"3171766\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>let occurrences = sequence.reduce(0) { predicate($1) ? $0 + 1 : $0 }\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><p><\/p><\/div><h4 id=\"3161766\">Resolved Issues<\/h4><div><ul><li><p>Setting the <a class=\"symbol-name\" href=\"\/documentation\/swift\/string\/1539703-utf8?language=objc\"><code><span>utf8<\/span><\/code><\/a> property on a string now works as expected. (47864538)<\/p><\/li><li><p>Passing a null <a class=\"symbol-name\" href=\"\/documentation\/swift\/unsafebufferpointer?language=objc\"><code><span>Unsafe<wbr\/>Buffer<wbr\/>Pointer<\/span><\/code><\/a><code class=\"code-voice\"><span>&lt;UInt8&gt;<\/span><\/code> to the <a class=\"symbol-name\" href=\"\/documentation\/swift\/string?language=objc\"><code><span>String<\/span><\/code><\/a> structure’s <a class=\"symbol-name\" href=\"\/documentation\/swift\/string\/2907004-init?language=objc\"><code><span>init(decoding:<wbr\/>as:)<\/span><\/code><\/a> initializer now returns an empty string as expected. (47864610)<\/p><\/li><\/ul><\/div><h3 id=\"3136858\">Swift Package Manager<\/h3><div><p><\/p><\/div><h4 id=\"3136853\">New Features<\/h4><div><ul><li><p>Targets can now declare some commonly used, target-specific build settings when using the Swift 5 <code class=\"code-voice\"><span>Package<wbr\/>.swift<\/span><\/code> <code class=\"code-voice\"><span>tools-version<\/span><\/code>. The new settings can also be conditionalized based on platform and build configuration. The included build settings support Swift- and C-language defines, C language header search paths, linked libraries, and linked frameworks. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0238-package-manager-build-settings.md\">SE-0238<\/a>) (23270646)<\/p><\/li><li><p>Packages can now customize the minimum deployment target setting for Apple platforms when using the Swift 5 <code class=\"code-voice\"><span>Package<wbr\/>.swift<\/span><\/code> <code class=\"code-voice\"><span>tools-version<\/span><\/code>. Building a package emits an error if any of the package dependencies of the package specify a minimum deployment target greater than the package’s own minimum deployment target. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0236-package-manager-platform-deployment-settings.md\">SE-0236<\/a>) (28253354)<\/p><\/li><li><p>A new dependency mirroring feature allows top-level packages to override dependency URLs. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0219-package-manager-dependency-mirroring.md\">SE-0219<\/a>) (42511642)<\/p><p>Use the following command to set a mirror:  <\/p><\/li><\/ul><figure id=\"3136857\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"other\"><code>$ swift package config set-mirror \\\n--package-url &lt;original URL&gt; --mirror-url &lt;mirror URL&gt;\n<\/code><\/pre><\/div><\/div><\/figure><p> <\/p><ul><li><p>The <code class=\"code-voice\"><span>swift test<\/span><\/code> command can generate code coverage data in a standard format suitable for consumption by other code coverage tools using the flag <code class=\"code-voice\"><span>--enable-code-coverage<\/span><\/code>. The generated code coverage data is available inside <em>&lt;build-dir&gt;<\/em><code class=\"code-voice\"><span>\/<\/span><\/code><em>&lt;configuration&gt;<\/em><code class=\"code-voice\"><span>\/codecov<\/span><\/code>. (44567442) <\/p><\/li><li><p>Swift 5 no longer supports the Swift 3 <code class=\"code-voice\"><span>Package<wbr\/>.swift<\/span><\/code> <code class=\"code-voice\"><span>tools-version<\/span><\/code>. Packages still on the Swift 3 <code class=\"code-voice\"><span>Package<wbr\/>.swift<\/span><\/code> <code class=\"code-voice\"><span>tools-version<\/span><\/code> should update to a newer <code class=\"code-voice\"><span>tools-version<\/span><\/code>. (41974124) <\/p><\/li><li><p>Package manager operations for larger packages are now significantly faster. (35596212) <\/p><\/li><li><p>The Swift Package Manager has a new <code class=\"code-voice\"><span>--disable-automatic-resolution<\/span><\/code> flag that forces the package resolution to fail when the <code class=\"code-voice\"><span>Package<wbr\/>.resolved<\/span><\/code> entries are no longer compatible with the dependency versions specified in the <code class=\"code-voice\"><span>Package<wbr\/>.swift<\/span><\/code> manifest file. This feature can be useful for a continuous integration system to check if a package’s <code class=\"code-voice\"><span>Package<wbr\/>.resolved<\/span><\/code> is out of date. (45822895)<\/p><\/li><li><p>The <code class=\"code-voice\"><span>swift run<\/span><\/code> command has a new <code class=\"code-voice\"><span>--repl<\/span><\/code> option that launches the Swift REPL with support for importing library targets of a package. This allows you to easily experiment with API from a package target without needing to build an executable that calls that API. (44889181) <\/p><\/li><li><p>For more information about using the Swift Package Manager, visit <a href=\"https:\/\/swift.org\/getting-started\/#using-the-package-manager\">Using the Package Manager<\/a> on <a href=\"https:\/\/swift.org\">swift.org<\/a>.<\/p><\/li><\/ul><p><\/p><\/div><h3 id=\"3136852\">Swift Compiler<\/h3><div><p><\/p><\/div><h4 id=\"3136855\">New Features<\/h4><div><ul><li><p>To reduce the size taken up by Swift metadata, convenience initializers defined in Swift now only allocate an object ahead of time if they’re calling a designated initializer defined in Objective-C. In most cases, this has no effect on your app, but if your convenience initializer is called from Objective-C and doesn’t in turn delegate via <code class=\"code-voice\"><span>self<wbr\/>.init<\/span><\/code> to an initializer exposed to Objective-C, the initial allocation from <a class=\"symbol-name\" href=\"\/documentation\/objectivec\/nsobject\/1571958-alloc?language=objc\"><code><span>alloc<\/span><\/code><\/a> is released without any initializer being called. This can be problematic for users of the initializer that don’t expect any sort of object replacement to happen. One instance of this is with <a class=\"symbol-name\" href=\"\/documentation\/foundation\/nscoding\/1416145-initwithcoder?language=objc\"><code><span>init<wbr\/>With<wbr\/>Coder:<\/span><\/code><\/a>: the implementation of <a class=\"symbol-name\" href=\"\/documentation\/foundation\/nskeyedunarchiver?language=objc\"><code><span>NSKeyed<wbr\/>Unarchiver<\/span><\/code><\/a> may behave incorrectly if it calls into Swift implementations of <code class=\"code-voice\"><span>init<wbr\/>With<wbr\/>Coder:<\/span><\/code> and the archived object graph contains cycles.<\/p><p>To avoid this, ensure that convenience initializers that don’t support object replacement always delegate to initializers that are also exposed to Objective-C, either because they’re defined in Objective-C, or because they’re marked with <code class=\"code-voice\"><span>@objc<\/span><\/code>, or because they override initializers exposed to Objective-C, or because they satisfy requirements of an <code class=\"code-voice\"><span>@objc<\/span><\/code> protocol. (46823518)<\/p><\/li><li><p>C types with an alignment greater than 16 bytes are no longer available in Swift. The Swift compiler never handled these types correctly. (31411216)<\/p><\/li><li><p>In Swift 5 mode, the type of <code class=\"code-voice\"><span>self<\/span><\/code> in a convenience initializer of a nonfinal class is now the dynamic <code class=\"code-voice\"><span>Self<\/span><\/code> type, and not the concrete class type. (47323459)<\/p><\/li><li><p>Exclusive memory access is now enforced at runtime by default in optimized (<code class=\"code-voice\"><span>-O<\/span><\/code> and <code class=\"code-voice\"><span>-Osize<\/span><\/code>) builds. Programs that violate exclusivity trap at runtime and produce a diagnostic message: “Simultaneous accesses to […], but modification requires exclusive access”. You can disable this using the command line flag <code class=\"code-voice\"><span>-enforce-exclusivity=unchecked<\/span><\/code>, but doing so may result in undefined behavior. Runtime violations of exclusivity typically result from simultaneous access of class properties or global variables—including variables in top-level code or variables captured by escaping closures. For more information, see <a href=\"https:\/\/swift.org\/blog\/swift-5-exclusivity\/\">Swift 5 Exclusivity Enforcement<\/a>. (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-7139\">SR-7139<\/a>) (37830912) <\/p><\/li><li><p>Swift 3 mode has been removed. Supported values for the <code class=\"code-voice\"><span>-swift-version<\/span><\/code> flag are <code class=\"code-voice\"><span>4<\/span><\/code>, <code class=\"code-voice\"><span>4<wbr\/>.2<\/span><\/code>, and <code class=\"code-voice\"><span>5<\/span><\/code>. (43101816) <\/p><\/li><li><p>In Swift 5 mode, switches over enumerations that are declared in Objective-C or that come from system frameworks are required to handle <em>unknown cases<\/em>—cases that might be added in the future, or that may be defined privately in an Objective-C implementation file. Formally, Objective-C allows storing any value in an enumeration as long as it fits in the underlying type. These unknown cases can be handled by using the new <code class=\"code-voice\"><span>@unknown default<\/span><\/code> case, which still provides warnings if any known cases are omitted from the switch. They can also be handled using a normal <code class=\"code-voice\"><span>default<\/span><\/code> case.<\/p><p>If you’ve defined your own enumeration in Objective-C and you don’t need clients to handle unknown cases, you can use the <code class=\"code-voice\"><span>NS<wbr\/>_CLOSED<wbr\/>_ENUM<\/span><\/code> macro instead of <code class=\"code-voice\"><span>NS<wbr\/>_ENUM<\/span><\/code>. The Swift compiler recognizes this and doesn’t require switches to have a default case.<\/p><p>In Swift 4 and 4.2 modes, you can still use <code class=\"code-voice\"><span>@unknown default<\/span><\/code>. If you omit it and an unknown value is passed into the switch, the program traps at runtime, which is the same behavior as Swift 4.2 in Xcode 10.1. (<a href=\"https:\/\/github.com\/apple\/swift-evolution\/blob\/master\/proposals\/0192-non-exhaustive-enums.md\">SE-0192<\/a>) (39367045) <\/p><\/li><li><p>Default arguments are now printed in SourceKit-generated interfaces for Swift modules, instead of just using a placeholder default. (18675831)<\/p><\/li><li><p><code class=\"code-voice\"><span>unowned<\/span><\/code> and <code class=\"code-voice\"><span>unowned(unsafe)<\/span><\/code> variables now support <a class=\"symbol-name\" href=\"\/documentation\/swift\/optional?language=objc\"><code><span>Optional<\/span><\/code><\/a> types. (47326769)<\/p><\/li><\/ul><p><\/p><\/div><h4 id=\"3136859\">Known Issues<\/h4><div><ul><li><p>A key path literal that refers to a property in a protocol extension from another module may cause the compiler to crash. (48001932)<\/p><p><strong>Workaround:<\/strong> Avoid crossing the module boundary by defining a wrapper property in the local module, and reference the wrapper in the key path instead.<\/p><\/li><li><p>The Swift compiler may crash during a build when the Thread Sanitizer is enabled. (48719789)<\/p><p><strong>Workaround:<\/strong> Disable Thread Sanitizer in the Scheme Editor’s Diagnostics tab.<\/p><\/li><li><p>Linking against a static Swift library might create a binary with missing type metadata because the object files that define the metadata inside the static archive are mistakenly considered unused. (47598583)<\/p><p>This can manifest as a Swift runtime error with a message such as: “failed to demangle superclass of <code class=\"code-voice\"><span>My<wbr\/>Class<\/span><\/code> from mangled name ‘<em>&lt;mangled name&gt;<\/em>’”.<\/p><p><strong>Workaround:<\/strong> If you can rebuild the static library, try building it with whole module optimization enabled. Otherwise, add <code class=\"code-voice\"><span>-all<wbr\/>_load<\/span><\/code> to the linker flags in the client binary to ensure all object files are linked into it.<\/p><\/li><li><p>The expression <code class=\"code-voice\"><span>self<wbr\/>.init()<\/span><\/code> is erroneously allowed in designated initializers in subclasses of <a class=\"symbol-name\" href=\"\/documentation\/appkit\/nsview?language=objc\"><code><span>NSView<\/span><\/code><\/a> and <a class=\"symbol-name\" href=\"\/documentation\/uikit\/uiview?language=objc\"><code><span>UIView<\/span><\/code><\/a>, even though <code class=\"code-voice\"><span>init()<\/span><\/code> is a convenience initializer on <code class=\"code-voice\"><span>NSView<\/span><\/code> and <code class=\"code-voice\"><span>UIView<\/span><\/code>. Using <code class=\"code-voice\"><span>self<wbr\/>.init()<\/span><\/code> can result in stored properties being initialized more than once, which leads to memory leaks and other possible issues in your app. (SR-9836) (47734208)<\/p><p><strong>Workaround:<\/strong> Use <code class=\"code-voice\"><span>super<wbr\/>.init(frame:)<\/span><\/code> instead.<\/p><\/li><\/ul><\/div><h4 id=\"3136868\">Resolved Issues<\/h4><div><ul><li><p>Swift command line projects won’t run on macOS 10.14.3 and earlier unless you install the Swift 5 Runtime Support for Command Line Tools package. Without that package, Swift command line projects crash on launch with “dyld: Library not loaded” errors. (46824656)<\/p><\/li><li><p>Linking a Swift program directly from the command line with the <code class=\"code-voice\"><span>swiftc<\/span><\/code> compiler now results in output that runs without issue on macOS Mojave 10.14.4. (43616773)<\/p><\/li><li><p>Compile time regressions in Xcode 10.2, as compared to Xcode 10.1, are now resolved in most cases. Some projects may continue to experience small regressions; file bug reports for cases you encounter. (47304789)<\/p><\/li><li><p>The Swift compiler completes the “Merge swiftmodule” build step even if members of the <a class=\"symbol-name\" href=\"\/documentation\/uikit\/uiaccessibility?language=objc\"><code><span>UIAccessibility<\/span><\/code><\/a> structure or other types that contain <code class=\"code-voice\"><span>NS<wbr\/>_ERROR<wbr\/>_ENUM<\/span><\/code> nested types are referenced. (47152185)<\/p><\/li><li><p>Single-element labeled tuple expressions, like <code class=\"code-voice\"><span>(label: 123)<\/span><\/code>, were allowed in some contexts but often resulted in surprising, inconsistent behavior that varied across compiler releases. They’re now completely disallowed.<\/p><p>Single-element labeled <em>types<\/em>, like <code class=\"code-voice\"><span>var x: (label: Int)<\/span><\/code><em>,<\/em> were prohibited starting in Swift 3. (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-8109\">SR-8109<\/a>) (41474370)<\/p><\/li><li><p>If a key path literal refers to a property that’s defined in Objective-C or that’s defined with the <code class=\"code-voice\"><span>@objc<\/span><\/code> and <code class=\"code-voice\"><span>dynamic<\/span><\/code> modifiers in Swift, it now compiles successfully and generates the correct hash value or equality comparison with other key paths at runtime. (47184763)<\/p><\/li><li><p>Extension binding now supports extensions of nested types which themselves are defined inside extensions. Previously this could fail with some declaration orders, producing spurious “undeclared type” errors. (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-631\">SR-631<\/a>) (20337822)<\/p><\/li><li><p>In Swift 5 mode, inferred associated types are no longer exposed publicly when a public type conforms to a non-public protocol. Instead, they get the minimum possible access to be visible from both the protocol and the conforming type. For source compatibility, Swift 4 and 4.2 modes continue to expose inferred associated types as publicly as the enclosing type unless the inferred associated type is itself less public than the conforming type. (46143405)<\/p><\/li><li><p>In Swift 5 mode, a class method that returns <code class=\"code-voice\"><span>Self<\/span><\/code> can no longer be overridden with a method that returns a concrete class type that isn’t <code class=\"code-voice\"><span>final<\/span><\/code>. Such code isn’t type safe and needs to be updated. (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-695\">SR-695<\/a>) (47322892)<\/p><p>For example: <\/p><\/li><\/ul><figure id=\"3136866\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>class Base { \n    class func factory() -&gt; Self { \/*...*\/ }\n} \n\nclass Derived: Base {\n    class override func factory() -&gt; Derived { \/*...*\/ } \n} \n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><ul><li><p>In Swift 5 mode, attempting to declare a static property with the same name as a nested type is now always correctly rejected. Previously, it was possible to perform such a redeclaration in an extension of a generic type. (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-7251\">SR-7251<\/a>) (47325738)<\/p><p>For example:<\/p><\/li><\/ul><figure id=\"3136863\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>struct Foo&lt;T&gt; {}\nextension Foo { \n    struct i {}\n\n    \/\/ Error: Invalid redeclaration of &#x27;i&#x27;.\n    \/\/ (Prior to Swift 5, this didn’t produce an error.) \n    static var i: Int { return 0 }\n}\n<\/code><\/pre><\/div><\/div><\/figure><ul><li><p>Designated initializers with variadic parameters are now correctly inherited in subclasses. (16331406)<\/p><\/li><li><p>In Swift 5 mode, <code class=\"code-voice\"><span>@autoclosure<\/span><\/code> parameters can no longer be forwarded to <code class=\"code-voice\"><span>@autoclosure<\/span><\/code> arguments in another function call. Instead, you must explicitly call the function value with parentheses: <code class=\"code-voice\"><span>()<\/span><\/code>; the call itself is wrapped inside an implicit closure, guaranteeing the same behavior as in Swift 4 mode. (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-5719\">SR-5719<\/a>) (37321597)<\/p><p>For example: <\/p><\/li><\/ul><figure id=\"3136864\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>func foo(_ fn: @autoclosure () -&gt; Int) {}\nfunc bar(_ fn: @autoclosure () -&gt; Int) {\n    foo(fn) \/\/ Incorrect, `fn` can’t be forwarded and has to be called.\n    foo(fn()) \/\/ OK\n} \n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><ul><li><p>Complex recursive type definitions involving classes and generics that would previously cause deadlocks at runtime are now fully supported. (38890298) <\/p><\/li><li><p>In Swift 5 mode, when casting an optional value to a generic placeholder type, the compiler will be more conservative with the unwrapping of the value. The result of such a cast now more closely matches the result you would get in a nongeneric context. (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-4248\">SR-4248<\/a>) (47326318)<\/p><p>For example: <\/p><\/li><\/ul><figure id=\"3136869\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>func forceCast&lt;U&gt;(_ value: Any?, to type: U.Type) -&gt; U {\n    return value as! U \n} \n\nlet value: Any? = 42\nprint(forceCast(value, to: Any.self))\n\/\/ Prints &quot;Optional(42)&quot;\n\/\/ (Prior to Swift 5, this would print &quot;42&quot;.)\n\nprint(value as! Any)\n\/\/ Prints &quot;Optional(42)&quot;\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><ul><li><p>Protocols can now constrain their conforming types to those that subclass a given class. Two equivalent forms are supported:<\/p><\/li><\/ul><figure id=\"3136867\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>protocol MyView: UIView { \/*...*\/ }\nprotocol MyView where Self: UIView { \/*...*\/ } \n<\/code><\/pre><\/div><\/div><\/figure><p> Swift 4.2 accepted the second form, but it wasn’t fully implemented and could sometimes crash at compile time or runtime. (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-5581\">SR-5581<\/a>) (38077232) <\/p><ul><li><p>In Swift 5 mode, when setting a property from within its own <code class=\"code-voice\"><span>did<wbr\/>Set<\/span><\/code> or <code class=\"code-voice\"><span>will<wbr\/>Set<\/span><\/code> observer, the observer will now only avoid being recursively called if the property is set on <code class=\"code-voice\"><span>self<\/span><\/code> (either implicitly or explicitly). (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-419\">SR-419<\/a>) (32334826)<\/p><p>For example:<\/p><\/li><\/ul><figure id=\"3136865\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>class Node {\n    var children = [Node]() \n    var depth: Int = 0 {\n        didSet { \n            if depth &lt; 0 {\n                \/\/ Won’t recursively call didSet, because this is setting depth on self. \n                depth = 0\n            } \n\n            \/\/ Will call didSet for each of the children,\n            \/\/ as this isn’t setting the property on self.\n            \/\/ (Prior to Swift 5, this didn’t trigger property\n            \/\/ observers to be called again.)\n            for child in children { \n                child.depth = depth + 1\n            } \n        }\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><ul><li><p><code class=\"code-voice\"><span>#source<wbr\/>Location<\/span><\/code> is now honored when diagnostics are emitted in Xcode. That is, if your source uses <code class=\"code-voice\"><span>#source<wbr\/>Location<\/span><\/code> to map lines in a generated file back to the original source, diagnostics now show up in the original source file rather than in the generated file. (43647151)<\/p><\/li><li><p>Using a generic type alias as the parameter or return type of an <code class=\"code-voice\"><span>@objc<\/span><\/code> method no longer results in the generation of an invalid Objective-C header. (<a href=\"https:\/\/bugs.swift.org\/browse\/SR-8697\">SR-8697<\/a>) (43347303)<\/p><\/li><\/ul><p><\/p><\/div>","title":{"content":"Swift 5 Release Notes for Xcode 10.2"},"containingGroup":[{"id":3136842,"role":"task","paths":[],"symbols":[{"id":3136850,"role":"article","paths":["documentation\/xcode_release_notes\/xcode_10_2_release_notes\/swift_5_release_notes_for_xcode_10_2"],"abstract":"<div><p>Update your code to use new language features and test your apps against changes.<\/p><\/div>","title":{"content":"Swift 5 Release Notes for Xcode 10.2"}}],"title":{"content":"Release Notes"}}],"role":"article","language":"occ","roleHeading":"Article","languages":["occ","swift"],"variants":{"occ":{"paths":["documentation\/xcode_release_notes\/xcode_10_2_release_notes\/swift_5_release_notes_for_xcode_10_2"]},"swift":{"paths":["documentation\/xcode_release_notes\/xcode_10_2_release_notes\/swift_5_release_notes_for_xcode_10_2"]}},"pid":310635,"paths":["documentation\/xcode_release_notes\/xcode_10_2_release_notes\/swift_5_release_notes_for_xcode_10_2"],"hierarchy":[[{"id":3031859,"role":"collection","title":{"content":"Xcode Release Notes"},"paths":["documentation\/xcode_release_notes"]},{"id":3136755,"role":"article","title":{"content":"Xcode 10.2 Release Notes"},"paths":["documentation\/xcode_release_notes\/xcode_10_2_release_notes"]}]],"legalNotices":{"copyright":"Copyright &copy; 2019 Apple Inc. All rights reserved.","termsOfUse":"https:\/\/www.apple.com\/legal\/internet-services\/terms\/site.html","privacyPolicy":"https:\/\/www.apple.com\/privacy\/privacy-policy"}}</script><script src="/documentation/__assets/TopicDetail-fe7d3f3d.js"></script><script src="/documentation/__assets/analytics-8acae80a.js"></script></body></html>