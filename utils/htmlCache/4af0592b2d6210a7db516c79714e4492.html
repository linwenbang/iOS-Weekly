<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="Simplify your navigation and your view controllers">
    <meta name="keywords" content="hacking with swift, apple, developer, news, tutorials, swift, ios, macos, watchos, tvos, api, swift 4, swift 3, swift, tutorial, ios, ios 10, ios 11, ios 12, wwdc, apple, ipad, iphone, free, tutorial, guide, objective c, watchos, tvos, macOS, watchkit">
    <meta name="author" content="Paul Hudson @twostraws">
    <title>How to use the coordinator pattern in iOS apps – Hacking with Swift</title>

    <link rel="alternate" type="application/rss+xml" title="Swift Developer News RSS feed" href="https://www.hackingwithswift.com/articles/rss" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <style>
        /* NOTE: This was added October 12th 2018; can be removed safely in 60 days */
        div.speaking h4 { 
            margin-top: 40px;
            margin-bottom: 0;
        }

        /* NOTE: This was added January 21st 2019; can be removed safely in 60 days */
        div.hws-sponsor {
            border: 3px solid firebrick;
            border-radius: 20px;
            padding: 20px;
            margin: 30px 0;
        }

        div.hws-sponsor p {
            margin: 0;
        }

        div.hws-sponsor a {
            text-decoration: underline;
        }
    </style>

    <meta property="og:image" content="https://www.hackingwithswift.com/uploads/directions.jpg" />
    <meta property="og:title" content="How to use the coordinator pattern in iOS apps" />
    <meta property="og:description" content="Simplify your navigation and your view controllers" />
    <meta property="og:url" content="https://www.hackingwithswift.com/articles/71/how-to-use-the-coordinator-pattern-in-ios-apps" />
    <meta property="og:site_name" content="Hacking with Swift" />
    <meta property="og:type" content="article" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@twostraws" />
    <meta name="twitter:title" content="How to use the coordinator pattern in iOS apps" />
    <meta name="twitter:description" content="Simplify your navigation and your view controllers" />
    <meta name="twitter:creator" content="@twostraws" />
    <meta name="twitter:image" content="https://www.hackingwithswift.com/uploads/directions.jpg" />
    <meta name="twitter:domain" content="hackingwithswift.com" />
    <meta name="twitter:dnt" content="on">

    <link href="/css/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css">
    <!-- Retina.js - Load first for faster HQ mobile images. -->
    <script src="/js/plugins/retina/retina.min.js"></script>
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:700' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Raleway:500,700&text=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz" rel="stylesheet">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="/css/fontawesome-stars.css" />

    <link href="/css/vitality-red.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/hws.css">
    <!-- IE8 support for HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <link rel="canonical" href="https://www.hackingwithswift.com/articles/71/how-to-use-the-coordinator-pattern-in-ios-apps" />
</head>
<!-- Alternate Body Classes: .modern and .vintage -->

<body id="page-top">
    <!-- Navigation -->
    <!-- Note: navbar-default and navbar-inverse are both supported with this theme. -->

        <nav class="navbar navbar-inverse navbar-fixed-top">
    
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="/">
                    <img src="/img/logo.png" class="img-responsive" alt="">
                </a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a class="page-scroll" href="#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/articles">Articles</a>
                    </li>
                    <li class="dropdown">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Learn <span class="caret"></span></a>
                      <ul class="dropdown-menu dropdown-menu-left">
                        <li><a href="/career-guide">Swift Career Guide</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="/sixty">Swift in Sixty Seconds</a></li>
                        <li><a href="/read">Hacking with Swift</a></li>
                        <li><a href="/example-code">Swift Example Code</a></li>
                        <li><a href="/store">Buy Books and Videos</a></li>
                        <li><a href="/playgrounds">Swift Playgrounds</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="/review">Interactive Review</a></li>
                        <li><a href="/interview-questions">Interview Questions</a></li>
                        <li><a href="/test">Test your Swift</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="/awards">Swift Community Awards</a></li>
                        <li><a href="/articles">Latest News</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="/glossary">Glossary of terms</a></li>
                      </ul>
                    </li>
                    <li class="dropdown">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Store <span class="caret"></span></a>
                      <ul class="dropdown-menu dropdown-menu-left">
                        <li><a href="/store">See the range</a></li>
                        <li><a href="/reviews">Reviews</a></li>
                        <li><a href="/#faq">FAQ</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="/frequent-flyer">Frequent Flyer Club</a></li>
                        <li><a href="/update-policy">Update Policy</a></li>
                        <li><a href="/ibooks">Buy on iBooks</a></li>
                      </ul>
                    </li>
                    <li class="dropdown">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
                      <ul class="dropdown-menu dropdown-menu-left">
                        <li><a href="/about">About Hacking with Swift</a></li>
                        <li><a href="/speaking">Conference Talks</a></li>
                      </ul>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

        <skybar id="latestTutorial">
    <div class="container" style="background-color: firebrick; margin: 0; width: 100%;">
         <p style="margin-top: 5px; color: #999999; margin: 6px; color: white; text-align: center;"><a href="/100" style="color: white;" target="_blank"><span class="pure-evil">FREE:</span> <strong>Follow my new 100 Days of Swift challenge!</strong> &gt;&gt;</a></p>

<!--
        <p style="margin-top: 5px; color: #999999; margin: 6px; color: white; text-align: center;"><a href="http://anchor.fm/swiftovercoffee" target="_blank" style="color: white;"><span class="pure-evil">NEW:</span> <strong>Check out my podcast with Sean Allen, Swift over Coffee!</strong> &gt;&gt;</a></p>
-->
    </div>
</skybar>

    

    
    <section class="read">
        <div class="container">
            <div class="row">
                <div class="col-md-1"></div>
                <div class="col-md-10">
                    <div style="text-align: center; margin-top: 10px; margin-bottom: 10px;">
                        <div class="hws-notices-top">
	
<a href="/store/swift-power-pack?source=powerpack-2"><img src="/assets/notice-powerpack-2.png" style="border: 1px solid black;" class="img-responsive center-block" /></a>


<!-- <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3949792738673622"
     data-ad-slot="9393216522"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> -->
<!--<a href="https://devmounta.in/ios-immersive?utm_source=HackingWithSwift&utm_medium=HackingWithSwift&utm_campaign=HackingWithSwift">
	<img src="/assets/devmountain.png" style="border: 0;">
</a>-->
</div>
                    </div>
                </div>
                <div class="col-md-1"></div>
            </div>

            <div class="row">
                <div class="col-md-9">
                    <div class="row">
                        <div class="col-md-12">
                            <h1 style="margin: 10px 0 0 0;">How to use the coordinator pattern in iOS apps</h1>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <p style="margin: 0;"><a href="/about">Paul Hudson</a> &nbsp;&nbsp; <time itemprop="dateModified" datetime="2019-03-29T13:05:22+00:00">March 29th 2019</time>
<meta itemprop="datePublished" content="2018-04-05T14:54:35+00:00"> &nbsp;&nbsp; <i class="fa fa-twitter" aria-hidden="true" style="color: #4099ff"></i> <a href="https://twitter.com/twostraws" target="_blank">@twostraws</a></p>
                        </div>
                    </div>
                        
                    <div class="row" style="margin-top: 20px;">
                        <div class="col-md-12">
                            <img src="/uploads/directions.jpg" class="img-responsive" style="width: 100%; max-height: 400px; object-fit: cover; border: 1px solid #dcdcdc;" />
                        </div>
                    </div>
                        
                    <div class="row" style="margin-top: 20px;">
                        <div class="col-md-12">
                            <p>Using the coordinator pattern in iOS apps lets us remove the job of app navigation from our view controllers, helping make them more manageable and more reusable, while also letting us adjust our app's flow whenever we need.</p>
<p>This is part 1 in a series of tutorials on fixing massive view controllers:</p>
<ol>
<li>How to use the coordinator pattern in iOS apps</li>
<li><a href="/articles/86/how-to-move-data-sources-and-delegates-out-of-your-view-controllers">How to move data sources and delegates out of your view controllers</a></li>
<li><a href="/articles/89/how-to-move-view-code-out-of-your-view-controllers">How to move view code out of your view controllers</a></li>
</ol>
<hr />
<p>View controllers work best when they stand alone in your app, unaware of their position in your app’s flow or even that they are part of a flow in the first place. Not only does this help make your code easier to test and reason about, but it also allows you to re-use view controllers elsewhere in your app more easily.</p>
<p>&nbsp;</p>
<ul>
<li><strong>Update:</strong> I've posted a new <a href="/articles/175/advanced-coordinator-pattern-tutorial-ios">advanced tutorial for the coordinator pattern in iOS apps</a> that answers the six most common questions I get asked when folks move to coordinators.
<p>&nbsp;</p></li>
</ul>
<p>In this article I want to provide you with a hands-on example of the coordinator pattern, which takes responsibility for navigation out of your view controllers and into a separate class. This is a pattern I learned from <a rel="nofollow" target="_blank" href="http://khanlou.com">Soroush Khanlou</a> – folks who’ve <a rel="nofollow" target="_blank" href="https://skillsmatter.com/skillscasts/11333-nuke-it-from-orbit-how-to-deal-with-massive-view-controllers-once-and-for-all">heard me speak</a> will know how highly I regard Soroush and his work, and coordinators are just one of many things I’ve learned reading his blog.</p>
<p>That being said, before I continue: I should emphasize this is the way <em>I</em> use coordinators in my own apps, so if I screw something up it’s my fault and not Soroush’s!</p>
<p>&nbsp;</p>
<p><strong>Prefer video?</strong> The screencast below contains everything in this article and more – <a rel="nofollow" target="_blank" href="https://www.youtube.com/paulhudson">subscribe to my YouTube channel</a> for more like this.</p>
<div class="embed-responsive embed-responsive-16by9"><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/7HgbcTqxoN4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>
<p>&nbsp;</p>
<h3 style="font-weight: normal; margin-top: 60px;">Why do we need to change?</h3>
<p>Let’s start by looking at code most iOS developers have written a hundred or more times:</p>
<pre><code class="language-swift">if let vc = storyboard?.instantiateViewController(withIdentifier: "SomeVC") {
    navigationController?.pushViewController(vc, animated: true)
}</code></pre>
<p>In that kind of code, one view controller must know about, create, configure, and present another. This creates tight coupling in our application: you have hard-coded the link from one view controller to another, so and might even have to duplicate your configuration code if you want the same view controller shown from various places.</p>
<p>What happens if you want different behavior for iPad users, VoiceOver users, or users who are part of an A/B test? Well, your only option is to write more configuration code in your view controllers, so the problem only gets worse.</p>
<p>Even worse, all this involves a child telling its navigation controller what to do – our first view controller is reaching up to its parent and telling it present a second view controller.</p>
<p>To solve this problem cleanly, the coordinator pattern lets us decouple our view controllers so that each one has no idea what view controller came before or comes next – or even that a chain of view controllers exists.</p>
<p>Instead, your app flow is controlled using a coordinator, and your view communicates only with a coordinator. If you want to have users authenticate themselves, ask the coordinator to show an authentication dialog – it can take care of figuring out what that means and presenting it appropriately.</p>
<p>The result is that you’ll find you can use your view controllers in any order, using them and reusing them as needed – there’s no longer a hard-coded path through your app. It doesn’t matter if five different parts of your app might trigger user authentication, because they can all call the same method on their coordinator.</p>
<p>For larger apps, you can even create child coordinators – or <em>subcoordinators</em> – that let you carve off part of the navigation of your app. For example, you might control your account creation flow using one subcoordinator, and control your product subscription flow using another. </p>
<p>If you want even more flexibility, it’s a good idea for the communication between view controllers and coordinators to happen through a protocol rather than a concrete type. This allows you to replace the whole coordinator out at any point later on, and get a different program flow – you could provide one coordinator for iPhone, one for iPad, and one for Apple TV, for example.</p>
<p>So, if you’re struggling with massive view controllers I think you’ll find that simplifying your navigation can really help. But enough of talking in the abstract – let’s try out coordinators with a real project…</p>
<h3 style="font-weight: normal; margin-top: 60px;">Coordinators in action</h3>
<p>Start by creating a new iOS app in Xcode, using the Single View App template. I named mine “CoordinatorTest”, but you’re welcome to use whatever you like.</p>
<p>There are three steps I want to cover in order to give you a good foundation with coordinators:</p>
<ol>
<li>Designing two protocols: one that will be used by all our coordinators, and one to make our view controllers easier to create.</li>
<li>Creating a main coordinator that will control our app flow, then starting it when our app launches.</li>
<li>Presenting other view controllers.</li>
</ol>
<p>Like I said above, it’s a good idea to use protocols for communicating between view controllers and coordinators, but in this simple example we’ll just use concrete types. </p>
<p>First we need a <code>Coordinator</code> protocol that all our coordinators will conform to. Although there are lots of things you could do with this, I would suggest the bare minimum you need is:</p>
<ol>
<li>A property to store any child coordinators. We won’t need child coordinators here, but I’ll still add a property for them so you can expand this with your own code.</li>
<li>A property to store the navigation controller that’s being used to present view controllers. Even if you don’t show the navigation bar at the top, using a navigation controller is the easiest way to present view controllers.</li>
<li>A <code>start()</code> method to make the coordinator take control. This allows us to create a coordinator fully and activate it only when we’re ready.</li>
</ol>
<p>In Xcode, press Cmd+N to create a new Swift File called Coordinator.swift. Give it this content to match the requirements above:</p>
<pre><code class="language-swift">import UIKit

protocol Coordinator {
    var childCoordinators: [Coordinator] { get set }
    var navigationController: UINavigationController { get set }

    func start()
}</code></pre>
<p>While we’re making protocols, I usually add a simple <code>Storyboarded</code> protocol that lets me create view controllers from a storyboard. As much as I like using storyboards, I don’t like scattering storyboard code through my project – getting all that out into a separate protocol makes my code cleaner and gives you the flexibility to change your mind later.</p>
<p>I don’t recall where I first saw this approach, but it’s straightforward to do. We’re going to:</p>
<ol>
<li>Create a new protocol called <code>Storyboarded</code>.</li>
<li>Give that protocol one method, <code>instantiate()</code>, which returns an instance of whatever class you call it on.</li>
<li>Add a default implementation for <code>instantiate()</code> that finds the class name of the view controller you used it with, then uses that to find a storyboard identifier inside Main.storyboard.</li>
</ol>
<p>This relies on two things to work.</p>
<p>First, when you use <code>NSStringFromClass(self)</code> to find the class name of whatever view controller you requested, you’ll get back YourAppName.YourViewController. We need to write a little code to split that string on the dot in the center, then use the second part (“YourViewController”) as the actual class name.</p>
<p>Second, whenever you add a view controller to your storyboard, make sure you set its storyboard identifier to whatever class name you gave it.</p>
<p>Create a second new Swift file called Storyboarded.swift, then give it the following protocol:</p>
<pre><code class="language-swift">import UIKit

protocol Storyboarded {
    static func instantiate() -&gt; Self
}

extension Storyboarded where Self: UIViewController {
    static func instantiate() -&gt; Self {
        // this pulls out "MyApp.MyViewController"
        let fullName = NSStringFromClass(self)

        // this splits by the dot and uses everything after, giving "MyViewController"
        let className = fullName.components(separatedBy: ".")[1]

        // load our storyboard
        let storyboard = UIStoryboard(name: "Main", bundle: Bundle.main)

        // instantiate a view controller with that identifier, and force cast as the type that was requested
        return storyboard.instantiateViewController(withIdentifier: className) as! Self
    }
}</code></pre>
<p>We already have a view controller provided by Xcode for this default project. So, open ViewController.swift and make it conform to <code>Storyboarded</code>:</p>
<pre><code class="language-swift">class ViewController: UIViewController, Storyboarded {</code></pre>
<p>Now that we have a way to create view controllers easily, we no longer want the storyboard to handle that for us. In iOS, storyboards are responsible not only for containing view controller designs, but also for configuring the basic app window.</p>
<p>We’re going to allow the storyboard to store our designs, but stop it from handling our app launch. So, please open Main.storyboard and select the view controller it contains:</p>
<ol>
<li>Use the attributes inspector to uncheck its Initial View Controller box.</li>
<li>Now change to the identity inspector and give it the storyboard identifier “ViewController” – remember, this needs to match the class name in order for the <code>Storyboarded</code> protocol to work.</li>
</ol>
<p>The final set up step is to stop the storyboard from configuring the basic app window:</p>
<ol>
<li>Choose your project at the top of the project navigator.</li>
<li>Select “CoordinatorTest” underneath Targets.</li>
<li>Look for the Main Interface combo box – it should say “Main”.</li>
<li>Delete “Main”, leaving Main Interface blank.</li>
</ol>
<p>That’s all our basic code complete. Your app won’t actually work now, but we’re going to fix that next…</p>
<h3 style="font-weight: normal; margin-top: 60px;">Creating and launching our coordinator</h3>
<p>At this point we’ve created a <code>Coordinator</code> protocol defining what each coordinator needs to be able to do, a <code>Storyboarded</code> protocol to make it easier to create view controllers from a storyboard, then stopped Main.storyboard from launching our app’s user interface.</p>
<p>The next step is to create our first coordinator, which will be responsible for taking control over the app as soon as it launches.</p>
<p>Create a new Swift File called MainCoordinator.swift, and give it this content:</p>
<pre><code class="language-swift">import UIKit

class MainCoordinator: Coordinator {
    var childCoordinators = [Coordinator]()
    var navigationController: UINavigationController

    init(navigationController: UINavigationController) {
        self.navigationController = navigationController
    }

    func start() {
        let vc = ViewController.instantiate()
        navigationController.pushViewController(vc, animated: false)
    }
}</code></pre>
<p>Let me break down what all that code does…</p>
<ol>
<li>It’s a class rather than a struct because this coordinator will be shared across many view controllers.</li>
<li>It has an empty <code>childCoordinators</code> array to satisfy the requirement in the <code>Coordinator</code> protocol, but we won’t be using that here.</li>
<li>It also has a <code>navigationController</code> property as required by <code>Coordinator</code>, along with an initializer to set that property.</li>
<li>The <code>start()</code> method is the main part: it uses our <code>instantiate()</code> method to create an instance of our <code>ViewController</code> class, then pushes it onto the navigation controller.</li>
</ol>
<p>Notice how that <code>MainCoordinator</code> isn’t a view controller? That means we don’t need to fight with any of UIViewController’s quirks here, and there are no methods like <code>viewDidLoad()</code> or <code>viewWillAppear()</code> that are called automatically by UIKit.</p>
<p>Now that we have a coordinator for our app, we need to use that when our app starts. Normally app launch would be handled by our storyboard, but now that we’ve disabled that we must write some code inside AppDelegate.swift to do that work by hand.</p>
<p>So, open AppDelegate.swift and give it this property:</p>
<pre><code class="language-swift">var coordinator: MainCoordinator?</code></pre>
<p>That will store the main coordinator for our app, so it doesn’t get released straight away.</p>
<p>Next we’re going to modify <code>didFinishLaunchingWithOptions</code> so that it configures and starts our main coordinator, and also sets up a basic window for our app. Again, that basic window is normally done by the storyboard, but it’s our responsibility now.</p>
<p>Replace the existing <code>didFinishLaunchingWithOptions</code> method with this:</p>
<pre><code class="language-swift">func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {
    // create the main navigation controller to be used for our app
    let navController = UINavigationController()

    // send that into our coordinator so that it can display view controllers
    coordinator = MainCoordinator(navigationController: navController)

    // tell the coordinator to take over control
    coordinator?.start()

    // create a basic UIWindow and activate it
    window = UIWindow(frame: UIScreen.main.bounds)
    window?.rootViewController = navController
    window?.makeKeyAndVisible()

    return true
}</code></pre>
<p>If everything has gone to plan, you should be able to launch the app now and see something.</p>
<p>At this point you’ve spent about 20 minutes but don’t have a whole lot to show for your work. Stick with me a bit longer, though – that’s about to change!</p>
<h3 style="font-weight: normal; margin-top: 60px;">Handling app flow</h3>
<p>Coordinators exist to control program flow around your app, and we’re now in the position to show exactly how that’s done.</p>
<p>First, we need some dummy view controllers that we can display. So, press Cmd+N to create a new Cocoa Touch Class, name it “BuyViewController”, and make it subclass from <code>UIViewController</code>. Now make another <code>UIViewController</code> subclass, this time called “CreateAccountViewController”.</p>
<p>Second, go back to Main.storyboard and drag out two new view controllers. Give one the class and storyboard identifier “BuyViewController”, and the other “CreateAccountViewController”. I recommend you do something to customize each view controller just a little – perhaps add a “Buy” label to one and “Create Account” to the other, just so you know which one is which at runtime.</p>
<p>Third, we need to add two buttons to the first view controller so we can trigger presenting the others. So, add two buttons with the titles “Buy” and “Create Account”, then use the assistant editor to connect them up to IBActions methods called <code>buyTapped()</code> and <code>createAccount()</code>.</p>
<p>Fourth, all our view controllers need a way to talk to their coordinator. As I said earlier, for larger apps you’ll want to use protocols here, but this is a fairly small app so we can refer to our <code>MainCoordinator</code> class directly.</p>
<p>So, add this property to all three of your view controllers:</p>
<pre><code class="language-swift">weak var coordinator: MainCoordinator?</code></pre>
<p>While you’re in <code>BuyViewController</code> and <code>CreateAccountViewController</code>, please also take this opportunity to make both of them conform to the <code>Storyboarded</code> so we can create them more easily.</p>
<p>Finally, open MainCoordinator.swift and modify its <code>start()</code> method to this:</p>
<pre><code class="language-swift">func start() {
    let vc = ViewController.instantiate()
    vc.coordinator = self        
    navigationController.pushViewController(vc, animated: false)
}</code></pre>
<p>That sets the <code>coordinator</code> property of our initial view controller, so it’s able to send messages when its buttons are tapped.</p>
<p>At this point we have several view controllers all being managed by a single coordinator, but we still don’t have a way to move between view controllers.</p>
<p>To make that happen, I’d like you to add two new methods to <code>MainCoordinator</code>:</p>
<pre><code class="language-swift">func buySubscription() {
    let vc = BuyViewController.instantiate()
    vc.coordinator = self
    navigationController.pushViewController(vc, animated: true)
}

func createAccount() {
    let vc = CreateAccountViewController.instantiate()
    vc.coordinator = self
    navigationController.pushViewController(vc, animated: true)
}</code></pre>
<p>Those methods are almost identical to <code>start()</code>, except now we’re using <code>BuyViewController</code> and <code>CreateAccountViewController</code> instead of the original <code>ViewController</code>. If you needed to configure those view controllers somehow, this is where it would be done.</p>
<p>The last step – the one that brings it all together – is to put some code inside the <code>buyTapped()</code> and <code>createAccount()</code> methods of the <code>ViewController</code> class. </p>
<p>All the actual work of those methods already exists inside our coordinator, so the IBActions become trivial:</p>
<pre><code class="language-swift">@IBAction func buyTapped(_ sender: Any) {
    coordinator?.buySubscription()
}

@IBAction func createAccount(_ sender: Any) {
    coordinator?.createAccount()
}</code></pre>
<p>You should now be able to run your app and navigate between view controllers – all powered by the coordinator.</p>
<h3 style="font-weight: normal; margin-top: 60px;">What now?</h3>
<p>I hope this has given you a useful introduction to the power of coordinators:</p>
<ul>
<li>No view controllers know what comes next in the chain or how to configure it.</li>
<li>Any view controller can trigger your purchase flow without knowing how it’s done or repeating code.</li>
<li>You can add centralized code to handle iPads and other layout variations, or to do A/B testing.</li>
<li>But most importantly, you get true view controller isolation: each view controller is responsible only for itself.</li>
</ul>
<p>I have a second article that goes into more detail on common problems people face with coordinators – <a href="/articles/175/advanced-coordinator-pattern-tutorial-ios">click here to read my advanced coordinators tutorial</a>.</p>
<p>If you’re keen to learn more about design patterns in Swift, you might want to look at my book <a rel="nofollow" target="_blank" href="https://www.hackingwithswift.com/store/swift-design-patterns">Swift Design Patterns</a>.</p>
<p>And finally, I want to recommend once again that you visit Soroush Khanlou’s blog, <a rel="nofollow" target="_blank" href="http://khanlou.com">khanlou.com</a>, because he’s talked extensively about coordinators, controllers, MVVM, protocols, and so much more:</p>
<ul>
<li><a rel="nofollow" target="_blank" href="http://khanlou.com/2015/01/the-coordinator/">The Coordinator</a></li>
<li><a rel="nofollow" target="_blank" href="http://khanlou.com/2015/10/coordinators-redux/">Coordinators Redux</a></li>
<li><a rel="nofollow" target="_blank" href="http://khanlou.com/2017/05/back-buttons-and-coordinators/">Back Buttons and Coordinators</a></li>
</ul><!-- <div class="hws-sponsor"><p><strong class="label label-danger">Sponsored</strong> You’re already busy updating your app for Swift 4.2 and iOS 12, so why not let Instabug help you find and fix bugs? <strong>Add just two lines of code</strong> to your project and receive comprehensive reports with all the feedback you need to ship a world-class app – <a href="https://try.instabug.com/ios/?utm_source=hackingwithswift&utm_medium=native_ads&utm_campaign=hackingwithswiftv3">click here to learn more</a>!</div> --><p align="center" style="margin: 30px;"><a href="https://twitter.com/share" data-dnt="true" class="twitter-share-button" data-url="https://www.hackingwithswift.com/articles/71/how-to-use-the-coordinator-pattern-in-ios-apps" data-text="How to use the coordinator pattern in iOS apps – Simplify your navigation and your view controllers" data-via="twostraws" data-size="large" data-hashtags="swiftlang" data-count="none">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p><p>&nbsp;</p>
                        </div>
                    </div>
                </div>

                                <style>
                    div.books-sidebar {
                        text-align: center;
                        padding-top: 5px
                    }

                    div.books-sidebar img {
                        border: 1px solid #cccccc;
                        margin-bottom: 5px;
                    }

                    @media (max-width: 991px) {
                        div.books-sidebar {
                            display: none;
                        }
                    }
                </style>

                <div class="col-md-3" style="padding: 0; padding-top: 20px;">
                    <div class="books-sidebar" style="text-align: center;">
                        <strong>MASTER SWIFT NOW</strong>
                    </div>
                    <div class="books-sidebar">
                        <a href="/store/testing-swift"><img src="/img/covers-flat/testing.png" alt="Buy Testing Swift" width="95" /></a>
                        <a href="/store/practical-ios12"><img src="/img/covers-flat/ios12.png" alt="Buy Practical iOS 12" width="95" /></a>
                        <a href="/store/pro-swift"><img src="/img/covers-flat/pro-swift.png" alt="Buy Pro Swift" width="95" /></a>
                        <a href="/store/swift-design-patterns"><img src="/img/covers-flat/patterns.png" alt="Buy Swift Design Patterns" width="95" /></a>
                        <a href="/store/swift-coding-challenges"><img src="/img/covers-flat/swiftcc.png" alt="Buy Swift Coding Challenges" width="95" /></a>
                        <a href="/store/server-side-swift"><img src="/img/covers-flat/vapor.png" alt="Buy Server-Side Swift (Vapor Edition)" width="95" /></a>
                        <a href="/store/server-side-swift"><img src="/img/covers-flat/kitura.png" alt="Buy Server-Side Swift (Kitura Edition)" width="95" /></a>
                        <a href="/store/hacking-with-macos"><img src="/img/covers-flat/macos.png" alt="Buy Hacking with macOS" width="95" /></a>
                        <a href="/store/advanced-ios-1"><img src="/img/covers-flat/advanced-ios-1.png" alt="Buy Advanced iOS Volume One" width="95" /></a>
                        <a href="/store/advanced-ios-2"><img src="/img/covers-flat/advanced-ios-2.png" alt="Buy Advanced iOS Volume Two" width="95" /></a>                        
                        <a href="/store/hacking-with-watchos"><img src="/img/covers-flat/watchos.png" alt="Buy Hacking with watchOS" width="95" /></a>
                        <a href="/store/hacking-with-tvos"><img src="/img/covers-flat/tvos.png" alt="Buy Hacking with tvOS" width="95" /></a>
                        <a href="/store/hacking-with-swift"><img src="/img/covers-flat/hws.png" alt="Buy Hacking with Swift" width="95" /></a>
                        <a href="/store/dive-into-spritekit"><img src="/img/covers-flat/spritekit.png" alt="Buy Dive Into SpriteKit" width="95" /></a>
                        <a href="/sixty"><img src="/img/covers-flat/sixty.png" alt="Buy Swift in Sixty Seconds" width="95" /></a>
                        <a href="/store/objective-c-for-swift-developers"><img src="/img/covers-flat/objc.png" alt="Buy Objective-C for Swift Developers" width="95" /></a>
                        <a href="/store/beyond-code"><img src="/img/covers-flat/beyond-code.png" alt="Buy Beyond Code" width="95" /></a>
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
            <div class="row">
    <div class="col-sm-1" style="text-align: left;"></div>
    <div class="col-sm-2">
        <p style="text-align: center;"><img src="/img/paul.png" class="img-responsive" style="border-radius: 64px; border: 1px solid black; margin: auto;" /></p>
        <p style="text-align: center;"><a href="https://twitter.com/twostraws">@twostraws</a></p>
    </div>
    <div class="col-sm-8" style="text-align: left;"><h3 style="margin: 0">About the author</h3><p>Paul Hudson is the creator of Hacking with Swift, the <a href="/store">most comprehensive series of Swift books</a> in the world. He's also the editor of <a href="/articles">Swift Developer News</a>, the maintainer of the <a href="/example-code">Swift Knowledge Base</a>, and Mario Kart world champion. OK, so that last part isn't true. If you're curious you can <a href="/about">learn more here</a>.</p></div>
    <div class="col-sm-1" style="text-align: left;"></div>
</div>            </div>

            <div class="row" style="margin-top: 40px">            
                <div class="col-xs-6 hws-news-others">
                    <p class="lead" style="margin-bottom: 10px;"><a href="/articles">More articles</a></p>
                </div>

                <div class="col-xs-6 hws-news-others">
                    <p class="lead" style="text-align: right; margin-bottom: 10px;"><img src="/img/feed.png" style="height: 22px; vertical-align: middle; margin-bottom: 4px;" /> <a href="/articles/rss">
                    RSS feed</a></p>
                </div>
            </div>

            <div class="row">
                                    <div class="col-sm-3" style="margin-bottom: 30px;">
                        <a href="/articles/183/apple-announces-swift-enterprise-edition">
                            <img src="/uploads/enterprise.jpg" class="img-responsive" style="border: 1px solid #dcdcdc;" />
                            <div>
                                <h4>Apple announces Swift Enterprise Edition</h4>
                            </div>
                        </a>
                    </div>
                                    <div class="col-sm-3" style="margin-bottom: 30px;">
                        <a href="/articles/182/whats-new-in-swift-5-1">
                            <img src="/uploads/swift-evolution-1.jpg" class="img-responsive" style="border: 1px solid #dcdcdc;" />
                            <div>
                                <h4>What’s new in Swift 5.1</h4>
                            </div>
                        </a>
                    </div>
                                    <div class="col-sm-3" style="margin-bottom: 30px;">
                        <a href="/articles/181/why-using-isempty-is-faster-than-checking-count-0">
                            <img src="/uploads/typography.jpg" class="img-responsive" style="border: 1px solid #dcdcdc;" />
                            <div>
                                <h4>Why using isEmpty is faster than checking count == 0</h4>
                            </div>
                        </a>
                    </div>
                                    <div class="col-sm-3" style="margin-bottom: 30px;">
                        <a href="/articles/180/interview-antoine-van-der-lee">
                            <img src="/uploads/zz-antoine-van-der-lee.jpg" class="img-responsive" style="border: 1px solid #dcdcdc;" />
                            <div>
                                <h4>Interview: Antoine van der Lee</h4>
                            </div>
                        </a>
                    </div>
                            </div>

            <div class="row" style="margin-bottom: 80px;">
                <div class="col-md-1"></div>
                <div class="col-md-10">
                    <div style="text-align: center; margin-top: 10px; margin-bottom: 10px;">
                        <div class="hws-notices-bottom">
	<!-- <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3949792738673622"
     data-ad-slot="1869949723"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> -->
<!--<a href="https://devmounta.in/ios-immersive?utm_source=HackingWithSwift&utm_medium=HackingWithSwift&utm_campaign=HackingWithSwift">
	<img src="/assets/devmountain.png" style="border: 0;">
</a>-->
</div>
                    </div>
                </div>
                <div class="col-md-1"></div>
            </div>
        </div>
    </section>


            <section class="page-rating-container bg-gray">
        <div class="container text-center">
            <div class="row">
                <div id="page-rating-start">
                  <p>Was this page useful? Let me know!</p>
                	<select id="page-rating">
                      <option value=""></option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                </div>

                                <p><small>Average rating: 4.7/5</small></p>
                
                <div id="page-rating-end" style="display: none">
                    <p>Thank you!</p>
                </div>
            </div>
        </div>
    </section>

    <script type="application/ld+json">{
      "@context": "http://schema.org",
      "@type": "Article",
      "author": "Paul Hudson",
      "datePublished": "2018-04-05",
      "dateModified": "2019-03-29",
      "headline": "How to use the coordinator pattern in iOS apps",
      "image": {
        "@type": "imageObject",
        "url": "https://www.hackingwithswift.com/uploads/directions.jpg"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.7",
            "worstRating": "1.0",
            "bestRating": "5.0",
            "reviewCount": "83"
        },
      "publisher": {
        "@type": "Organization",
        "name": "Hacking with Swift",
        "logo": {
          "@type": "imageObject",
            "url": "https://www.hackingwithswift.com/files/logo-large.png"
          }
        }
      }
    </script>
    
    
        <a href="/store" class="btn btn-block btn-full-width" style="white-space: normal;">Click here to visit the Hacking with Swift store &gt;&gt;</a>
    
    <footer class="footer" style="background-image: url('/img/bg-footer.jpg')">
        <div class="container text-center">
            <div class="row">
                <div class="col-md-6 contact-details">
                    <a href="https://twitter.com/twostraws">
                        <h4><i class="fa fa-twitter fa-4x"></i></h4>
                        <p>@twostraws</p>
                    </a>
                </div>
                <div class="col-md-6 contact-details">
                    <a href="mailto:paul@hackingwithswift.com">
                        <h4><i class="fa fa-envelope-o fa-4x"></i></h4>
                        <p>paul@hackingwithswift.com
                        </p>
                    </a>
                </div>
            </div>
            <div class="row copyright">
                <div class="col-lg-12">
                    <p class="small">Swift, the Swift logo, Xcode, Instruments, Cocoa Touch, Touch ID, AirDrop, iBeacon, iPhone, iPad, Safari, App Store, watchOS, tvOS, Mac and macOS are trademarks of Apple Inc., registered in the U.S. and other countries. Pulp Fiction is copyright &copy; 1994 Miramax Films. Hacking with Swift &copy;2019 Paul Hudson.</p>

                    <p class="small"><a href="/privacy">Privacy Policy</a></p>
                </div>
            </div>
        </div>
    </footer>
    <!-- Core Scripts -->
    <script src="/js/jquery.js"></script>
    <script src="/js/jquery-ui-custom.min.js"></script>
    <script src="/js/jquery.ui.touch-punch.min.js"></script>
    <script src="/js/bootstrap/bootstrap.min.js"></script>
    <!-- Plugin Scripts -->
    <script src="/js/plugins/jquery.easing.min.js"></script>
    <script src="/js/plugins/classie.js"></script>

    
    <script src="/js/plugins/jquery.mixitup.js"></script>
    <script src="/js/prism.js"></script>
    <script src="/js/vitality.js"></script>

    <script src="/js/jquery.barrating.min.js"></script>
    <script type="text/javascript">
       $(function() {
            $('#page-rating').barrating('show', {
              theme: 'fontawesome-stars',
              onSelect: function(value, text, event) {
                if (typeof(event) !== 'undefined') {
                  // rating was selected by a user
                  var rating = $(event.target).data("rating-value");

                    $.ajax({
                      type: "POST",
                      url: "/rating",
                      data: { "url": window.location.pathname, "rating": rating },
                    });

                  $("#page-rating-start").hide();
                  $("#page-rating-end").show();
                } else {
                  // rating was selected programmatically
                  // by calling `set` method
                }
              }
            });
       });
    </script>


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-58275818-1', 'auto');
        ga('send', 'pageview');
    </script>

<!--     { { include('house-ads.html') } }

    <script src="/js/ads.js"></script>
    <script>
    if(window.areAdsDisplayed === undefined) {
        var houseAd = createHouseAd();
        $('.hws-notices-top').html(houseAd);
        $('.hws-notices-bottom').html(houseAd);
    }
    </script> -->

    </body>

</html>
