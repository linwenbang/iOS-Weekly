<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=x-dns-prefetch-control content=on><meta name=renderer content=webkit><link rel=dns-prefetch href=//s3.pstatp.com/ ><link rel=dns-prefetch href=//s3a.pstatp.com/ ><link rel=dns-prefetch href=//s3b.pstatp.com><link rel=dns-prefetch href=//p1.pstatp.com/ ><link rel=dns-prefetch href=//p3.pstatp.com/ ><meta http-equiv=Content-Type content="text/html; charset=utf-8"><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name=360-site-verification content=b96e1758dfc9156a410a4fb9520c5956><meta name=360_ssp_verify content=2ae4ad39552c45425bddb738efda3dbb><meta name=google-site-verification content=3PYTTW0s7IAfkReV8wAECfjIdKY-bQeSkVTyJNZpBKE><meta name=shenma-site-verification content=34c05607e2a9430ad4249ed48faaf7cb_1432711730><meta name=baidu_union_verify content=b88dd3920f970845bad8ad9f90d687f7><meta name=domain_verify content=pmrgi33nmfuw4ir2ej2g65lunfqw6ltdn5wselbcm52wszbchirdqyztge3tenrsgq3dknjume2tayrvmqytemlfmiydimddgu4gcnzcfqrhi2lnmvjwc5tfei5dcnbwhazdcobuhe2dqobrpu><link rel="shortcut icon" href=//s3a.pstatp.com/toutiao/resource/ntoutiao_web/static/image/favicon_5995b44.ico type=image/x-icon><!--[if lt IE 9]>
  <p>您的浏览器版本过低，请<a href="http://browsehappy.com/">升级浏览器</a></p>
<![endif]--><link rel=alternate media="only screen and (max-width: 640px)" href=//m.toutiao.com/a6615151835814560264/ ><title>将 75000 行原生 iOS 应用程序移植到 Flutter 后，结果太惊讶！</title><meta name=keywords content=iOS,用户界面,Flutter,XML,Storyboard><meta name=description content=很少有文章，介绍如何将大型应用，移植到Flutter。而本文的作者——一位来自澳洲的NativeiOS&amp;Flutter的开发者，尝试这样做了，结果让他十分惊讶。><script src="//s3.pstatp.com/toutiao/monitor/sdk/slardar.js?ver=20171221_1" crossorigin=anonymous></script><script>window.Slardar && window.Slardar.install({
      sampleRate: 0.5,
      bid: 'toutiao_pc',
      pid: 'article_detail_new',
      ignoreAjax: [/\/action_log\//],
      ignoreStatic: [/\.tanx\.com\//, /\.alicdn\.com\//, /\.mediav\.com/, /\.cnzz\.com/]
    });</script><link rel=stylesheet href=//s3b.pstatp.com/toutiao/static/css/page/index_node/index.ff9bfa2efac338afaefe1e658ff48c9b.css><script>!function(e){function t(a){if(o[a])return o[a].exports;var r=o[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a=window.webpackJsonp;window.webpackJsonp=function(n,f){for(var p,c,s=0,l=[];s<n.length;s++)c=n[s],r[c]&&l.push.apply(l,r[c]),r[c]=0;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&(e[p]=f[p]);for(a&&a(n,f);l.length;)l.shift().call(null,t);if(f[0])return o[0]=0,t(0)};var o={},r={0:0};t.e=function(e,a){if(0===r[e])return a.call(null,t);if(void 0!==r[e])r[e].push(a);else{r[e]=[a];var o=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.async=!0,n.src=t.p+"static/js/"+e+"."+{1:"8a453c49493a801fc8a8",2:"4eefd1563010e5a8fbef",3:"b904de32d1d3f23992d0",4:"3e7f634128257bf2abef",5:"0a47aba3bfcdf3f4f39f"}[e]+".js",o.appendChild(n)}},t.m=e,t.c=o,t.p="/toutiao/",t.p="//s3.pstatp.com/toutiao/"}([]);</script></head><body><div id=app></div><script src=//s3.pstatp.com/inapp/lib/raven.js crossorigin=anonymous></script><script>;(function(window) {
    // sentry
    window.Raven && Raven.config('//key@m.toutiao.com/log/sentry/v2/96', {
      whitelistUrls: [/pstatp\.com/],
      sampleRate: 0.5,
      shouldSendCallback: function(data) {
        var ua = navigator && navigator.userAgent;
        var isDeviceOK = !/Mobile|Linux/i.test(navigator.userAgent);
        if (data.message && data.message.indexOf('p.tanx.com') !== -1) {
          return false;
        }
        return isDeviceOK;
      },
      tags: {
        bid: 'toutiao_pc',
        pid: 'article_detail_new'
      },
      autoBreadcrumbs: {
        'xhr': false,
        'console': true,
        'dom': true,
        'location': true
      }
    }).install();
  })(window);</script><script>var PAGE_SWITCH = {"adScriptQihu":true,"adScriptTB":true,"anti_spam":false,"migScriptUrl":"//s3a.pstatp.com/toutiao/picc_mig/dist/img.min.js","nineteen":"","picVersion":"20180412_01","qihuAdShow":true,"taVersion":"20171221_1","ttAdShow":true};</script><script>var BASE_DATA = {
    userInfo: {
      id: 0,
      userName: '',
      avatarUrl: '',
      isPgc: false,
      isOwner: false
    },
    headerInfo: {
      id: 0,
      isPgc: false,
      userName: '',
      avatarUrl: '',
      isHomePage: false,
      chineseTag: '技术',
      crumbTag: 'search/?keyword=%E6%8A%80%E6%9C%AF',
      hasBar: true
    },
    articleInfo: {
      title: '将 75000 行原生 iOS 应用程序移植到 Flutter 后，结果太惊讶！',
      content: '&lt;div&gt;&lt;div class&#x3D;&quot;pgc-img&quot;&gt;&lt;img src&#x3D;&quot;http://p3.pstatp.com/large/pgc-image/154021005791971c214ddeb&quot; img_width&#x3D;&quot;640&quot; img_height&#x3D;&quot;100&quot; alt&#x3D;&quot;将 75000 行原生 iOS 应用程序移植到 Flutter 后，结果太惊讶！&quot; inline&#x3D;&quot;0&quot;&gt;&lt;p class&#x3D;&quot;pgc-img-caption&quot;&gt;&lt;/p&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;p&gt;【CSDN编者按】很少有文章，介绍如何将大型应用，移植到Flutter。而本文的作者——一位来自澳洲的Native iOS &amp;amp; Flutter的开发者，尝试这样做了，结果让他十分惊讶。到底是什么情况？一起来看文章吧！&lt;/p&gt;&lt;/blockquote&gt;&lt;div class&#x3D;&quot;pgc-img&quot;&gt;&lt;img src&#x3D;&quot;http://p1.pstatp.com/large/pgc-image/15402100579518055b96fc0&quot; img_width&#x3D;&quot;1080&quot; img_height&#x3D;&quot;694&quot; alt&#x3D;&quot;将 75000 行原生 iOS 应用程序移植到 Flutter 后，结果太惊讶！&quot; inline&#x3D;&quot;0&quot;&gt;&lt;p class&#x3D;&quot;pgc-img-caption&quot;&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;澳大利亚有一个名为Easy Diet Diary的原生iOS应用程序。&lt;/p&gt;&lt;p&gt;该应用：&lt;/p&gt;&lt;p&gt;• 已被下载120万次；&lt;/p&gt;&lt;p&gt;• 用Objective-C和Swift编写，后端是Amazon AWS；&lt;/p&gt;&lt;p&gt;• 代码统计工具CLOC，报告该应用包含75,000行代码。&lt;/p&gt;&lt;p&gt;我在这家小公司工作了很长一段时间，他们的任务列表上一直有个安卓版本，但我们一直没有开发，因为：&lt;/p&gt;&lt;p&gt;• 支持两个代码库需要太多精力且难以管理。&lt;/p&gt;&lt;p&gt;• 跨平台开发的主要选择Xamarin和React Native都有重要缺陷（这是另一个故事）。&lt;/p&gt;&lt;p&gt;最后，我们选择进入Flutter的世界！&lt;/p&gt;&lt;p&gt;Flutter的速度很快，并且可以保证用户界面体验，而且一切都与原生应用没有区别（特别是有了2018年9月加入的iOS小窗体之后）。&lt;/p&gt;&lt;p&gt;以下是本文的主干：&lt;/p&gt;&lt;p&gt;• 代码行数与开发速度&lt;/p&gt;&lt;p&gt;• 架构&lt;/p&gt;&lt;p&gt;• 社区&lt;/p&gt;&lt;p&gt;• 性能&lt;/p&gt;&lt;p&gt;• 语言&lt;/p&gt;&lt;p&gt;• 还缺少什么？&lt;/p&gt;&lt;p&gt;• 结论&lt;/p&gt;&lt;h1&gt;1&lt;strong&gt;代码行数与开发速度&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;第一阶段我预估需要6个人月。但是，项目进度居然领先了！对我来说，这简直太不可思议了。&lt;/p&gt;&lt;p&gt;为什么？&lt;/p&gt;&lt;p&gt;Flutter的布局并不是像iOS那样，使用的不是Storyboard，或者像安卓那样使用XML，而是在代码中将窗体组合成窗体树，即可创建应用程序的用户界面。这对我来说听起来有点可怕，但是我做了尝试，虽然花了一些时间来习惯，但不久我就可以灵活地使用这些窗体树了。&lt;/p&gt;&lt;p&gt;然后，大约第一个阶段进展到第三个月的时候，发生了一件很奇怪的事情。随着我越来越熟练、越来越快地移植功能，项目中的代码行却开始迅速减少了。这很奇怪，因为我移植的业务逻辑数量非常庞大，这些逻辑在代码数量上的比例几乎是一比一。&lt;/p&gt;&lt;p&gt;事情的真相是，我可以通过创建类和编写函数来重用用户界面部分的代码，这比使用原生iOS更容易。通常，我可以利用几个额外的参数，简单地重构用户界面的窗体就可以重用它们。如果这样不行，我还可以简单地在现有的窗体周围再包上另一个窗体，就可以实现需要的行为了。这简直太赞了！&lt;/p&gt;&lt;p&gt;最终我预计代码行数将少于30,000（而原生iOS版本为75,000行）。当然，原生iOS版本包含一些虽然当时开发了最终却被取代或未被使用的代码。我估计未使用的代码占15,000行。换句话说，需要移植的代码量为60,000行。&lt;/p&gt;&lt;p&gt;因此，总的来说，Flutter的代码量只有原生iOS原有代码的一半！&lt;/p&gt;&lt;p&gt;此外，Flutter项目不包含任何Storyboard XML。Storyboard中有很多XML。原生iOS项目包含：&lt;/p&gt;&lt;p&gt;• 15个Storyboard；&lt;/p&gt;&lt;p&gt;• 47个Nib文件；&lt;/p&gt;&lt;p&gt;• 92个View Controllers。&lt;/p&gt;&lt;p&gt;我与Storyboard斗争了很多年，一直在尝试遵循最佳实践，最后感觉在Flutter中构建用户界面非常自由而且速度很快。&lt;/p&gt;&lt;p&gt;以前我没有意识到自己的大部分时间都用在了编写与用户界面相关的代码，还要忍受大量的Storyboard和自动布局限制。&lt;/p&gt;&lt;p&gt;我无数次听人说应该将用户界面布局与代码分开，我非常同意，但就我的Flutter经验而言，这一点未必是真的。而且关于用户界面分离的这种概念也不仅仅是原生iOS的最佳实践。&lt;/p&gt;&lt;p&gt;我记得自己在微软WPF中与XML作斗争，也见过Quora上有人问《为什么安卓使用XML来定义用户界面而不仅仅是Java代码？》&lt;/p&gt;&lt;p&gt;Storyboard是一种自上至下的布局方式（适用于桌面应用程序），而窗体采用自下而上的方法，在构建移动应用程序时，窗体可以极大地简化编程。我听说这种方式类似于React Native和CSS flex-boxes的布局方式。Wm Leler在Hacker Noon上发表的文章《Flutter带来了哪些创新》很好地解释了这个问题。&lt;/p&gt;&lt;p&gt;以下方式对于利用窗体构建用户界面很有帮助性：&lt;/p&gt;&lt;p&gt;• 大多数情况下，Flutter中支持状态的“热重载”功能可以在几秒钟内，将代码更改无缝地整合到正在运行的应用程序中；&lt;/p&gt;&lt;p&gt;• Android Studio的快捷键Alt + Enter可以插入或删除用户界面的窗体（行、列或容器）。请查看这篇文章《使用Android Studio开发Flutter应用程序的小窍门》（https://medium.com/@liewjuntung/tips-on-using-android-studio-to-develop-flutter-apps-9e42c047b7f4）。&lt;/p&gt;&lt;p&gt;我觉得VS Code中应该有类似的东西。这似乎微不足道，但我觉得这个快捷键十分有用。使用热重载和Alt + Enter，我可以在几分钟内做好一个画面，甚至可以在用户界面上做实验。&lt;/p&gt;&lt;p&gt;• 将debugPaintSizeEnabled设置为true。这会在所有用户界面的窗体周围显示鲜艳的边框。实际上这个功能用得并不如想象得多，但是当布局出现问题时该功能确实非常有用。&lt;/p&gt;&lt;h1&gt;2&lt;strong&gt;架构&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;我在选择架构时做了如下几件事：&lt;/p&gt;&lt;p&gt;• 看了几遍Brian Egan的这个演讲《保持简单、有状态：Flutter应用的架构》（https://www.youtube.com/watch?v&#x3D;zKXz3pUkw9A&amp;amp;feature&#x3D;youtu.be）。&lt;/p&gt;&lt;p&gt;• 读了几遍Eric Windmill的这篇文章《有效地使用Flutter的继承窗体》（https://ericwindmill.com/posts/inherited_widget/）。&lt;/p&gt;&lt;p&gt;• 阅读Flutter架构示例：http://fluttersamples.com/。&lt;/p&gt;&lt;p&gt;最终，我按照Eric的建议使用了一种名为Lifting State Up的架构模式，这是Redux的第一步，看起来非常诱人。然而，Redux对我来说遥不可及。由于开发时间紧迫，学习和尝试Redux似乎太令人生畏了。&lt;/p&gt;&lt;p&gt;一路走来，我从Stack Overflowers上的人解答的关于架构的问题中得到了许多帮助。这让我想到了社区。&lt;/p&gt;&lt;h1&gt;3&lt;strong&gt;社区&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;有关Flutter的开源社区非常多元化，并且非常乐于助人，让我看到了人类的希望（特别是在这些疯狂的时期）。&lt;/p&gt;&lt;p&gt;举个例子，当时我正在使用Romain Rastel编写的flutter_slidable软件包，而且我还提了一个改善建议，仅仅48小时之内他就实现了一个比我想象的更好的解决方案......类似这样的事情比比皆是。&lt;/p&gt;&lt;p&gt;我唯一遗憾的是，我一直忙于移植工作，与我收到的帮助相比，我给予别人的远远不够。&lt;/p&gt;&lt;h1&gt;4&lt;strong&gt;性能&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;总的来说，参加了内部测试的用户对Flutter的“活泼”非常满意。在同一台iOS设备上，同时并排运行iOS应用与Flutter应用时，并没有看到性能明显下降。&lt;/p&gt;&lt;p&gt;我们的应用没有很多需要大量图形的任务，但有一个功能需要从数百个JSON文件读取数据，然后对该数据进行一系列浮点计算，在该功能中Flutter的应用明显更快。&lt;/p&gt;&lt;p&gt;我没有花时间去研究导致差异的究竟是是读取文件的功能、还是JSON解析或者是日期处理等等，因此我无法做出类别上的判断，但我感觉这无疑是Flutter桂冠上的一颗明珠。&lt;/p&gt;&lt;p&gt;很期待看到其他人能给出怎样的性能测试数据。&lt;/p&gt;&lt;h1&gt;5&lt;strong&gt;语言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;Flutter使用Dart，这种语言已经在Google之外萎靡不振，直到最近才随着Flutter再次兴起。&lt;/p&gt;&lt;p&gt;然而，这门语言很成熟且易于学习。幸运的是，我在加入Dart队伍时，拥有更强大的类型功能的Dart 2.0刚刚出现，所以无需再在代码中不断地敲“new”关键字了。&lt;/p&gt;&lt;p&gt;Dart可能没有Swift和Kotlin所拥有的Null和非Null类型，但我很喜欢它的简单性。 例如：&lt;/p&gt;&lt;p&gt;• 以下划线开头的函数为私有；&lt;/p&gt;&lt;p&gt;• 自动格式化意味着不必再头疼我的习惯问题——我喜欢在末尾加上逗号将参数分行；&lt;/p&gt;&lt;p&gt;• 包管理很简单。&lt;/p&gt;&lt;p&gt;还有很多很多。我喜欢这些功能，也许其他人可能不喜欢。对我而言，最重要的是我可以更快地（用奇怪但很愉悦的方式）实现功能。&lt;/p&gt;&lt;h1&gt;6&lt;strong&gt;还缺少什么？&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;没有太多缺少的东西。在原生iOS应用中：&lt;/p&gt;&lt;p&gt;• 我在XCode中使用了很多Targets，并结合一堆#define创建bundle ID不同的各种版本的应用。我不知道在Flutter中怎么处理这个问题；&lt;/p&gt;&lt;p&gt;• 我在iOS中使用了一个很好的第三方日志框架，叫做CocoaLumberjack。还没找到能代替它的东西；&lt;/p&gt;&lt;p&gt;• 我使用UIKit框架中的WKWebView来加载并渲染本地的HTML文件（如使用条款、隐私政策等）。我在Flutter中没找到正确的包来实现这个功能。最后只能使用一个包HTML2MD将HTML转换成Markdown再使用另一个包flutter_markdown来渲染；&lt;/p&gt;&lt;p&gt;• 我使用AVFoundation框架，在单一的全屏视图中实现条码扫描、QR二维码扫描和拍照。在Flutter中我还不能如此细致地进行控制，虽然它的Camera包很适合拍照，另一个由facundomedica编写的包fast_qr_reader_view很适合扫描条码。在安卓设备上，这个包与Firebase的ML Kit配合从Camera包中获取实时图像。&lt;/p&gt;&lt;h1&gt;7&lt;strong&gt;结论&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;读到这里，你肯定不会惊讶为什么我如此赞美Flutter。到目前为止：&lt;/p&gt;&lt;p&gt;• Flutter的用户界面几乎与原生安卓和原生iOS的用户界面没有区别；&lt;/p&gt;&lt;p&gt;• 得益于Flutter用户界面的构建方式，利用Flutter制作新功能比原生代码更快；&lt;/p&gt;&lt;p&gt;• 测试没有收到有关性能劣化的报告；&lt;/p&gt;&lt;p&gt;• iOS版和安卓版之间的代码共享目前达到了90%以上。我还没有集成苹果的HealthKit或Google Fit，但我觉得共享率应该不会下降太多。&lt;/p&gt;&lt;p&gt;尽管Flutter还不成熟（2018年5月才发布正式版），但对于我来说它已经足够强壮了。&lt;/p&gt;&lt;p&gt;我遇到的唯一问题就是Dart同步读取目录的函数List Sync在最近的一次发布中出现了崩溃。我将它加到了Flutter在Github上的代码库中，然后改用异步版本。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;原文：https://medium.com/flutter-community/porting-a-75-000-line-native-ios-app-to-flutter-57c6571c57b4&lt;/p&gt;&lt;p&gt;作者：Gary Hunter，Native iOS &amp;amp; Flutter的开发者。&lt;/p&gt;&lt;p&gt;译者：弯月，责编：胡巍巍&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;“征稿啦！”&lt;/p&gt;&lt;p&gt;CSDN 公众号秉持着「与千万技术人共成长」理念，不仅以「极客头条」、「畅言」栏目在第一时间以技术人的独特视角描述技术人关心的行业焦点事件，更有「技术头条」专栏，深度解读行业内的热门技术与场景应用，让所有的开发者紧跟技术潮流，保持警醒的技术嗅觉，对行业趋势、技术有更为全面的认知。&lt;/p&gt;&lt;p&gt;如果你有优质的文章，或是行业热点事件、技术趋势的真知灼见，或是深度的应用实践、场景方案等的新见解，欢迎联系 CSDN 投稿，联系方式：微信（guorui_1118，请备注投稿+姓名+公司职位），邮箱（guorui@csdn.net）。&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;',
      groupId: '6615151835814560264',
      itemId: '6615151835814560264',
      type: 2,
      subInfo: {
        isOriginal: true,
        source: 'CSDN',
        time: '2018-10-22 20:08:41'
      },
      tagInfo: {
        tags: [{"name":"iOS"},{"name":"Android"},{"name":"XML"},{"name":"Android Studio"},{"name":"文章"},{"name":"Java"},{"name":"Swift语言"},{"name":"Objective-C"},{"name":"微软"},{"name":"CSDN"},{"name":"亚马逊公司"},{"name":"澳大利亚"},{"name":"CSS"},{"name":"黑客"}],
        groupId: '6615151835814560264',
        itemId: '6615151835814560264',
        repin: 0,
      },
      has_extern_link: 0,
      coverImg: 'http://p9.pstatp.com/list/300x196/pgc-image/15402100579518055b96fc0.jpg'
    },
    commentInfo: {
      groupId: '6615151835814560264',
      itemId: '6615151835814560264',
      comments_count: 84,
      ban_comment: 0
    },
    mediaInfo: {
      uid: '3905900971',
      name: 'CSDN',
      avatar: '//p7.pstatp.com/large/fefd0000308b9bf81ea0',
      openUrl: '/c/user/3905900971/',
      follow: false
    },
    pgcInfo: [{"item_id":"6675177213131751949","url":"/item/6675177213131751949","title":"携号转网艰难走到了第九个年头，究竟如何从技术上攻克？"},{"item_id":"6675177011683525123","url":"/item/6675177011683525123","title":"Android 开发未来的出路何在？ | 技术头条"},{"item_id":"6675176884474479115","url":"/item/6675176884474479115","title":"阿里每天纳税超1.4亿元；余承东：苹果很难和华为竞争 | 极客头条"},{"item_id":"6674880424088437252","url":"/item/6674880424088437252","title":"常见六大 Web 安全攻防解析 | 技术头条"}],
    feedInfo: {
      url: '/api/pc/feed/',
      category: '__all__',
      initList: []
    },
    shareInfo: {
      shareUrl: 'https://m.toutiao.com/item/6615151835814560264/',
      abstract: '很少有文章，介绍如何将大型应用，移植到Flutter。而本文的作者——一位来自澳洲的NativeiOS&amp;Flutter的开发者，尝试这样做了，结果让他十分惊讶。'.replace(/<br \/>/ig, ''),
      commentCount: '84',
      ban_comment: 0
    }
  };</script><script>var imgUrl = '/c/m45kdb8hypmgysc3wd0e9dki6uundefined3p5qegfs35vu9rad5vpeiclcmi/';</script><script>tac='i)69pu9hd91s!i#1bns"0,<8~z|\x7f@QGNCJF[\\^D\\KFYSk~^WSZhg,(lfi~ah`{md"inb|1d<,%Dscafgd"in,8[xtm}nLzNEGQMKAdGG^NTY\x1ckgd"inb<b|1d<g,&TboLr{m,(\x02)!jx-2n&vr$testxg,%@tug{mn ,%vrfkbm[!cb|'</script><script type=text/javascript crossorigin=anonymous src=//s3.pstatp.com/toutiao/static/js/vendor.3e7f634128257bf2abef.js></script><script type=text/javascript crossorigin=anonymous src=//s3b.pstatp.com/toutiao/static/js/page/index_node/index.8a453c49493a801fc8a8.js></script><script type=text/javascript crossorigin=anonymous src=//s3.pstatp.com/toutiao/static/js/ttstatistics.0a47aba3bfcdf3f4f39f.js></script><style>a[href*='//www.cnzz.com/stat'] {
      display: none!important;
  }</style><script src="//s95.cnzz.com/z_stat.php?id=1259612802&web_id=1259612802" language=JavaScript></script><script>if (window.ttAnalysis) {
    ttAnalysis.setup({
      c: 'detail_article'
    });
    ttAnalysis.send('pageview', {});
  }</script><script>document.getElementsByTagName('body')[0].addEventListener('click', function(e) {
    var target = e.target,
        ga_event,
        ga_category,
        ga_label,
        ga_value;
    while(target && target.nodeName.toUpperCase() !== 'BODY') {
      ga_event = target.getAttribute('ga_event');
      ga_category = target.getAttribute('ga_category') || 'detail_article';
      ga_label = target.getAttribute('ga_label') || '';
      ga_value = target.getAttribute('ga_value') || 1;
      ga_event && window._czc && _czc.push(﻿["_trackEvent", ga_category, ga_event, ga_label, ga_value]);
      ga_event && window.ttAnalysis && ttAnalysis.send('event', { ev: ga_event });
      target = target.parentNode;
    }
});</script></body></html>