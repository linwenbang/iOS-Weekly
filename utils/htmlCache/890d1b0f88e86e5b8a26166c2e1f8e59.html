
<!DOCTYPE html>
<html class="no-js" lang="zh">
  <head>
<meta charset="utf-8">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="alternate" href="https://www.desgard.com" hreflang="pt-BR">
<link href="http://gmpg.org/xfn/11" rel="profile">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="theme-color" content="#005344">
<title>Guardia · 瓜地</title>
<meta name="google-site-verification" content="zS1dSn20XtA4FJYEOQLXqI0boxZdMnJ2g3beje-cl20">
<meta name="description" content="I write many code to write less code.💻">
<meta name="keywords" content="">
<!-- Social: Facebook / Open Graph -->
<meta property="og:url" content="https://www.desgard.com/summary-2018/">
<meta property="og:title" content="做点有意思的事情 - 2018 年小结 | Gua">
<meta property="og:description" content="I write many code to write less code.💻">
<meta property="og:site_name" content="Desgard_Duan">
<meta property="og:locale" content="pt_BR">
<meta property="og:type" content="website">
<meta property="og:author" content="https://www.facebook.com/desgard.duan">
<meta property="og:image" content="https://www.desgard.com">
<!-- Social: Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@nandomoreirame">
<meta name="twitter:domain" content="https://www.desgard.com">
<meta name="twitter:title" content="做点有意思的事情 - 2018 年小结 | Gua">
<meta name="twitter:description" content="I write many code to write less code.💻">
<meta name="twitter:image:src" content="https://www.desgard.com">
<!-- Favicons -->
<link rel="apple-touch-icon" sizes="114x114" href="https://www.desgard.com/ico/apple-touch-icon-114.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://www.desgard.com/ico/apple-touch-icon-72.png">
<link rel="apple-touch-icon" href="https://www.desgard.com/ico/apple-touch-icon-57.png">
<link rel="shortcut icon" href="https://www.desgard.com/ico/favicon.png">
<!-- rel prev and next -->
<!-- Canonical link tag -->
<link rel="canonical" href="https://www.desgard.com/summary-2018/">
<link rel="alternate" type="application/rss+xml" title="Gua" href="https://www.desgard.comfeed.xml">
<link href="/assets/css/main.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
<script src="/assets/js/main.js"></script>
<script src="/assets/js/jquery-3.1.js"></script>
<script src="/assets/js/jquery.rotate.js"></script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Website",
  "publisher": "www.desgard.com",
  "url": "http://www.desgard.com/",
  "description": "瓜地"
}
</script>
<script type="text/javascript">
  var disqus_shortname = 'desgard',
      baseurl          = '';
</script>
<!--
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-52446115-1']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c5a8123bc51782a3083a631ed9ff50e4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true
    }
  });
</script>
  </head>
  <body class=" summary-2018">
    <header class="header">
  <div class="container">
    <h1><a href="/"><strong>desgard</strong>.com</a></h1>
    <nav class="navbar">
      <ul>
        <!-- <li>
          <a href="/">
            <i class="fa fa-search"></i>
          </a>
        </li> -->
        <li>
          <a href="#!" data-modal="modalSearch" onclick="show_search_view(true)">
            <i class="fa fa-search">
            </i>
          </a>
        </li>
        <li><a href="/comment " target="_blank"><i class="fa fa-comments"></i></a></li>
        <li><a href="/feed.xml" target="_blank"><i class="fa fa-feed"></i></a></li>
      </ul>
    </nav>
  </div>
</header>
    <main class="wrapper container" itemprop="mainContentOfPage" itemscope="itemscope" itemtype="http://schema.org/Blog">
      <article class="post" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
  <header class="post-header">
    <h1>做点有意思的事情 - 2018 年小结</h1>
    <div class="post-meta">
      <time datetime="2015-10-13">
        <i class="fa fa-calendar-o"></i> <time datetime="2019-01-01"> 2019-01-01
      </time>
      <span>
        <i class="fa fa-comments"></i> <a href="#container">Comment me!</a>
      </span>
      <span>
<!--
        <i class="fa fa-folder-open-o"></i> 
-->
      </span>
    </div>
  </header>
  <p>又到了写年终总结的时候，2018 年感觉自己做了很多有意思的事情，但是感觉时间仍旧不够用，就连写博客总结的时间都被剥夺了。希望 2019 年能多挤一些时间出来留给学习与总结。因为很多东西的总结是关键的，可能这是适用于自身学习的方法论。 🤣</p>
<h2 id="积累">积累</h2>
<p><img src="../assets/images/blog/15459218472423/IMG_0606.jpg" alt="IMG_0606" /></p>
<h3 id="读书">读书</h3>
<p>翻了一下 2018 的豆瓣成绩，技术类 3 本，读物类 19 本（之前懒得记录，12月份一块记了一波豆瓣 😆），读书居然比去年少了 2 本，个人总结原因有二：</p>
<ol>
  <li>上班通勤大幅度缩短，现在距离公司 800 米，每天早上的缝隙时间就变得很少；</li>
  <li>工作时长相比以前增长，并且有挑战性的事情变多，更多的时间投入到了技术的学习和代码的实现。</li>
</ol>
<p>这里说几本比较有意思的书：</p>
<ol>
  <li><em>《白金数据》</em>：东野的伦理类与科技类小说，虽然不是很精彩，但是将科技侦破与政治相结合，也反映了很多社会问题。</li>
  <li><em>《长夜难明》</em>：强烈推荐这本书，非常棒的动机推理故事。读完之后的感觉，就像之前看<em>《嫌疑人X的献身》</em>、<em>《恶意》</em>一样，直到最后才浮现真想；</li>
  <li><em>《腾讯传》</em>：不看腾讯的历史，你很难想象 QQ 做下去的艰辛创业史，面临多个强大的竞品如何保住自身的地位，如何实现 IM 软件在商业化上的成功变现。另外：QQ 秀、Qzone、各种钻对于九零后的我们太回忆杀了。另外，十分不建议看<em>《阿里传》</em>、<em>《蚂蚁金服》</em>，这两本书实在是不客观。</li>
  <li><em>《Ruby基础教程》</em>：工作需要去学这么一个语言来做工具链，所以看了看这本入门书。对新手很友好，上手很快，但是有些枯燥。最近开始看 <em>《Ruby元编程》</em>，有一定的基础要求，但是比这本有趣的多。</li>
</ol>
<h3 id="github-统计">GitHub 统计</h3>
<p>GitHub 全年贡献 420 Contributions，日均 1.14 次，与去年 GitHub 的贡献对比大打折扣。</p>
<p>由于年中更换了工作，适应新工作就没有像之前那么频繁。另外，<strong>Sepicat</strong> 在 5 月份将全部代码迁移到了 <strong>BitBucket</strong>，所以所有关于 Sepicat 开发的 GitHub Contribution 就全部停滞了。</p>
<h3 id="个人-app---sepicat-的迭代">个人 APP - Sepicat 的迭代</h3>
<p>Sepicat 自今年 4 月份发布已经迭代至 1.2.8，其中经历了 11 个版本。在这 11 个小版本中我做了很多自己认为很帅的需求，下面展示一下我认为最炫酷的几个功能。</p>
<ol>
  <li>GitHub 个人 QRCode 名片；</li>
  <li>Sepicat Theme 程序员信仰主题；</li>
  <li>Star Box - Star 收藏盒子快速检索；</li>
  <li>Trending 广场，用于发现更多有趣的 Repository；</li>
</ol>
<p>如果你喜欢 GitHub 并且也喜欢 Sepicat 的风格，也可以来 App Store 购买支持下我。</p>
<p><img src="../assets/images/blog/15459218472423/15464218217325.jpg" alt="" /></p>
<h2 id="全年心得">全年心得</h2>
<h3 id="爱奇艺的积累">爱奇艺的积累</h3>
<p>2018 年 5 月份我经历了第一次跳槽，结束了在爱奇艺 1 年多的经历。非常幸运的从 2016 年 8 月份的实习一直到校招 Offer 进入爱奇艺电视果团队，亲眼见证了电视果这个硬件从 10w/年 到 50w/年 的突破。整个团队的小伙伴也十分给力，很有创业精神。爱奇艺电视果 APP 从 3.0 迭代到 5.0 的整个过程，硬件从最简单的 DLNA 协议一直到 4G 版本可插卡功能。在 3 个人支撑日活近 10 万 App 的迭代过程中，我个人也学到了很多东西。</p>
<p><img src="../assets/images/blog/15459218472423/15464202980952.jpg" alt="" /></p>
<p>清明节过后，开始找第二份工作。其实刚开始决定找工作的时候有一些跟风，Joy、BS 和大左他们这些我认为在同龄人里钦佩的一些人都已经跳槽，并且其工作内容都已切换成自己认为理想的方向，所以自己也有了跳槽的打算。另外，个人也希望参与一款体量大的 APP 开发，所以想去尝试一下。经过了多方面的对比，发现头条是一个好的去处。</p>
<h3 id="抖音的面试经历">抖音的面试经历</h3>
<p>这里我尽可能的还原一下抖音面试的全部过程，当然团队还在扩建，移动端、前端和后端都在招人。如果有兴趣也可以在下面评论或者其他方式联系我。</p>
<h4 id="一面">一面</h4>
<ul>
  <li>HTTP 和 HTTPS 的区别以及 HTTPS 中的 TLS和 SSL 细节。</li>
  <li>SSL 中的对称加密和非对称加密。</li>
  <li>DLNA 的 SSDP 发现流程。</li>
  <li>ObjC 问题集：<code class="highlighter-rouge">NSObject</code> 结构；isa 指针结构；引用计数相关；block 类型、特点及循环引用注意点。</li>
  <li>聊了下之前的项目经验；</li>
  <li>聊了下 Sepicat 中的一些动画实现；</li>
  <li>ASDK 渲染大致原理；RunLoop 各个 Mode 差异；</li>
  <li><code class="highlighter-rouge">SDWebImage</code> 中关于 Download 部分的实现；</li>
</ul>
<p>Coding 了一道算法题：找出一个数只交换两个数字的位置，求出下一个排列数。例如：</p>
<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="sr">//</span> <span class="err">交换了</span> <span class="mi">2</span> <span class="err">和</span> <span class="mi">3</span> <span class="err">的位置</span>
<span class="sb">`123`</span> <span class="o">-&gt;</span> <span class="sb">`132`</span>
<span class="sr">//</span> <span class="err">交换了</span> <span class="mi">1</span> <span class="err">和</span> <span class="mi">5</span> <span class="err">的位置</span>
<span class="sb">`1359727`</span> <span class="o">-&gt;</span> <span class="sb">`1359772`</span></code></pre></figure>
<p>考虑到这种情况可能不出现，例如如果是 <code class="highlighter-rouge">321</code> 的话，就不存在这种数。</p>
<p>这题乍一看和 <a href="https://leetcode.com/problems/next-permutation/">Leetcode31 Next Permutation</a> 很像，但是多了一个只交换两个数字的限定。但是我们可以继续考虑 Next Permutation 的过程 - 从低位向高位查询，找到第一个字典序递减的数 <code class="highlighter-rouge">s[i] &lt; s[j]</code>(<code class="highlighter-rouge">j</code> 在低位，<code class="highlighter-rouge">i</code> 在高位)，如果不存在则进行当前序列的逆序。<strong>如果找到这个递减数对就将其交换</strong>，当然在原题目里还会对 <code class="highlighter-rouge">j</code> 右边的数做降序排序，由于我们这边只需要将递减对进行交换，因为我们要保证<strong>只交换一次</strong>。</p>
<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &lt;iostream&gt;
</span>
<span class="cp">#include &lt;vector&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">next_perm</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">j</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">num</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="n">j</span> <span class="o">--</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 无下一个数</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">num</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="n">i</span> <span class="o">++</span><span class="p">;</span>
    <span class="n">i</span> <span class="o">--</span> <span class="p">;</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
<span class="p">}</span>
<span class="c1">// Unit Test 代码</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="n">test_number</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">current_num</span> <span class="o">=</span> <span class="n">test_number</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">num</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">current_num</span> <span class="o">%</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">digit</span> <span class="o">=</span> <span class="n">current_num</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span>
        <span class="n">current_num</span> <span class="o">/=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="n">num</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">digit</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">reverse</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">next_perm</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"- Test Number: "</span> <span class="o">&lt;&lt;</span> <span class="n">test_number</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"- Result: "</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">res</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"No"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">item</span><span class="o">:</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">item</span><span class="p">;</span> <span class="p">}</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//- Test Number: 123</span>
    <span class="c1">//- Result: 132</span>
    <span class="n">test</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
    <span class="c1">//- Test Number: 1359727</span>
    <span class="c1">//- Result: 1359772</span>
    <span class="n">test</span><span class="p">(</span><span class="mi">1359727</span><span class="p">);</span>
    <span class="c1">//- Test Number: 3214</span>
    <span class="c1">//- Result: 3241</span>
    <span class="n">test</span><span class="p">(</span><span class="mi">3214</span><span class="p">);</span>
    <span class="c1">//- Test Number: 2434442</span>
    <span class="c1">//- Result: 2444432</span>
    <span class="n">test</span><span class="p">(</span><span class="mi">2434442</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>
<h4 id="二面">二面</h4>
<ul>
  <li>设计一个异步加载图片缓存库及其优化：这里主要讲了一遍 <code class="highlighter-rouge">SDWebImage</code> 的完整流程，画了整个黑板，并且说了一下可以在 Cache 部分把 <code class="highlighter-rouge">YYCache</code> 的思路拿过来进行优化；</li>
  <li>完整讲了一遍 <code class="highlighter-rouge">fishhook</code> 的原理，可以详细看之前写的两篇 <code class="highlighter-rouge">fishhook</code> 源码解析；</li>
  <li><code class="highlighter-rouge">NSAutoreleasePool</code> 的原理，链表结构及自动释放原理。</li>
  <li>项目经验和独立 APP 开发的目的；</li>
</ul>
<p>Coding 了一个算法：<code class="highlighter-rouge">n</code> 个数，求某段区间的最小值 * 该区间所有元素之和的最大值以及这个区间。样例：</p>
<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">3</span> <span class="mi">1</span> <span class="mi">6</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">2</span></code></pre></figure>
<p>求得最终结果为 <code class="highlighter-rouge">60 = (6 + 4 + 5) * 4</code>，且这个区间是 <code class="highlighter-rouge">[6, 4, 5]</code>。在面试过程中，其实我没有写出这题，直到面试官在面试最后给我提示是<strong>单调栈</strong>，才想起来这是对单一节点扩展的经典题 🤣 。我们通过维护一个单调递减栈，保证栈顶是最大值，然后每一个节点维护一个连续区间，这个区间的目的是用来记录之后的元素向前延伸的结果。拿 Sample 举例子：</p>
<p><img src="../assets/images/blog/15459218472423/15464355726025.jpg" alt="" /></p>
<p>我们在这个过程中可以总结两个结论：</p>
<ol>
  <li>如果新元素已经进入单调栈中，说明它的向左扩展就已经确定下来了；</li>
  <li>如果一个就元素被弹栈了，那么说明它的向右扩展就确定下来了；</li>
</ol>
<p><strong>弹栈的条件就是如果新元素大于当前栈顶元素，那么就可以扩展栈内全部元素，否则在栈中找到所有小于等于这个新元素的旧结点，来扩展它的向右扩展。</strong></p>
<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &lt;iostream&gt;
</span>
<span class="cp">#include &lt;vector&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">node</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">val</span><span class="p">;</span>
    <span class="n">node</span><span class="p">(</span><span class="kt">int</span> <span class="n">ll</span><span class="p">,</span> <span class="kt">int</span> <span class="n">rr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">vv</span><span class="p">)</span><span class="o">:</span> <span class="n">l</span><span class="p">(</span><span class="n">ll</span><span class="p">),</span> <span class="n">r</span><span class="p">(</span><span class="n">rr</span><span class="p">),</span> <span class="n">val</span><span class="p">(</span><span class="n">vv</span><span class="p">)</span> <span class="p">{};</span>
    <span class="n">node</span> <span class="n">max</span><span class="p">(</span><span class="n">node</span> <span class="n">item</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">sum</span><span class="p">);</span>
    <span class="kt">void</span> <span class="n">prt</span><span class="p">();</span>
<span class="p">};</span>
<span class="n">node</span> <span class="n">node</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">node</span> <span class="n">item</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">sum</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">current</span> <span class="o">=</span> <span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="k">this</span> <span class="o">-&gt;</span> <span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">sum</span><span class="p">[</span><span class="k">this</span> <span class="o">-&gt;</span> <span class="n">l</span><span class="p">])</span> <span class="o">*</span> <span class="k">this</span> <span class="o">-&gt;</span> <span class="n">val</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">other</span> <span class="o">=</span> <span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="n">item</span><span class="p">.</span><span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">sum</span><span class="p">[</span><span class="n">item</span><span class="p">.</span><span class="n">l</span><span class="p">])</span> <span class="o">*</span> <span class="n">item</span><span class="p">.</span><span class="n">val</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">current</span> <span class="o">&gt;</span> <span class="n">other</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">return</span> <span class="n">item</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">node</span><span class="o">::</span><span class="n">prt</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">-&gt;</span> <span class="n">val</span> <span class="o">&lt;&lt;</span> <span class="s">" - ("</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">-&gt;</span> <span class="n">l</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">-&gt;</span> <span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">prt</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">node</span><span class="o">&gt;</span> <span class="n">arr</span><span class="p">,</span> <span class="n">string</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">" --- "</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">" --- "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">item</span><span class="o">:</span> <span class="n">arr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">item</span><span class="p">.</span><span class="n">val</span> <span class="o">&lt;&lt;</span> <span class="s">" - ("</span> <span class="o">&lt;&lt;</span> <span class="n">item</span><span class="p">.</span><span class="n">l</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">item</span><span class="p">.</span><span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">monotoic_stack</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">sum</span><span class="p">(</span><span class="n">len</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">node</span><span class="o">&gt;</span> <span class="n">st</span><span class="p">,</span> <span class="n">res</span><span class="p">;</span>
    <span class="c1">// 初始化 sum 数组</span>
    <span class="n">sum</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="o">++</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sum</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">sum</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// 初始化单调栈</span>
    <span class="n">node</span> <span class="n">de</span> <span class="o">=</span> <span class="n">node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">st</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">de</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="o">++</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">node</span> <span class="n">top</span> <span class="o">=</span> <span class="n">st</span><span class="p">.</span><span class="n">back</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="c1">// 出栈所有的确定右扩展的元素</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">st</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">top</span><span class="p">.</span><span class="n">val</span> <span class="o">&gt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
            <span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">top</span><span class="p">);</span>
            <span class="n">l</span> <span class="o">=</span> <span class="n">top</span><span class="p">.</span><span class="n">l</span><span class="p">;</span>
            <span class="n">st</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">st</span><span class="p">.</span><span class="n">back</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">st</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">st</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">r</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">st</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">st</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">item</span><span class="o">:</span> <span class="n">st</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">st</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">node</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">item</span><span class="o">:</span> <span class="n">res</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">ret</span><span class="p">.</span><span class="n">prt</span><span class="p">();</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="n">ret</span><span class="p">.</span><span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">sum</span><span class="p">[</span><span class="n">ret</span><span class="p">.</span><span class="n">l</span><span class="p">])</span> <span class="o">*</span> <span class="n">ret</span><span class="p">.</span><span class="n">val</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">test1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
    <span class="n">monotoic_stack</span><span class="p">(</span><span class="n">test1</span><span class="p">);</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">test2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">};</span>
    <span class="n">monotoic_stack</span><span class="p">(</span><span class="n">test2</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>
<h4 id="三面">三面</h4>
<p>三面就是总监面了，主要就是考察综合素质以及横向技术栈，是由前 Musical.ly 的负责人作为面试官。大概讲了一下从大学竞赛到实习再到工作的经历，讲了技术栈的横向积累。并且问了一个实际的 Case 如何实现，原意大概是如何模拟 Tweet 中缓存上次浏览的 Cell 并上拉刷新，也问了一些图片预加载、数据库 DB 如何根据这种场景来设计等问题。</p>
<h4 id="总结">总结</h4>
<p>头条的面试更多的是考察基本功和已掌握的知识是不是理解的透彻，没有奇怪的问题。但是对算法的考察力度还是相当大的，需要现场 Coding 自己去想 Corner Case，但是面试官看重的是解题的思路和过程，以及代码的熟练度，其实结果往往能通过 80% 的 Case 就好，毕竟谁都不可能每次都是零 Bug。</p>
<h3 id="在抖音半年来的感受">在抖音半年来的感受</h3>
<p><strong>首先说头条 80% 的价值观我都十分赞同</strong>，我非常认同这里的工程师文化，产品需求评审的时候，研发可以随时的 Challenge 产品，如果沟通觉得合理可能会给你的想法开一个 ABTest 丢到线上去做实验。所有出现的问题都先从及时止损、解决问题的角度考虑，再去思考如何优化。单周发版的超快速节奏可以将很多好玩的新功能快速上线、及时试错。就是在这种节奏下，头条系的产品才能常年霸榜，总出爆款。</p>
<p>在抖音我亲眼见证了抖音 DAU 从 1 亿做到 2 亿，TikTok DAU 狂飙到千万的过程。也见证了抖音 iOS 团队从 40 人到现在的 80 人。DAU 数据以及用户留存转化数据真的是一个工程师干活的动力，很有幸可以体验到这种感觉。</p>
<p><img src="../assets/images/blog/15459218472423/15464794685426.jpg" alt="" /></p>
<p>另外，在抖音的基础技术线，和同事一起完成了多仓效率开发的工具链 - MBox（如果是同事可以去双月刊搜下😁），并且正在构建一个组件化版本控制的平台，预计这个双月就会上线使用。通过对效率工具和调试工具的输出，也算是接触到了全栈开发工程师的日常。总的来说，<strong>头条是一个幸福感很高、工作很有挑战的地方</strong>。</p>
<h2 id="2019-计划">2019 计划</h2>
<ul>
  <li>要在 iOS 组件化、CI、APM 性能调优上深钻，达到高工的水平；</li>
  <li>Sepicat 迭代到 2.0，新增 ISSUE 查看回复功能，主打交流模块；</li>
  <li>博客持续更新，今年打算写一个小专栏，方向是 iOS 组件化及方案；</li>
  <li>制作一个新 APP，目前卖个关子；</li>
  <li>继续输出开源社区，保持 GitHub 活跃；</li>
  <li>读书；</li>
</ul>
<p>2019 一起努力💪。</p>
  <footer class="post-footer">
    <section class="author">
      <h4>Desgard_Duan</h4>
      <p>I write many code to write less code.💻</p>
    </section>
<aside class="share">
  <h4>Share this.</h4>
  <a href="http://twitter.com/share?text=《做点有意思的事情 - 2018 年小结》 -- Guardia · 瓜地&amp;url=https://www.desgard.com/summary-2018/"
  onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-twitter-square"></i>
  </a>
  <a href="http://v.t.sina.com.cn/share/share.php?url=https://www.desgard.com/summary-2018/&amp;title=《做点有意思的事情 - 2018 年小结》 —— Guardia · 瓜地" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-weibo"></i>
  </a>
</aside>
      <aside id="comments" class="disqus">
  <div id="container"></div>
  <link rel="stylesheet" href="/assets/css/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <div id='gitalk-container'></div>
  <script>
    const gitalk = new Gitalk({
      id: "https://www.desgard.com/summary-2018/",
      clientID: 'e2612df42f3f2a83e71c',
      clientSecret: 'b53e85b314bb24a6d06773e48bbb62a4de3b8b3a',
      repo: 'desgard.github.com',
      owner: 'Desgard',
      admin: ['Desgard'],
      // facebook-like distraction free mode
      distractionFreeMode: false
    })
    gitalk.render('gitalk-container')
  </script>
</aside>
  </footer>
</article>
    </main>
<footer class="footer">
  <div class="container">
    <ul class="icons">
      <li>
        <a href="https://github.com/desgard" class="icon-github" target="_blank">
          <i class="fa fa-github"></i>
        </a>
      </li>
      <li>
        <a href="https://www.facebook.com/desgard.duan" class="icon-facebook" target="_blank">
          <i class="fa fa-facebook"></i>
        </a>
      </li>
      <li>
        <a href="https://twitter.com/Desgard_Duan" class="icon-twitter" target="_blank">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
      <li>
        <a href="https://stackoverflow.com/users/6119149/desgard-duan" class="icon-github" target="_blank">
          <i class="fa fa-stack-overflow"></i>
        </a>
      </li>
      <li>
        <a href="https://weibo.com/desgard" class="icon-instagram" target="_blank">
          <i class="fa fa-weibo"></i>
        </a>
      </li>
    </ul>
    <p>
      <q>I write many code to write less code.💻</q>
      <small>– Gua</small>
    </p>
    <small class="clearfix">
      Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a> • <a href="https://github.com/desgard" target="_blank">Open source <i class="fa fa-heart"></i></a>
    </small>
  </div>
</footer>
<a class="scroll-up fa fa-chevron-up bounce" href="#" data-position="0"></a>
    <div id="modalSearch" class="modal">
  <div class="modal__overlay"></div>
  <div class="modal__content">
    <a href="#" class="modal-close" onclick="show_search_view(false)">&times;</a>
    <div class="search-container">
      <input type="text" id="search-input" placeholder="Search articles">
      <ul id="results-container"></ul>
    </div>
  </div>
</div>
<!-- Configuration -->
<script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json'
  })
  function show_search_view(is_show) {
    var search_view = document.getElementById("modalSearch");
    search_view.className = is_show ? "modal modal--open" : "modal";
  }
</script>
  </body>
  <script>
    var link = "" ;
    var os = function() {  
      var ua = navigator.userAgent,  
      isWindowsPhone = /(?:Windows Phone)/.test(ua),  
      isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone,   
      isAndroid = /(?:Android)/.test(ua),   
      isFireFox = /(?:Firefox)/.test(ua),   
      isChrome = /(?:Chrome|CriOS)/.test(ua),  
      isTablet = /(?:iPad|PlayBook)/.test(ua) || (isAndroid && !/(?:Mobile)/.test(ua)) || (isFireFox && /(?:Tablet)/.test(ua)),  
      isPhone = /(?:iPhone)/.test(ua) && !isTablet,  
      isPc = !isPhone && !isAndroid && !isSymbian;  
      return {  
        isTablet: isTablet,  
        isPhone: isPhone,  
        isAndroid : isAndroid,  
        isPc : isPc  
      };  
    }();  
    if (link.length > 0) {
      if (os.isAndroid || os.isPhone) {
        location.replace(link);
      }
    }
  </script>
</html>