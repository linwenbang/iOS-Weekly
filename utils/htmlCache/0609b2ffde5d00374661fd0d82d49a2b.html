<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>The ultimate VIPER architecture tutorial - The.Swift.Dev.</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=64c8bc839a" />

    <meta name="description" content="Learn how to write scalable iOS code using the VIPER architecture with some MVVM and MVC tricks and coordinators in mind." />
    <link rel="shortcut icon" href="/favicon.png" type="image/png" />
    <link rel="canonical" href="https://theswiftdev.com/2018/03/12/the-ultimate-viper-architecture-tutorial/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://theswiftdev.com/2018/03/12/the-ultimate-viper-architecture-tutorial/amp/" />
    
    <meta property="og:site_name" content="The.Swift.Dev." />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="The ultimate VIPER architecture tutorial - The.Swift.Dev." />
    <meta property="og:description" content="Learn how to write scalable iOS code using the VIPER architecture with some MVVM and MVC tricks and coordinators in mind." />
    <meta property="og:url" content="https://theswiftdev.com/2018/03/12/the-ultimate-viper-architecture-tutorial/" />
    <meta property="og:image" content="https://images.unsplash.com/photo-1533234427049-9e9bb093186d?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;1080&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ" />
    <meta property="article:published_time" content="2018-03-12T19:51:19.000Z" />
    <meta property="article:modified_time" content="2019-03-10T04:04:03.000Z" />
    <meta property="article:tag" content="Design patterns" />
    <meta property="article:tag" content="iOS" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="The ultimate VIPER architecture tutorial - The.Swift.Dev." />
    <meta name="twitter:description" content="Learn how to write scalable iOS code using the VIPER architecture with some MVVM and MVC tricks and coordinators in mind." />
    <meta name="twitter:url" content="https://theswiftdev.com/2018/03/12/the-ultimate-viper-architecture-tutorial/" />
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1533234427049-9e9bb093186d?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;1080&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Tibor B√∂decs" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Design patterns, iOS" />
    <meta name="twitter:creator" content="@tiborbodecs" />
    <meta property="og:image:width" content="1080" />
    <meta property="og:image:height" content="720" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "The.Swift.Dev.",
        "logo": "https://theswiftdev.com/content/images/2017/10/Logo-2.png"
    },
    "author": {
        "@type": "Person",
        "name": "Tibor B√∂decs",
        "image": {
            "@type": "ImageObject",
            "url": "https://theswiftdev.com/content/images/2019/03/tiborbodecs-profile-xs-2019.jpg",
            "width": 256,
            "height": 256
        },
        "url": "https://theswiftdev.com/author/tiborbodecs/",
        "sameAs": [
            "https://theswiftdev.com",
            "https://twitter.com/tiborbodecs"
        ]
    },
    "headline": "The ultimate VIPER architecture tutorial - The.Swift.Dev.",
    "url": "https://theswiftdev.com/2018/03/12/the-ultimate-viper-architecture-tutorial/",
    "datePublished": "2018-03-12T19:51:19.000Z",
    "dateModified": "2019-03-10T04:04:03.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://images.unsplash.com/photo-1533234427049-9e9bb093186d?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjExNzczfQ",
        "width": 1080,
        "height": 720
    },
    "keywords": "Design patterns, iOS",
    "description": "Learn how to write scalable iOS code using the VIPER architecture with some MVVM and MVC tricks and coordinators in mind.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://theswiftdev.com/"
    }
}
    </script>

    <meta name="generator" content="Ghost 2.18" />
    <link rel="alternate" type="application/rss+xml" title="The.Swift.Dev." href="https://theswiftdev.com/rss/" />
    <link rel="mask-icon" sizes="any" href="/public/swift.svg" />
 <!-- color="#DE2451"--> 
<link rel="shortcut icon" href="/public/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="/public/apple-touch-icon.png" />
<link rel="apple-touch-icon" sizes="57x57" href="/public/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/public/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon" sizes="76x76" href="/public/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/public/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon" sizes="120x120" href="/public/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/public/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon" sizes="152x152" href="/public/apple-touch-icon-152x152.png" />
<link rel="apple-touch-icon" sizes="180x180" href="/public/apple-touch-icon-180x180.png" />

<style>
.site-logo {
    max-height: 192px;
    top: -24px;
    position: relative;
}
h1.site-title {
    margin-bottom: 15px;
}
h2.site-description {
    font-weight: 500;
    position: relative;
    top: -16px;
    padding: 0px 30px;
}
.post-feed {
    z-index: 999999999 !important;
}
h1, h2, h3, h4, h5, h6, h7 {
    padding-bottom: 1em;
}
p.note {
    border: 1px solid #f5e6a2;
    border-radius: 1em;
    padding: 1em;
    background: #f9f4e2;
}
.post-full-content hr {
    margin-top: 1em;
    margin-bottom: 2em;
}
.gitlab-embed-snippets {
    width: 100%;
    margin: 0px 0px 40px 0px !important;
}
.sponsorship-box {
    margin-top: 1em;
    margin-bottom: 2em;
}
.sponsorship-box .sponsor {
    border: 1px solid #de2451;
    border-radius: 1em;
    background: #fff;
    padding: 1em;
    margin-bottom: 0px;
}
.sponsor-layout {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr 4fr;
}
.sponsorship-box .sponsor b {
    text-transform: uppercase;
}
.sponsor-layout .box {
    padding: 0px;
    margin: 0px;
}
.sponsor-layout h3, .sponsor-layout p {
    margin: 0px;
    padding: 1em;
    padding-bottom: 0em;
}
.sponsor-layout h3 {
    padding-left: 0.8em;
}
.sponsor-logo {
    width: 128px !important;
}
.sponsor-text {
    padding: 1em;
    padding-top: 0em;
}
.sponsor-footer {
    text-align: right; 
    color: #222; 
    margin: 0px; 
    padding: 0px; 
    padding-right: 1em; 
    font-size: 12px;
    font-family: sans-serif, Verdana;
}
.sponsor-footer a {
    color: #de2451; 
    box-shadow: none; 
}
.overview-layout {
    text-align: center;
    width: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
}
.overview-layout .box {
    padding: 0px;
    margin: 8px;
    margin-bottom: 32px;
}
@media screen and (max-width: 1024px) {
    .overview-layout {
        display: grid;
        grid-template-columns: 1fr 1fr;
    }
    .sponsor-layout {
        width: 100%;
        display: grid;
        grid-template-columns: 1fr;
    }
}
@media only screen and (max-width: 600px) {
    .gitlab-embed-snippets .btn-group {
        width: 72px;
    }
    .gitlab-embed-snippets .file-content.code .line-numbers .diff-line-num {
    }
    .gitlab-embed-snippets .file-content.code .line-numbers {
        visibility: hidden;
        display: none;
    }
    .gitlab-embed-snippets .file-content.code .blob-content pre {
        border-left: none !important;
    }
}
</style>
<link href="/public/prism.css" rel="stylesheet" />

</head>
<body class="post-template tag-design-patterns tag-ios">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="https://theswiftdev.com"><img src="https://theswiftdev.com/content/images/2017/10/Logo-2.png" alt="The.Swift.Dev." /></a>
            <ul class="nav" role="menu">
    <li class="nav-ask-me" role="menuitem"><a href="https://discord.gg/C4DSQjP">üí¨ Ask me</a></li>
    <li class="nav-follow-me" role="menuitem"><a href="https://twitter.com/tiborbodecs/">üî• Follow me</a></li>
    <li class="nav-articles" role="menuitem"><a href="https://theswiftdev.com/articles/">üìñ Articles</a></li>
    <li class="nav-sponsorship" role="menuitem"><a href="https://theswiftdev.com/sponsorship-options/">üëç Sponsorship</a></li>
    <li class="nav-about" role="menuitem"><a href="https://theswiftdev.com/about/">ü§ì About</a></li>
    <li class="nav-newsletter" role="menuitem"><a href="https://theswiftdev.com/#subscribe">üì´ Newsletter</a></li>
</ul>

    </div>
    <div class="site-nav-right">
        <div class="social-links">
        </div>
            <a class="subscribe-button" href="#subscribe">Subscribe</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-design-patterns tag-ios ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2018-03-12">12 March 2018</time>
                        <span class="date-divider">/</span> <a href="/tag/design-patterns/">Design patterns</a>
                </section>
                <h1 class="post-full-title">The ultimate VIPER architecture tutorial</h1>
            </header>

            <figure class="post-full-image">
                <img
                    srcset="https://images.unsplash.com/photo-1533234427049-9e9bb093186d?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;1080&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 300w,
                            https://images.unsplash.com/photo-1533234427049-9e9bb093186d?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;1080&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 600w,
                            https://images.unsplash.com/photo-1533234427049-9e9bb093186d?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;1080&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 1000w,
                            https://images.unsplash.com/photo-1533234427049-9e9bb093186d?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;1080&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 2000w"
                    sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px"
                    src="https://images.unsplash.com/photo-1533234427049-9e9bb093186d?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;1080&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ"
                    alt="The ultimate VIPER architecture tutorial"
                />
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p>Learn how to write scalable iOS code using the VIPER architecture with some MVVM and MVC tricks and coordinators in mind.</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><p><strong>‚≠êÔ∏è Last update: </strong>10/03/2019 </p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id="swift-design-patterns-and-ios-architectures">Swift design patterns and iOS architectures</h2><p>A <a href="https://en.wikipedia.org/wiki/Software_design_pattern">software design pattern</a> is basically a generic template of how to solve a particular - but usually local - situation. <a href="https://herbertograca.com/2017/07/28/architectural-styles-vs-architectural-patterns-vs-design-patterns/">Achitectural patterns</a> have bigger impact on the whole codebase, they are high level generic templates. Please remember one thing:</p><blockquote><em>there is no such thing as a bad architecture</em></blockquote><p>The weapon of choise only depends on the situation, but you know everything is relative. Let's walk through all the iOS design patterns and architectures real quick and start learning VIPER. üêç</p><h3 id="swift-design-patterns">Swift design patterns</h3><p>Let's start with the basics, right? If we don't get into UIKit, we can find that there are many <a href="https://theswiftdev.com/tag/design-patterns/">design patterns</a> invented, maybe you know some of them already. But hey, since we don't have that much time and I'd like to talk about VIPER, let's check out the basic principle of building UIKit apps using the MVC pattern.</p><h3 id="mvc">MVC</h3><p>The <strong>Model-View-Controller</strong> (Massive-View-Controller) <a href="https://developer.apple.com/library/content/documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html">pattern</a> is a basic concept. You have usually a huge UIViewController subclass that controls all the views and collects every model that needed to be displayed for the end user. For example you call an API endpoint using URLSession or Alamofire from the controller, do the response data validation and formatting then you implement your table or collection view delegates on the view controller, so basically all the application logic goes inside that single overstuffed miserable view controller class. Does this ring a bell for you? üôÑ</p><h3 id="mvvm">MVVM</h3><p>After realizing the problem, the first thing that you can do is outsourcing the data transforming or binding part to a sepearate class. This is how the smart people at <a href="https://msdn.microsoft.com/en-us/library/hh848246.aspx">Miscrosoft</a> invented the Model-View-ViewModel architecture pattern. Now you're one step closer, your data models and the views can have their "get together" on a whole new level inside shiny new files far-far away from controller land. However this pattern will not clean up all the leftovers inside the view controller. Remember that you still have to feed the view controller with data, handle all the different states.</p><h3 id="mvp">MVP</h3><p>What if we move out all the data loading and presentation stuff from the view controller and put it into a new class magically called the Presenter? Sounds good, the view controller can own the new presenter instance and we can live happily ever after. C'mon people we should really rename this to the Most Valuable Pattern ever! üòâ</p><h3 id="the-coordinator-pattern">The Coordinator pattern</h3><p><a href="https://www.raywenderlich.com/177538/coordinator-tutorial-ios-getting-started">Say hello</a> to <a href="http://khanlou.com/2015/01/the-coordinator/">The coordinator</a> by <a href="https://vimeo.com/144116310">Soroush Khanlou</a>. Or should I simply call this as the <strong>Inverse Model View Presenter</strong> pattern? Look, here is the deal, coordinators are on a whole new level inside of this evolution progress, but they also have too much to do. It's against the Single Responsibility principle, because now you have to manage the presentation context, the data storage, the routing and all the differnet states inside coordinators or sub-coordinators... but, finally your view controller is free from all the leftover baggage and it can focus directly on it's job, which is? üôÉ</p><p><s>To be fucking dumb.</s></p><p>Presenting views using UIKit related stuff, and forwarding events.</p><p></p><!--kg-card-begin: html--><p class="note">
    <b>Quick note:</b><br>
I don't hate the design patters from above, I'm just simply trying to point out (in a funny / sarcastic way) why VIPER was born on the first place. üòÖ</p>
<!--kg-card-end: html--><p></p><p>Are you still with me? üò¨</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id="the-viper-architecture">The VIPER architecture</h2><p>First of all <strong>DO NOT</strong> believe that VIPER is bad, just because someone misused it. I think it's a freaking amazing architecture! You just have to learn it properly, which is hard, because of the lack of good tutorials. Everyone is comparing architectures, but that's not what people should do. As far as I can see, an MVP is good for a small app with a few screens, you should never use VIPER for those apps. The real problem starts if you app grows and more and more components get into the game.</p><p>If you are planning to write a small app, just start with <strong>MVC</strong>. Later on you can fix the massive view controller problem with <strong>MVVM</strong>, but if you want to take it one level further you can always use <strong>MVP</strong> or the <strong>coordinator</strong> pattern to keep maintainability. Which is completely fine, until you realize one day that your code is stuffed with utility classes, managers, handlers and all the nonsense objects. Sounds familiar? üòÖ</p><p>As I mentioned this before there is no such thing as a bad architecture. There are only bad choices, which lead us to hardly maintainable codebases. So let me guide you through the most useful design pattern that you'll ever want to know in order to write truely scalable iOS applications: VIPER with module builders = VIPER(B)</p><p></p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id="understanding-viper">Understanding VIPER</h2><p>The VIPER architecture is based on the single responsibility principle (<a href="https://en.wikipedia.org/wiki/SOLID_(object-oriented_design)">S.O.L.I.D.</a>) which leads us to the theory of a <a href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html">clean architecture</a>. The core components or let's say layers of a VIPERB module are the following ones:</p><h3 id="view">View</h3><p>It's the <strong>interface layer</strong>, which means UIKit files, mostly UIViewController subclasses and all the other stuff. Views don't do anything that's related to business logic, the're just a presentation and event forwarding layer which is used by the presenter. Because the view is just a pure view controller, you can use MVVM principles or data managers to make your project even more concise.</p><h3 id="interactor">Interactor</h3><p>The interactor is responsible for <strong>retrieving data</strong> from the model layer, and its implementation is completely<strong> independent of the user interface</strong>. It's important to remember that data managers (network, database, sensor) are not part of VIPER, so they are treated as separate components (services), coming outside from the VIPER module land and they can be <a href="https://theswiftdev.com/2018/07/17/swift-dependency-injection-design-pattern/">injected as dependencies</a> for interactors. </p><p>The Interactor can prepare or transform data, that's coming from the service layer. For example it can do some sorting or filtering before asking the proper network service implementation to request or save the data. But remember that the Interactor doesn‚Äôt know the view, so it has no idea how the data should be prepared for the view, that's the role of the Presenter. üôÑ</p><h3 id="presenter">Presenter</h3><p><strong>UIKit independent</strong> class that prepares the data in the format required by the view and take decisions based on UI events from the view, that's why sometimes it's referred as an event handler. It's the core class of a VIPER module, because it also communicates with the Interactor and calls the router for wire-framing (aka. to present a new module or dismiss the current one). </p><p>It's the only class that communicates with almost all the other components. That's the ONLY job of the presenter, so it should not know anything about UIKit or low level data models. Basically it's the heart of the application, or some would say it's the place where all the <strong>business logic</strong> gets implemented. üíú </p><h3 id="entity">Entity</h3><p><strong>Plain model classes</strong> used mostly by the interactor. Usually I'm defining them outside the VIPER module structure (in the service layer), because these entities are shared across the system. We could separate them by module, but usually I don't like that approach because eg. all the CoreData models can be generated into one place. Same thing applies if you are using <a href="https://swagger.io">Swagger</a> or a similar tool.</p><h3 id="router">Router</h3><p>The <strong>navigation logic</strong> of the application <strong>using UIKit</strong> classes. For example if you are using the same iPhone views in a iPad application, the only thing that might change is how the router builds up the structure. This allows you to keep everything else, but the Router untouched. It also listens for navigation flow changes from the presenter, so it'll display the proper screen if needed. Also if you need to open an external URL call UIApplication.shared.openURL(url) inside the Router because that's also a routing action, the same logic applies for social media sharing using UIActivityViewController.</p><p>Also if you have to pass data between VIPER modules it feels like a right place to do this in the router. I usually communicate between two module using a <a href="https://theswiftdev.com/2018/06/27/swift-delegate-design-pattern/">delegate pattern</a>, so I picked up this habit of calling delegate functions in the router. üì≤ </p><h3 id="builder">Builder</h3><p>Some people are using the router to build the whole module, but I don't like that approach. That's why I'm always using a separate <strong>module builder</strong> class. It's only responsibility is to build the complete module by using dependency injection for all the extenal services. It can also build mock or other versions of the same module. That's quite helpful if it comes to unit testing. Totally makes sense. üëç</p><h3 id="not-everything-is-a-viper-module">NOT everything is a VIPER module</h3><p>For example if you want to create a generic subclass from a UIViewWhatever please don't try to stuff that into the components above. You should create a place outside your VIPER modules folder and put it there. There will be some use cases with specific classes that are better not to be VIPERized! üòâ</p><h3 id="services-and-application-specific-code">Services and application specific code</h3><p>I usually have 3 separate layers in my applications. Modules, services, and app. All the VIPER modules are sitting inside the <code>Modules</code> folder. Everything that's network or data related goes to the <code>Services</code> folder (api service, core data service, location service, etc.) and later on gets used in the module builder depending the current environment (for example mock implementation for testing). ¬†All the remaining stuff like view subclassess, and other UI related objects, <a href="https://theswiftdev.com/2019/02/19/styling-by-subclassing/">app specific styling</a> or design wise things are placed inside the <code>App</code> directory.</p><p></p><!--kg-card-begin: html--><div class="sponsorship-box">
    <p class="sponsor">
    <b>Book this place now! </b><br>

 Promote your product through this page. Feel free to contact me for a wide variety of <a href="/sponsorship-options/">sponsorship options</a> including text, image and video content! <br>Emojis are more than welcome! üéâ
        </p>
</div><!--kg-card-end: html--><p></p><h2 id="how-to-write-viper-code">How to write VIPER code?</h2><p>I can't emphase enough how <strong>important</strong> is <strong>to learn</strong> this architecture before you start using it. I believe that things can go real bad if someone misunderstands VIPER and start putting view logic in a presenter for example. If you had a previous bad experience with VIPER, think about this quote: don't blame the tool, blame the carpenter (just as <a href="https://twitter.com/ilyapuchka">Ilya Puchka</a> wisely said on a twitter conversation). üî® </p><blockquote><em>Every single component will just get into the right place <br>if you follow the rules of VIPER.</em></blockquote><h3 id="module-generation">Module generation</h3><p>Never start to create a VIPER module by hand, you should always use a code generator, because (unfortunately) you'll need lots of boilerplate code for each module. That seems quite unfortunate at first sight, but this is what gives the true power of this architecture. All members of your developer team will know where to look for if a specific issue occurs. If it's a view issue, you have to fix the view, if it comes to a navigation problem then it's a router problem. </p><p>There are many existing code generator solutions (one of the famoust is <a href="https://github.com/strongself/Generamba">generamba</a>), but I made my own little Swift tool for generating VIPER modules. It's pretty damn lightweight, but it's really heplful (it utilizes templates in order to generate a new module) i'm calling it: <strong><a href="https://github.com/corekit/vipera">VIPERA</a>.</strong> (Hungarian name of the viper snake... haha üòÇ)</p><p>You just have to clone / download the repository &amp; run <code>swift run install --with-templates</code> in order to make it work. From now on you can simply run <code>vipera MyModule</code> to generate a new module based on the default template. As a second argument you can pass your own template directory name (you can create your own template under the <code>~/.vipera</code> folder, or you can change the default one too).</p><p>The anatomy of the base template is pretty simple, I'm not creating subfolders for each layer, but I'm separating the interfaces and the default implementation in different places. That gives me a little bit of sanity, because most of the VIPER templates seemed to be very deterrent just because of the project structure.</p><h3 id="naming-conventions">Naming conventions</h3><p>Protocols are defined for almost every VIPER component. Every protocol will be prefixed with the module name, and it won't have any other suffix except from the layer name (like MyModuleRouter, MyModulePresenter).</p><p>Default implementation is used for the basic scenario, every protocol implementation follows the ModuleName+Default+Layer naming convention. So for example MyModuleDefaultRouter or MyModuleDefaultPresenter.</p><h3 id="inter-module-communication-using-delegates">Inter-module communication using delegates</h3><p>The flow is something like this:</p><p><strong>Router &lt;-&gt; Presenter</strong></p><p>The presenter can send events for the router using the router protocol definition.</p><p><strong>Presenter &lt;-&gt; Interactor</strong></p><p>The interactor can notify the presenter through the presenter's interface, and the presenter can call the interactor using the defined methods inside the interactor protocol.</p><p><strong>Presenter &lt;-&gt; View</strong></p><p>The view usually has setter methods to update it's contents defined on the view protocol. It can also notify the presenter of incoming or load events through the presenter protocol.</p><h3 id="data-transfer-between-modules">Data transfer between modules</h3><p>Imagine a list, you select an item and go to a new controller scene. You have to pass at least a unique indentifier between VIPER modules to make this possible.</p><p>It's usually done somewhat like this:</p><ul><li>The view calls the didSelect method on the presenter with the id</li><li>The presenter forwards the id to the router using the routeFor(id) method</li><li>The router calls the builder to build a new module using the id</li><li>The builder builds the new module using the id</li><li>The router presents the new module using it's view (controller)</li><li>The new module passes the id for everyone who needs it (router, presenter)</li><li>The new module's presenter gets the id</li><li>The new module's interactor loads the data and gives it for the presenter</li><li>The new module's presenter gives the data for the view and presents it</li><li>Detail screen appears with proper data.</li></ul><p>NOTE: if you are presenting a controller modally you can also pass the original router as a delegate, so you'll be able to close it properly if it's needed. üòé</p><h3 id="memory-management">Memory management</h3><p>Long story short:</p><ul><li>The builder holds noone.</li><li>The router keeps a weak reference of the view and the presenter.</li><li>The presenter holds the router and the interactor strongly</li><li>The interactor keeps a weak refernece of the presenter</li><li>The view keeps a strong refernece of the presenter</li><li>UIKit holds the views.</li></ul><p>You should check this in the provided example, no leaks - I hope so - ¬†everything gets released nice and smoothly after you go back or dismiss a module. ü§û</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id="final-conclusion-should-i-learn-viper">Final conclusion: should I learn VIPER?</h2><p>Although VIPER is highly criticized because of it's complexity, all I can say it's worth the effort to learn its priciples properly. You'll see that there are way more benefits of using VIPER instead of ignoring it.</p><h3 id="advantages">Advantages</h3><ul><li><strong>Simplicity</strong> - for large teams on complex projects</li><li><strong>Scalability</strong> - simultaneous work seamlessly</li><li><strong>Reusability</strong> - decoupled app components based on roles</li><li><strong>Consistency</strong> - module skeletons, separation of concerns</li><li><strong>Clarity</strong> - Single responsibilities (SOLID)</li><li><strong>Testability</strong> - separated small classes, TDD, better code coverage</li><li><strong>Interfaces</strong> - module independence, well defined scopes</li><li><strong>Bug fixing</strong> - easier to track issues, locate bugs and problems</li><li><strong>Source control</strong> - smaller files, less conflicts, cleaner code</li><li><strong>Easy</strong> - codebase looks similar, faster to read others work</li></ul><h3 id="drawbacks">Drawbacks</h3><ul><li><strong>Verbosity</strong> - many files per module</li><li><strong>Complexity</strong> - many protocols and delegates</li><li><strong>On-boarding</strong> - lack of proper VIPER knowledge</li><li><strong>Engagement</strong> - VIPER is bad, because it's complex, meh!</li></ul><p>I made a follow-up article about VIPER best practices that I've learn along the journey, you can find the sample repository on <a href="https://github.com/theswiftdev/viper-best-practices">github</a>. I hope that these tutorials will help you to learn this architecture better, if you have any questions, feel free to contact me on <a href="https://twitter.com/tiborbodecs">twitter</a> or through <a href="https://discordapp.com/invite/C4DSQjP">discord</a>. üë®‚Äçüíª</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id="external-sources">External sources</h2><ul><li><a href="https://cheesecakelabs.com/blog/ios-project-architecture-using-viper/">iOS Project Architecture: Using VIPER</a></li><li><a href="https://cheesecakelabs.com/blog/best-practices-viper-architecture/">VIPER architecture: Our best practices to build an app like a boss</a></li><li><a href="https://medium.com/@ankoma22/the-good-the-bad-and-the-ugly-of-viper-architecture-for-ios-apps-7272001b5347">The Good, The Bad and the Ugly of VIPER architecture for iOS apps</a></li><li><a href="https://swifting.io/blog/2016/03/07/8-viper-to-be-or-not-to-be/">VIPER to be or not to be?</a></li><li><a href="https://github.com/lukaszmargielewski/ViperTabbar">ViperTabbar</a></li></ul>
                </div>
            </section>

            <section class="subscribe-form">
                <h3 class="subscribe-form-title">Subscribe to The.Swift.Dev.</h3>
                <p>Get the latest posts delivered right to your inbox</p>
                <form method="post" action="/subscribe/" id="" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email" placeholder="youremail@example.com" />
    </div>
    <button id="" class="" type="submit"><span>Subscribe</span></button>
    
<script>
    (function(g,h,o,s,t){
        var buster = function(b,m) {
            h[o]('input.'+b).forEach(function (i) {
                i.value=i.value || m;
            });
        };
        buster('location', g.location.href);
        buster('referrer', h.referrer);
    })(window,document,'querySelectorAll','value');
</script>

</form>


            </section>

            <footer class="post-full-footer">


                    
<section class="author-card">
        <img class="author-profile-image" src="/content/images/size/w100/2019/03/tiborbodecs-profile-xs-2019.jpg" alt="Tibor B√∂decs" />
    <section class="author-card-content">
        <h4 class="author-card-name"><a href="/author/tiborbodecs/">Tibor B√∂decs</a></h4>
            <p>Read <a href="/author/tiborbodecs/">more posts</a> by this author.</p>
    </section>
</section>
<div class="post-full-footer-right">
    <a class="author-card-button" href="/author/tiborbodecs/">Read More</a>
</div>


            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card"
                            style="background-image: url(/content/images/size/w600/2018/11/background-1.jpg)"
                >
                    <header class="read-next-card-header">
                        <small class="read-next-card-header-sitetitle">&mdash; The.Swift.Dev. &mdash;</small>
                        <h3 class="read-next-card-header-title"><a href="/tag/design-patterns/">Design patterns</a></h3>
                    </header>
                    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                    <div class="read-next-card-content">
                        <ul>
                            <li><a href="/2019/03/19/mastering-the-viper-architecture/">Mastering the VIPER architecture</a></li>
                            <li><a href="/2019/03/11/viper-best-practices-for-ios-developers/">VIPER best practices for iOS developers</a></li>
                            <li><a href="/2018/12/17/lazy-initialization-in-swift/">Lazy initialization in Swift</a></li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="/tag/design-patterns/">See all 20 posts ‚Üí</a>
                    </footer>
                </article>

                <article class="post-card post tag-server ">

    <a class="post-card-image-link" href="/2018/03/20/server-side-swift-with-swift-nio/">
        <img class="post-card-image"
            srcset="/content/images/size/w300/2018/03/IMG_2574.jpg 300w,
                    /content/images/size/w600/2018/03/IMG_2574.jpg 600w,
                    /content/images/size/w1000/2018/03/IMG_2574.jpg 1000w,
                    /content/images/size/w2000/2018/03/IMG_2574.jpg 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="/content/images/size/w600/2018/03/IMG_2574.jpg"
            alt="Server side Swift with SwiftNIO"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/2018/03/20/server-side-swift-with-swift-nio/">

            <header class="post-card-header">
                    <span class="post-card-tags">Server</span>
                <h2 class="post-card-title">Server side Swift with SwiftNIO</h2>
            </header>

            <section class="post-card-excerpt">
                <p>Learn the fundamentals of Apple's SwiftNIO event-driven network application framework to make non-blocking server side Swift apps.</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Tibor B√∂decs
                    </div>

                        <a href="/author/tiborbodecs/" class="static-avatar">
                            <img class="author-profile-image" src="/content/images/size/w100/2019/03/tiborbodecs-profile-xs-2019.jpg" alt="Tibor B√∂decs" />
                        </a>
                </li>
            </ul>

            <span class="reading-time">3 min read</span>

        </footer>

    </div>

</article>

                <article class="post-card post tag-ios tag-macos tag-tvos tag-watchos ">

    <a class="post-card-image-link" href="/2018/02/27/networking-examples-for-appleos/">
        <img class="post-card-image"
            srcset="/content/images/size/w300/2018/02/IMG_1009.JPG 300w,
                    /content/images/size/w600/2018/02/IMG_1009.JPG 600w,
                    /content/images/size/w1000/2018/02/IMG_1009.JPG 1000w,
                    /content/images/size/w2000/2018/02/IMG_1009.JPG 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="/content/images/size/w600/2018/02/IMG_1009.JPG"
            alt="Networking examples for appleOS"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/2018/02/27/networking-examples-for-appleos/">

            <header class="post-card-header">
                    <span class="post-card-tags">iOS</span>
                <h2 class="post-card-title">Networking examples for appleOS</h2>
            </header>

            <section class="post-card-excerpt">
                <p>Learn how to use Bonjour, with UDP/TCP sockets, streams and how to communicate through CoreBluetooth or the watch APIs.</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Tibor B√∂decs
                    </div>

                        <a href="/author/tiborbodecs/" class="static-avatar">
                            <img class="author-profile-image" src="/content/images/size/w100/2019/03/tiborbodecs-profile-xs-2019.jpg" alt="Tibor B√∂decs" />
                        </a>
                </li>
            </ul>

            <span class="reading-time">3 min read</span>

        </footer>

    </div>

</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://theswiftdev.com">
                <img src="/content/images/size/w30/2017/10/Logo-Square-1.png" alt="The.Swift.Dev. icon" />
            <span>The.Swift.Dev.</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">The ultimate VIPER architecture tutorial</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=The%20ultimate%20VIPER%20architecture%20tutorial&amp;url=https://theswiftdev.com/2018/03/12/the-ultimate-viper-architecture-tutorial/"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://theswiftdev.com/2018/03/12/the-ultimate-viper-architecture-tutorial/"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
        </a>
    </div>
    <progress id="reading-progress" class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://theswiftdev.com">The.Swift.Dev.</a> &copy; 2019</section>
                <nav class="site-footer-nav">
                    <a href="https://theswiftdev.com">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <div id="subscribe" class="subscribe-overlay">
        <a class="subscribe-overlay-close" href="#"></a>
        <div class="subscribe-overlay-content">
                <img class="subscribe-overlay-logo" src="https://theswiftdev.com/content/images/2017/10/Logo-2.png" alt="The.Swift.Dev." />
            <h1 class="subscribe-overlay-title">Subscribe to The.Swift.Dev.</h1>
            <p class="subscribe-overlay-description">Stay up to date! Get all the latest &amp; greatest posts delivered straight to your inbox</p>
            <form method="post" action="/subscribe/" id="" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email" placeholder="youremail@example.com" />
    </div>
    <button id="" class="" type="submit"><span>Subscribe</span></button>
    
<script>
    (function(g,h,o,s,t){
        var buster = function(b,m) {
            h[o]('input.'+b).forEach(function (i) {
                i.value=i.value || m;
            });
        };
        buster('location', g.location.href);
        buster('referrer', h.referrer);
    })(window,document,'querySelectorAll','value');
</script>

</form>


        </div>
    </div>

    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>


    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/built/jquery.fitvids.js?v=64c8bc839a"></script>


    

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38095670-5', 'auto');
  ga('send', 'pageview');

</script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-swift.min.js"></script>

</body>
</html>
Y = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();

});
</script>


    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38095670-5', 'auto');
  ga('send', 'pageview');

</script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-swift.min.js"></script>

</body>
</html>
